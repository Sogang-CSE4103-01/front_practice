{"ast":null,"code":"var _jsxFileName = \"/Users/meogyu/connected_front/src/views/VideoPlayer.js\";\n// src/views/VideoPlayer.js\nimport { MediaControls } from '@enact/sandstone/MediaPlayer';\nimport VideoPlayer from '@enact/sandstone/VideoPlayer';\nimport { useCallback, useRef, useState } from 'react';\nimport './VideoPlayer.css'; // CSS 파일 추가\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SelectableVideoPlayer = ({\n  video,\n  onClose\n}) => {\n  const videoRef = useRef(null);\n  const [selection, setSelection] = useState([]);\n  const handleToggleSelection = useCallback(() => {\n    const {\n      currentTime\n    } = videoRef.current.getMediaState();\n    if (selection.length !== 1) {\n      setSelection([currentTime]);\n    } else {\n      setSelection([selection[0], currentTime].sort((a, b) => a - b));\n    }\n  }, [selection]);\n  const handleTimeUpdate = useCallback(() => {\n    if (selection.length === 2) {\n      const [selectionStart, selectionEnd] = selection;\n      const {\n        currentTime\n      } = videoRef.current.getMediaState();\n      if (currentTime > selectionEnd || currentTime < selectionStart) {\n        videoRef.current.seek(selectionStart);\n      }\n    }\n  }, [selection]);\n  const handleSeekOutsideSelection = useCallback(ev => {\n    ev.preventDefault();\n    if (selection.length === 2) {\n      const [selectionStart, selectionEnd] = selection;\n      const {\n        time: currentTime\n      } = ev;\n      if (currentTime < selectionStart) {\n        videoRef.current.seek(selectionStart);\n      } else if (currentTime > selectionEnd) {\n        videoRef.current.seek(selectionEnd);\n      }\n    }\n  }, [selection]);\n  const setVideo = video => {\n    videoRef.current = video;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"video-modal\",\n    children: [\" \", /*#__PURE__*/_jsxDEV(VideoPlayer, {\n      loop: true,\n      onSeekOutsideSelection: handleSeekOutsideSelection,\n      onTimeUpdate: handleTimeUpdate,\n      selection: selection,\n      ref: setVideo,\n      onClose: onClose // 비디오 플레이어에서 닫기 이벤트 처리\n      ,\n      children: [/*#__PURE__*/_jsxDEV(MediaControls, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleToggleSelection,\n          selected: selection.length === 1,\n          children: selection.length === 1 ? 'Play Loop' : 'Set End Time'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"source\", {\n        src: video.src\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n};\nexport default SelectableVideoPlayer;","map":{"version":3,"names":["MediaControls","VideoPlayer","useCallback","useRef","useState","jsxDEV","_jsxDEV","SelectableVideoPlayer","video","onClose","videoRef","selection","setSelection","handleToggleSelection","currentTime","current","getMediaState","length","sort","a","b","handleTimeUpdate","selectionStart","selectionEnd","seek","handleSeekOutsideSelection","ev","preventDefault","time","setVideo","className","children","loop","onSeekOutsideSelection","onTimeUpdate","ref","Button","onClick","selected","fileName","_jsxFileName","lineNumber","columnNumber","src"],"sources":["/Users/meogyu/connected_front/src/views/VideoPlayer.js"],"sourcesContent":["// src/views/VideoPlayer.js\nimport { MediaControls } from '@enact/sandstone/MediaPlayer';\nimport VideoPlayer from '@enact/sandstone/VideoPlayer';\nimport { useCallback, useRef, useState } from 'react';\nimport './VideoPlayer.css'; // CSS 파일 추가\n\nconst SelectableVideoPlayer = ({ video, onClose }) => {\n    const videoRef = useRef(null);\n    const [selection, setSelection] = useState([]);\n\n    const handleToggleSelection = useCallback(() => {\n        const { currentTime } = videoRef.current.getMediaState();\n        if (selection.length !== 1) {\n            setSelection([currentTime]);\n        } else {\n            setSelection([selection[0], currentTime].sort((a, b) => a - b));\n        }\n    }, [selection]);\n\n    const handleTimeUpdate = useCallback(() => {\n        if (selection.length === 2) {\n            const [selectionStart, selectionEnd] = selection;\n            const { currentTime } = videoRef.current.getMediaState();\n            if (currentTime > selectionEnd || currentTime < selectionStart) {\n                videoRef.current.seek(selectionStart);\n            }\n        }\n    }, [selection]);\n\n    const handleSeekOutsideSelection = useCallback((ev) => {\n        ev.preventDefault();\n        if (selection.length === 2) {\n            const [selectionStart, selectionEnd] = selection;\n            const { time: currentTime } = ev;\n            if (currentTime < selectionStart) {\n                videoRef.current.seek(selectionStart);\n            } else if (currentTime > selectionEnd) {\n                videoRef.current.seek(selectionEnd);\n            }\n        }\n    }, [selection]);\n    \n    const setVideo = (video) => {\n        videoRef.current = video;\n    };\n\n    return (\n        <div className=\"video-modal\"> {/* 모달 스타일 적용 */}\n            <VideoPlayer\n                loop\n                onSeekOutsideSelection={handleSeekOutsideSelection}\n                onTimeUpdate={handleTimeUpdate}\n                selection={selection}\n                ref={setVideo}\n                onClose={onClose} // 비디오 플레이어에서 닫기 이벤트 처리\n            >\n                <MediaControls>\n                    <Button onClick={handleToggleSelection} selected={selection.length === 1}>\n                        {selection.length === 1 ? 'Play Loop' : 'Set End Time'}\n                    </Button>\n                </MediaControls>\n                <source src={video.src} />\n            </VideoPlayer>\n        </div>\n    );\n};\n\nexport default SelectableVideoPlayer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}