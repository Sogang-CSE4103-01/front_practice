{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Loader = EnyoLoader;\nexports[\"default\"] = void 0;\nvar _util = require(\"@enact/core/util\");\nvar _Loader = _interopRequireDefault(require(\"ilib/lib/Loader\"));\nvar _LocaleInfo = _interopRequireDefault(require(\"ilib/lib/LocaleInfo\"));\nvar _xhr = _interopRequireDefault(require(\"xhr\"));\nvar _zoneinfo = _interopRequireDefault(require(\"./zoneinfo\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : String(i);\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n} /* global XMLHttpRequest, ILIB_BASE_PATH, ILIB_RESOURCES_PATH, ILIB_ADDITIONAL_RESOURCES_PATH, ILIB_CACHE_ID */\nvar getImpl = function getImpl(url, callback, sync) {\n  if (typeof XMLHttpRequest !== 'undefined') {\n    _xhr[\"default\"].XMLHttpRequest = XMLHttpRequest || _xhr[\"default\"].XMLHttpRequest;\n    var req;\n    (0, _xhr[\"default\"])({\n      url: url,\n      sync: sync,\n      beforeSend: function beforeSend(r) {\n        return req = r;\n      }\n    }, function (err, resp, body) {\n      var error = err || resp.statusCode !== 200 && resp.statusCode;\n      // false failure from chrome and file:// urls\n      if (error && req.status === 0 && req.response.length > 0) {\n        body = req.response;\n        error = false;\n      }\n      var json = null;\n      try {\n        json = error ? null : JSON.parse(body);\n      } catch (e) {\n        error = 'Failed to parse ILIB JSON data';\n      }\n      callback(json, error);\n    });\n  } else {\n    callback(null, new Error('Not a web browser environment'));\n  }\n};\nvar getSync = function getSync(url, callback) {\n  return getImpl(url, callback, true);\n};\nvar get = (0, _util.memoize)(function (url) {\n  return new Promise(function (resolve, reject) {\n    getImpl(url, function (json, error) {\n      if (error) {\n        reject(error);\n      } else {\n        resolve(json);\n      }\n    }, false);\n  });\n});\nvar iLibBase = typeof ILIB_BASE_PATH === 'undefined' ? '/ilib' : ILIB_BASE_PATH;\nvar iLibResources = typeof ILIB_RESOURCES_PATH === 'undefined' ? '/locale' : ILIB_RESOURCES_PATH;\nvar cachePrefix = 'ENACT-ILIB-';\nvar cacheKey = cachePrefix + 'CACHE-ID';\nvar cacheID = typeof ILIB_CACHE_ID === 'undefined' ? '$ILIB' : ILIB_CACHE_ID;\nvar timeStampKey = 'l10n_timestamp';\nfunction setLocalStorageItem(keyName, keyValue) {\n  var regex = new RegExp(\"\".concat(cachePrefix).concat(iLibResources, \"/([a-z]{2,3}/)+[a-z]+.json\"));\n  try {\n    window.localStorage.setItem(keyName, keyValue);\n  } catch (_unused) {\n    Object.keys(window.localStorage).forEach(function (key) {\n      if (regex.test(key) && !key.includes(keyName.slice(0, keyName.lastIndexOf('/')))) {\n        window.localStorage.removeItem(key);\n      }\n    });\n    window.localStorage.setItem(keyName, keyValue);\n  }\n}\nfunction EnyoLoader() {\n  var _window$webOSSystem;\n  this.base = iLibBase;\n  // TODO: full enyo.platform implementation for improved accuracy\n  if (typeof window === 'object' && typeof ((_window$webOSSystem = window.webOSSystem) !== null && _window$webOSSystem !== void 0 ? _window$webOSSystem : window.PalmSystem) === 'object') {\n    this.webos = true;\n  }\n}\nEnyoLoader.prototype = new _Loader[\"default\"]();\nEnyoLoader.prototype.constructor = EnyoLoader;\nEnyoLoader.prototype._createZoneFile = function (path) {\n  var zone = path.substring(path.indexOf('zoneinfo'));\n\n  // remove the .json suffix to get the name of the zone\n  zone = zone.substring(0, zone.length - 5);\n  try {\n    var zif = new _zoneinfo[\"default\"]('/usr/share/' + zone);\n\n    // only get the info for this year. Later we can get the info\n    // for any historical or future year too\n    return zif.getIlibZoneInfo(new Date());\n  } catch (e) {\n    // no file, so just return nothing\n  }\n};\nEnyoLoader.prototype._pathjoin = function (_root, subpath) {\n  if (!_root || !_root.length) {\n    return subpath;\n  }\n  if (!subpath || !subpath.length) {\n    return _root;\n  }\n  return _root + (_root.charAt(_root.length - 1) !== '/' ? '/' : '') + subpath;\n};\n\n/**\n * Load the list of files asynchronously. This uses recursion in\n * order to create a queue of files that will be loaded serially.\n * Each layer, starting at the bottom, loads a file and then loads\n * the layer on top of it. The very top file on the stack will have\n * zero files to load, so instead it will be the one to call the\n * callback to notify the caller that all the content is loaded.\n *\n * @param {Array.<string>} paths array of strings containing relative paths for required locale data\n *\tfiles\n * @param {Array} results empty array in which to place the resulting json when it is loaded from a\n *\tfile\n * @param {Object} params An object full of parameters that the caller is passing to this function\n *\tto help load the files\n * @param {function(Array.<Object>)} callback callback to call when this function is finished\n *\tattempting to load all the files that exist and can be loaded\n *\n * @returns {Promise}\n */\nEnyoLoader.prototype._loadFilesAsync = function (path, params, cache, rootPath) {\n  var _this = this;\n  var _root = iLibResources;\n  if (typeof rootPath !== 'undefined') {\n    _root = rootPath;\n  } else if (params && typeof params.root !== 'undefined') {\n    _root = params.root; // Deprecated; to be removed in future\n  }\n  var cacheItem = cache.data.shift(),\n    url;\n  if (this.webos && path.indexOf('zoneinfo') !== -1) {\n    // TODO: Sort out async zone file loading\n    return this._createZoneFile(path);\n  } else if (cacheItem) {\n    return Promise.resolve(cacheItem);\n  }\n  return this.loadManifests(_root).then(function () {\n    var isRootAvailable = _this.isAvailable(_root, path);\n    if (isRootAvailable) {\n      url = _this._pathjoin(_root, path);\n    } else {\n      var localeBase = _this._pathjoin(_this.base, 'locale');\n      var isBaseAvailable = _this.isAvailable(localeBase, path);\n      if (isBaseAvailable) {\n        url = _this._pathjoin(localeBase, path);\n      }\n    }\n    if (url) {\n      return get(url).then(function (json) {\n        if (typeof json === 'object') {\n          cache.update = true;\n          return json;\n        } else if (path === 'localeinfo.json') {\n          return _LocaleInfo[\"default\"].defaultInfo;\n        }\n      });\n    }\n    return null;\n  });\n};\nEnyoLoader.prototype._loadFilesCache = function (_root, paths) {\n  this._validateCache();\n  if (typeof window !== 'undefined' && window.localStorage && paths.length > 0) {\n    var stored = window.localStorage.getItem(cachePrefix + _root + '/' + paths[0]);\n    if (stored) {\n      var target = JSON.stringify(paths);\n      var data = JSON.parse(stored);\n      if (data.target === target) {\n        return data.value;\n      } else {\n        window.localStorage.removeItem(cachePrefix + _root + '/' + paths[0]);\n      }\n    }\n  }\n  return new Array(paths.length);\n};\nEnyoLoader.prototype._storeFilesCache = function (_root, paths, data) {\n  if (typeof window !== 'undefined' && window.localStorage && paths.length > 0) {\n    var target = JSON.stringify(paths);\n    setLocalStorageItem(cachePrefix + _root + '/' + paths[0], JSON.stringify({\n      target: target,\n      value: data\n    }));\n  }\n};\nEnyoLoader.prototype._clearStringsCache = function () {\n  if (typeof window !== 'undefined' && window.localStorage) {\n    // Remove cache of app's strings\n    for (var i = 0; i < window.localStorage.length; i++) {\n      var currentKey = window.localStorage.key(i);\n      if (currentKey.includes('strings.json')) {\n        window.localStorage.removeItem(currentKey);\n      }\n    }\n  }\n};\nEnyoLoader.prototype._validateCache = function () {\n  if (!this._cacheValidated && typeof window !== 'undefined' && window.localStorage) {\n    var activeID = window.localStorage.getItem(cacheKey);\n    if (activeID !== cacheID) {\n      for (var i = 0; i < window.localStorage.length; i++) {\n        var key = window.localStorage.key(i);\n        if (key.indexOf(cachePrefix) === 0) {\n          window.localStorage.removeItem(key);\n          i--;\n        }\n      }\n      setLocalStorageItem(cacheKey, cacheID);\n    }\n  }\n  this._cacheValidated = true;\n};\nEnyoLoader.prototype.loadFiles = function (paths, sync, params, callback, rootPath) {\n  var _this2 = this;\n  var _root = iLibResources;\n  if (typeof rootPath !== 'undefined') {\n    _root = rootPath;\n  } else if (params && typeof params.root !== 'undefined') {\n    _root = params.root; // Deprecated; to be removed in future\n  }\n  if (sync) {\n    this.loadManifestsSync(_root);\n    if (this.addPaths && Array.isArray(this.addPaths)) {\n      var _iterator = _createForOfIteratorHelper(this.addPaths),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var addedRoot = _step.value;\n          this.loadManifestsSync(addedRoot);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n    var cache = {\n      data: this._loadFilesCache(_root, paths)\n    };\n    var ret = [];\n    var locdata = this._pathjoin(this.base, 'locale');\n    // synchronous\n    paths.forEach(function (path, index) {\n      if (this.webos && path.indexOf('zoneinfo') !== -1) {\n        ret.push(this._createZoneFile(path));\n      } else if (cache.data[index]) {\n        ret.push(cache.data[index]);\n      } else {\n        var found = false;\n        var handler = function handler(json, err) {\n          if (!err && typeof json === 'object') {\n            cache.update = true;\n            ret.push(json);\n            found = true;\n          }\n        };\n        var handleAdditionalResourcesPath = function handleAdditionalResourcesPath(json, err) {\n          if (!err && typeof json === 'object') {\n            if (found) {\n              // Overwrite the _root/path result\n              Object.assign(ret[ret.length - 1], json);\n            } else {\n              // This case is where the file is only in the additional resources path\n              cache.update = true;\n              ret.push(json);\n              found = true;\n            }\n          }\n        };\n        if (this.isAvailable(_root, path)) {\n          getSync(this._pathjoin(_root, path), handler);\n        }\n        if (this.addPaths && Array.isArray(this.addPaths) && index === paths.length - 1) {\n          var _iterator2 = _createForOfIteratorHelper(this.addPaths),\n            _step2;\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var _addedRoot = _step2.value;\n              for (var i = 0; i <= index; i++) {\n                if (this.isAvailable(_addedRoot, paths[i])) {\n                  getSync(this._pathjoin(_addedRoot, paths[i]), handleAdditionalResourcesPath);\n                }\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        }\n        if (!found && this.isAvailable(locdata, path)) {\n          getSync(this._pathjoin(locdata, path), handler);\n        }\n        if (!found) {\n          if (path === 'localeinfo.json') {\n            // Use default locale info when xhr on root localeinfo.json fails/skips\n            ret.push(_LocaleInfo[\"default\"].defaultInfo);\n          } else {\n            // not there, so fill in a blank entry in the array\n            // eslint-disable-next-line no-undefined\n            ret.push(undefined);\n          }\n        }\n      }\n    }.bind(this));\n    if (cache.update) {\n      this._storeFilesCache(_root, paths, ret);\n    }\n    if (typeof callback === 'function') {\n      callback.call(this, ret);\n    }\n    return ret;\n  } else {\n    // asynchronous\n    var _cache = {\n      data: this._loadFilesCache(_root, paths)\n    };\n    Promise.all(paths.map(function (path) {\n      return _this2._loadFilesAsync(path, params, _cache, rootPath);\n    })).then(function (results) {\n      if (_cache.update) {\n        _this2._storeFilesCache(_root, paths, results);\n      }\n      if (typeof callback === 'function') {\n        callback.call(_this2, results);\n      }\n    });\n  }\n};\nEnyoLoader.prototype._handleManifest = function (dirpath, filepath, json) {\n  var isAdditionalPath = typeof ILIB_ADDITIONAL_RESOURCES_PATH !== 'undefined' ? dirpath.includes(ILIB_ADDITIONAL_RESOURCES_PATH) : false;\n  // star indicates there was no ilibmanifest.json, so always try to load files from\n  // that dir\n  if (json != null) {\n    if (typeof window !== 'undefined' && window.localStorage) {\n      setLocalStorageItem(cachePrefix + filepath, JSON.stringify(json));\n    }\n\n    // Need to clear string cache\n    this._clearStringsCache();\n    this.manifest[dirpath] = json.files;\n  } else if (isAdditionalPath) {\n    // If the path is an ilib additional resources path and json is null then make it null\n    // so that we prevent loading everything.\n    this.manifest[dirpath] = [];\n    if (typeof window !== 'undefined' && window.localStorage) {\n      setLocalStorageItem(cachePrefix + filepath, JSON.stringify(_defineProperty({}, timeStampKey, new Date().getTime())));\n    }\n  } else {\n    this.manifest[dirpath] = '*';\n  }\n  return this.manifest[dirpath];\n};\nEnyoLoader.prototype._validateManifest = function (cachedManifest, filepath, sync) {\n  if (cachedManifest) {\n    var cachedTimeStamp = JSON.parse(cachedManifest)[timeStampKey];\n    if (cachedTimeStamp) {\n      var newManifest;\n      if (sync) {\n        getSync(filepath, function (json) {\n          newManifest = json;\n        });\n      } else {\n        get(filepath).then(function (json) {\n          newManifest = json;\n        });\n      }\n      if (newManifest === null && typeof ILIB_ADDITIONAL_RESOURCES_PATH !== 'undefined' && filepath.includes(ILIB_ADDITIONAL_RESOURCES_PATH)) {\n        // If new manifest is null and the filepath has ILIB_ADDITIONAL_RESOURCES_PATH,\n        // meaning we need to clear string cache\n        this._clearStringsCache();\n        return false;\n      } else if (newManifest && newManifest[timeStampKey]) {\n        // If new manifest has timestamp, compare old one and see if it's the same\n        return cachedTimeStamp === newManifest[timeStampKey];\n      } else {\n        return false;\n      }\n    } else {\n      // Use cachedManifest as usual\n      return true;\n    }\n  }\n  return false;\n};\nEnyoLoader.prototype._loadManifest = function (_root, subpath, sync) {\n  var _this3 = this;\n  if (!this.manifest) {\n    this.manifest = {};\n  }\n  var dirpath = this._pathjoin(_root, subpath);\n  var filepath = this._pathjoin(dirpath, 'ilibmanifest.json');\n  var cachedManifest;\n  if (typeof window !== 'undefined' && window.localStorage) {\n    cachedManifest = window.localStorage.getItem(cachePrefix + filepath);\n  }\n  if (this._validateManifest(cachedManifest, filepath, sync)) {\n    this.manifest[dirpath] = JSON.parse(cachedManifest).files;\n    return sync ? this.manifest[dirpath] : Promise.resolve(this.manifest[dirpath]);\n  }\n  if (sync) {\n    getSync(filepath, function (json) {\n      _this3._handleManifest(dirpath, filepath, json);\n    });\n    return;\n  }\n  return get(filepath).then(function (json) {\n    return _this3._handleManifest(dirpath, filepath, json);\n  });\n};\nEnyoLoader.prototype.loadManifests = function (_root) {\n  this._validateCache();\n  return Promise.all([\n  // standard ilib locale data\n  this._loadManifest(this.base, 'locale'),\n  // the app's resources dir\n  this._loadManifest('', iLibResources),\n  // maybe it's a custom root? If so, try to load\n  // the manifest file first in case it is there\n  this._loadManifest(_root, '')]);\n};\nEnyoLoader.prototype.loadManifestsSync = function (_root) {\n  // load standard manifests\n  if (!this.manifest) {\n    this._validateCache();\n    this._loadManifest(this.base, 'locale', true); // standard ilib locale data\n    this._loadManifest('', iLibResources, true); // the app's resources dir\n  }\n  if (!this.manifest[_root]) {\n    // maybe it's a custom root? If so, try to load\n    // the manifest file first in case it is there\n    this._loadManifest(_root, '', true);\n  }\n};\nEnyoLoader.prototype.isAvailable = function (_root, path) {\n  // util.print('enyo loader: isAvailable ' + path + '? ');\n  // star means attempt to load everything because there was no manifest in that dir\n  if (this.manifest[_root] === '*' || this.manifest[_root] && this.manifest[_root].indexOf(path) !== -1) {\n    // util.print('true\\n');\n    return true;\n  }\n\n  // util.print('false\\n');\n  return false;\n};\nvar _default = exports[\"default\"] = EnyoLoader;","map":{"version":3,"names":["Object","defineProperty","exports","value","Loader","EnyoLoader","_util","require","_Loader","_interopRequireDefault","_LocaleInfo","_xhr","_zoneinfo","obj","__esModule","_defineProperty","key","_toPropertyKey","enumerable","configurable","writable","t","i","_toPrimitive","String","r","e","Symbol","toPrimitive","call","TypeError","Number","_createForOfIteratorHelper","o","allowArrayLike","it","iterator","Array","isArray","_unsupportedIterableToArray","length","F","s","n","done","_e","f","normalCompletion","didErr","err","step","next","_e2","minLen","_arrayLikeToArray","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","getImpl","url","callback","sync","XMLHttpRequest","req","beforeSend","resp","body","error","statusCode","status","response","json","JSON","parse","Error","getSync","get","memoize","Promise","resolve","reject","iLibBase","ILIB_BASE_PATH","iLibResources","ILIB_RESOURCES_PATH","cachePrefix","cacheKey","cacheID","ILIB_CACHE_ID","timeStampKey","setLocalStorageItem","keyName","keyValue","regex","RegExp","concat","window","localStorage","setItem","_unused","keys","forEach","includes","lastIndexOf","removeItem","_window$webOSSystem","base","webOSSystem","PalmSystem","webos","_createZoneFile","path","zone","substring","indexOf","zif","getIlibZoneInfo","Date","_pathjoin","_root","subpath","charAt","_loadFilesAsync","params","cache","rootPath","_this","root","cacheItem","data","shift","loadManifests","then","isRootAvailable","isAvailable","localeBase","isBaseAvailable","update","defaultInfo","_loadFilesCache","paths","_validateCache","stored","getItem","target","stringify","_storeFilesCache","_clearStringsCache","currentKey","_cacheValidated","activeID","loadFiles","_this2","loadManifestsSync","addPaths","_iterator","_step","addedRoot","ret","locdata","index","push","found","handler","handleAdditionalResourcesPath","assign","_iterator2","_step2","_addedRoot","undefined","bind","_cache","all","map","results","_handleManifest","dirpath","filepath","isAdditionalPath","ILIB_ADDITIONAL_RESOURCES_PATH","manifest","files","getTime","_validateManifest","cachedManifest","cachedTimeStamp","newManifest","_loadManifest","_this3","_default"],"sources":["/Users/meogyu/connected_front/node_modules/@enact/i18n/src/Loader.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Loader = EnyoLoader;\nexports[\"default\"] = void 0;\nvar _util = require(\"@enact/core/util\");\nvar _Loader = _interopRequireDefault(require(\"ilib/lib/Loader\"));\nvar _LocaleInfo = _interopRequireDefault(require(\"ilib/lib/LocaleInfo\"));\nvar _xhr = _interopRequireDefault(require(\"xhr\"));\nvar _zoneinfo = _interopRequireDefault(require(\"./zoneinfo\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; } /* global XMLHttpRequest, ILIB_BASE_PATH, ILIB_RESOURCES_PATH, ILIB_ADDITIONAL_RESOURCES_PATH, ILIB_CACHE_ID */\nvar getImpl = function getImpl(url, callback, sync) {\n  if (typeof XMLHttpRequest !== 'undefined') {\n    _xhr[\"default\"].XMLHttpRequest = XMLHttpRequest || _xhr[\"default\"].XMLHttpRequest;\n    var req;\n    (0, _xhr[\"default\"])({\n      url: url,\n      sync: sync,\n      beforeSend: function beforeSend(r) {\n        return req = r;\n      }\n    }, function (err, resp, body) {\n      var error = err || resp.statusCode !== 200 && resp.statusCode;\n      // false failure from chrome and file:// urls\n      if (error && req.status === 0 && req.response.length > 0) {\n        body = req.response;\n        error = false;\n      }\n      var json = null;\n      try {\n        json = error ? null : JSON.parse(body);\n      } catch (e) {\n        error = 'Failed to parse ILIB JSON data';\n      }\n      callback(json, error);\n    });\n  } else {\n    callback(null, new Error('Not a web browser environment'));\n  }\n};\nvar getSync = function getSync(url, callback) {\n  return getImpl(url, callback, true);\n};\nvar get = (0, _util.memoize)(function (url) {\n  return new Promise(function (resolve, reject) {\n    getImpl(url, function (json, error) {\n      if (error) {\n        reject(error);\n      } else {\n        resolve(json);\n      }\n    }, false);\n  });\n});\nvar iLibBase = typeof ILIB_BASE_PATH === 'undefined' ? '/ilib' : ILIB_BASE_PATH;\nvar iLibResources = typeof ILIB_RESOURCES_PATH === 'undefined' ? '/locale' : ILIB_RESOURCES_PATH;\nvar cachePrefix = 'ENACT-ILIB-';\nvar cacheKey = cachePrefix + 'CACHE-ID';\nvar cacheID = typeof ILIB_CACHE_ID === 'undefined' ? '$ILIB' : ILIB_CACHE_ID;\nvar timeStampKey = 'l10n_timestamp';\nfunction setLocalStorageItem(keyName, keyValue) {\n  var regex = new RegExp(\"\".concat(cachePrefix).concat(iLibResources, \"/([a-z]{2,3}/)+[a-z]+.json\"));\n  try {\n    window.localStorage.setItem(keyName, keyValue);\n  } catch (_unused) {\n    Object.keys(window.localStorage).forEach(function (key) {\n      if (regex.test(key) && !key.includes(keyName.slice(0, keyName.lastIndexOf('/')))) {\n        window.localStorage.removeItem(key);\n      }\n    });\n    window.localStorage.setItem(keyName, keyValue);\n  }\n}\nfunction EnyoLoader() {\n  var _window$webOSSystem;\n  this.base = iLibBase;\n  // TODO: full enyo.platform implementation for improved accuracy\n  if (typeof window === 'object' && typeof ((_window$webOSSystem = window.webOSSystem) !== null && _window$webOSSystem !== void 0 ? _window$webOSSystem : window.PalmSystem) === 'object') {\n    this.webos = true;\n  }\n}\nEnyoLoader.prototype = new _Loader[\"default\"]();\nEnyoLoader.prototype.constructor = EnyoLoader;\nEnyoLoader.prototype._createZoneFile = function (path) {\n  var zone = path.substring(path.indexOf('zoneinfo'));\n\n  // remove the .json suffix to get the name of the zone\n  zone = zone.substring(0, zone.length - 5);\n  try {\n    var zif = new _zoneinfo[\"default\"]('/usr/share/' + zone);\n\n    // only get the info for this year. Later we can get the info\n    // for any historical or future year too\n    return zif.getIlibZoneInfo(new Date());\n  } catch (e) {\n    // no file, so just return nothing\n  }\n};\nEnyoLoader.prototype._pathjoin = function (_root, subpath) {\n  if (!_root || !_root.length) {\n    return subpath;\n  }\n  if (!subpath || !subpath.length) {\n    return _root;\n  }\n  return _root + (_root.charAt(_root.length - 1) !== '/' ? '/' : '') + subpath;\n};\n\n/**\n * Load the list of files asynchronously. This uses recursion in\n * order to create a queue of files that will be loaded serially.\n * Each layer, starting at the bottom, loads a file and then loads\n * the layer on top of it. The very top file on the stack will have\n * zero files to load, so instead it will be the one to call the\n * callback to notify the caller that all the content is loaded.\n *\n * @param {Array.<string>} paths array of strings containing relative paths for required locale data\n *\tfiles\n * @param {Array} results empty array in which to place the resulting json when it is loaded from a\n *\tfile\n * @param {Object} params An object full of parameters that the caller is passing to this function\n *\tto help load the files\n * @param {function(Array.<Object>)} callback callback to call when this function is finished\n *\tattempting to load all the files that exist and can be loaded\n *\n * @returns {Promise}\n */\nEnyoLoader.prototype._loadFilesAsync = function (path, params, cache, rootPath) {\n  var _this = this;\n  var _root = iLibResources;\n  if (typeof rootPath !== 'undefined') {\n    _root = rootPath;\n  } else if (params && typeof params.root !== 'undefined') {\n    _root = params.root; // Deprecated; to be removed in future\n  }\n  var cacheItem = cache.data.shift(),\n    url;\n  if (this.webos && path.indexOf('zoneinfo') !== -1) {\n    // TODO: Sort out async zone file loading\n    return this._createZoneFile(path);\n  } else if (cacheItem) {\n    return Promise.resolve(cacheItem);\n  }\n  return this.loadManifests(_root).then(function () {\n    var isRootAvailable = _this.isAvailable(_root, path);\n    if (isRootAvailable) {\n      url = _this._pathjoin(_root, path);\n    } else {\n      var localeBase = _this._pathjoin(_this.base, 'locale');\n      var isBaseAvailable = _this.isAvailable(localeBase, path);\n      if (isBaseAvailable) {\n        url = _this._pathjoin(localeBase, path);\n      }\n    }\n    if (url) {\n      return get(url).then(function (json) {\n        if (typeof json === 'object') {\n          cache.update = true;\n          return json;\n        } else if (path === 'localeinfo.json') {\n          return _LocaleInfo[\"default\"].defaultInfo;\n        }\n      });\n    }\n    return null;\n  });\n};\nEnyoLoader.prototype._loadFilesCache = function (_root, paths) {\n  this._validateCache();\n  if (typeof window !== 'undefined' && window.localStorage && paths.length > 0) {\n    var stored = window.localStorage.getItem(cachePrefix + _root + '/' + paths[0]);\n    if (stored) {\n      var target = JSON.stringify(paths);\n      var data = JSON.parse(stored);\n      if (data.target === target) {\n        return data.value;\n      } else {\n        window.localStorage.removeItem(cachePrefix + _root + '/' + paths[0]);\n      }\n    }\n  }\n  return new Array(paths.length);\n};\nEnyoLoader.prototype._storeFilesCache = function (_root, paths, data) {\n  if (typeof window !== 'undefined' && window.localStorage && paths.length > 0) {\n    var target = JSON.stringify(paths);\n    setLocalStorageItem(cachePrefix + _root + '/' + paths[0], JSON.stringify({\n      target: target,\n      value: data\n    }));\n  }\n};\nEnyoLoader.prototype._clearStringsCache = function () {\n  if (typeof window !== 'undefined' && window.localStorage) {\n    // Remove cache of app's strings\n    for (var i = 0; i < window.localStorage.length; i++) {\n      var currentKey = window.localStorage.key(i);\n      if (currentKey.includes('strings.json')) {\n        window.localStorage.removeItem(currentKey);\n      }\n    }\n  }\n};\nEnyoLoader.prototype._validateCache = function () {\n  if (!this._cacheValidated && typeof window !== 'undefined' && window.localStorage) {\n    var activeID = window.localStorage.getItem(cacheKey);\n    if (activeID !== cacheID) {\n      for (var i = 0; i < window.localStorage.length; i++) {\n        var key = window.localStorage.key(i);\n        if (key.indexOf(cachePrefix) === 0) {\n          window.localStorage.removeItem(key);\n          i--;\n        }\n      }\n      setLocalStorageItem(cacheKey, cacheID);\n    }\n  }\n  this._cacheValidated = true;\n};\nEnyoLoader.prototype.loadFiles = function (paths, sync, params, callback, rootPath) {\n  var _this2 = this;\n  var _root = iLibResources;\n  if (typeof rootPath !== 'undefined') {\n    _root = rootPath;\n  } else if (params && typeof params.root !== 'undefined') {\n    _root = params.root; // Deprecated; to be removed in future\n  }\n  if (sync) {\n    this.loadManifestsSync(_root);\n    if (this.addPaths && Array.isArray(this.addPaths)) {\n      var _iterator = _createForOfIteratorHelper(this.addPaths),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var addedRoot = _step.value;\n          this.loadManifestsSync(addedRoot);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n    var cache = {\n      data: this._loadFilesCache(_root, paths)\n    };\n    var ret = [];\n    var locdata = this._pathjoin(this.base, 'locale');\n    // synchronous\n    paths.forEach(function (path, index) {\n      if (this.webos && path.indexOf('zoneinfo') !== -1) {\n        ret.push(this._createZoneFile(path));\n      } else if (cache.data[index]) {\n        ret.push(cache.data[index]);\n      } else {\n        var found = false;\n        var handler = function handler(json, err) {\n          if (!err && typeof json === 'object') {\n            cache.update = true;\n            ret.push(json);\n            found = true;\n          }\n        };\n        var handleAdditionalResourcesPath = function handleAdditionalResourcesPath(json, err) {\n          if (!err && typeof json === 'object') {\n            if (found) {\n              // Overwrite the _root/path result\n              Object.assign(ret[ret.length - 1], json);\n            } else {\n              // This case is where the file is only in the additional resources path\n              cache.update = true;\n              ret.push(json);\n              found = true;\n            }\n          }\n        };\n        if (this.isAvailable(_root, path)) {\n          getSync(this._pathjoin(_root, path), handler);\n        }\n        if (this.addPaths && Array.isArray(this.addPaths) && index === paths.length - 1) {\n          var _iterator2 = _createForOfIteratorHelper(this.addPaths),\n            _step2;\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var _addedRoot = _step2.value;\n              for (var i = 0; i <= index; i++) {\n                if (this.isAvailable(_addedRoot, paths[i])) {\n                  getSync(this._pathjoin(_addedRoot, paths[i]), handleAdditionalResourcesPath);\n                }\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        }\n        if (!found && this.isAvailable(locdata, path)) {\n          getSync(this._pathjoin(locdata, path), handler);\n        }\n        if (!found) {\n          if (path === 'localeinfo.json') {\n            // Use default locale info when xhr on root localeinfo.json fails/skips\n            ret.push(_LocaleInfo[\"default\"].defaultInfo);\n          } else {\n            // not there, so fill in a blank entry in the array\n            // eslint-disable-next-line no-undefined\n            ret.push(undefined);\n          }\n        }\n      }\n    }.bind(this));\n    if (cache.update) {\n      this._storeFilesCache(_root, paths, ret);\n    }\n    if (typeof callback === 'function') {\n      callback.call(this, ret);\n    }\n    return ret;\n  } else {\n    // asynchronous\n    var _cache = {\n      data: this._loadFilesCache(_root, paths)\n    };\n    Promise.all(paths.map(function (path) {\n      return _this2._loadFilesAsync(path, params, _cache, rootPath);\n    })).then(function (results) {\n      if (_cache.update) {\n        _this2._storeFilesCache(_root, paths, results);\n      }\n      if (typeof callback === 'function') {\n        callback.call(_this2, results);\n      }\n    });\n  }\n};\nEnyoLoader.prototype._handleManifest = function (dirpath, filepath, json) {\n  var isAdditionalPath = typeof ILIB_ADDITIONAL_RESOURCES_PATH !== 'undefined' ? dirpath.includes(ILIB_ADDITIONAL_RESOURCES_PATH) : false;\n  // star indicates there was no ilibmanifest.json, so always try to load files from\n  // that dir\n  if (json != null) {\n    if (typeof window !== 'undefined' && window.localStorage) {\n      setLocalStorageItem(cachePrefix + filepath, JSON.stringify(json));\n    }\n\n    // Need to clear string cache\n    this._clearStringsCache();\n    this.manifest[dirpath] = json.files;\n  } else if (isAdditionalPath) {\n    // If the path is an ilib additional resources path and json is null then make it null\n    // so that we prevent loading everything.\n    this.manifest[dirpath] = [];\n    if (typeof window !== 'undefined' && window.localStorage) {\n      setLocalStorageItem(cachePrefix + filepath, JSON.stringify(_defineProperty({}, timeStampKey, new Date().getTime())));\n    }\n  } else {\n    this.manifest[dirpath] = '*';\n  }\n  return this.manifest[dirpath];\n};\nEnyoLoader.prototype._validateManifest = function (cachedManifest, filepath, sync) {\n  if (cachedManifest) {\n    var cachedTimeStamp = JSON.parse(cachedManifest)[timeStampKey];\n    if (cachedTimeStamp) {\n      var newManifest;\n      if (sync) {\n        getSync(filepath, function (json) {\n          newManifest = json;\n        });\n      } else {\n        get(filepath).then(function (json) {\n          newManifest = json;\n        });\n      }\n      if (newManifest === null && typeof ILIB_ADDITIONAL_RESOURCES_PATH !== 'undefined' && filepath.includes(ILIB_ADDITIONAL_RESOURCES_PATH)) {\n        // If new manifest is null and the filepath has ILIB_ADDITIONAL_RESOURCES_PATH,\n        // meaning we need to clear string cache\n        this._clearStringsCache();\n        return false;\n      } else if (newManifest && newManifest[timeStampKey]) {\n        // If new manifest has timestamp, compare old one and see if it's the same\n        return cachedTimeStamp === newManifest[timeStampKey];\n      } else {\n        return false;\n      }\n    } else {\n      // Use cachedManifest as usual\n      return true;\n    }\n  }\n  return false;\n};\nEnyoLoader.prototype._loadManifest = function (_root, subpath, sync) {\n  var _this3 = this;\n  if (!this.manifest) {\n    this.manifest = {};\n  }\n  var dirpath = this._pathjoin(_root, subpath);\n  var filepath = this._pathjoin(dirpath, 'ilibmanifest.json');\n  var cachedManifest;\n  if (typeof window !== 'undefined' && window.localStorage) {\n    cachedManifest = window.localStorage.getItem(cachePrefix + filepath);\n  }\n  if (this._validateManifest(cachedManifest, filepath, sync)) {\n    this.manifest[dirpath] = JSON.parse(cachedManifest).files;\n    return sync ? this.manifest[dirpath] : Promise.resolve(this.manifest[dirpath]);\n  }\n  if (sync) {\n    getSync(filepath, function (json) {\n      _this3._handleManifest(dirpath, filepath, json);\n    });\n    return;\n  }\n  return get(filepath).then(function (json) {\n    return _this3._handleManifest(dirpath, filepath, json);\n  });\n};\nEnyoLoader.prototype.loadManifests = function (_root) {\n  this._validateCache();\n  return Promise.all([\n  // standard ilib locale data\n  this._loadManifest(this.base, 'locale'),\n  // the app's resources dir\n  this._loadManifest('', iLibResources),\n  // maybe it's a custom root? If so, try to load\n  // the manifest file first in case it is there\n  this._loadManifest(_root, '')]);\n};\nEnyoLoader.prototype.loadManifestsSync = function (_root) {\n  // load standard manifests\n  if (!this.manifest) {\n    this._validateCache();\n    this._loadManifest(this.base, 'locale', true); // standard ilib locale data\n    this._loadManifest('', iLibResources, true); // the app's resources dir\n  }\n  if (!this.manifest[_root]) {\n    // maybe it's a custom root? If so, try to load\n    // the manifest file first in case it is there\n    this._loadManifest(_root, '', true);\n  }\n};\nEnyoLoader.prototype.isAvailable = function (_root, path) {\n  // util.print('enyo loader: isAvailable ' + path + '? ');\n  // star means attempt to load everything because there was no manifest in that dir\n  if (this.manifest[_root] === '*' || this.manifest[_root] && this.manifest[_root].indexOf(path) !== -1) {\n    // util.print('true\\n');\n    return true;\n  }\n\n  // util.print('false\\n');\n  return false;\n};\nvar _default = exports[\"default\"] = EnyoLoader;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}