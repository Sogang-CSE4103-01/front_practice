{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.EditableWrapper = exports.EditableShape = void 0;\nvar _handle = require(\"@enact/core/handle\");\nvar _propTypes = _interopRequireDefault(require(\"@enact/core/internal/prop-types\"));\nvar _keymap = require(\"@enact/core/keymap\");\nvar _usePublicClassNames = require(\"@enact/core/usePublicClassNames\");\nvar _spotlight = _interopRequireWildcard(require(\"@enact/spotlight\"));\nvar _container = require(\"@enact/spotlight/src/container\");\nvar _target = require(\"@enact/spotlight/src/target\");\nvar _Accelerator = _interopRequireDefault(require(\"@enact/spotlight/Accelerator\"));\nvar _pointer = require(\"@enact/spotlight/src/pointer\");\nvar _AnnounceDecorator = require(\"@enact/ui/AnnounceDecorator\");\nvar _Touchable = _interopRequireDefault(require(\"@enact/ui/Touchable\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _IString = _interopRequireDefault(require(\"ilib/lib/IString\"));\nvar _propTypes2 = _interopRequireDefault(require(\"prop-types\"));\nvar _react = require(\"react\");\nvar _$L = _interopRequireDefault(require(\"../internal/$L\"));\nvar _EditableWrapperModule = _interopRequireDefault(require(\"./EditableWrapper.module.css\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nfunction _getRequireWildcardCache(e) {\n  if (\"function\" != typeof WeakMap) return null;\n  var r = new WeakMap(),\n    t = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(e) {\n    return e ? t : r;\n  })(e);\n}\nfunction _interopRequireWildcard(e, r) {\n  if (!r && e && e.__esModule) return e;\n  if (null === e || \"object\" != typeof e && \"function\" != typeof e) return {\n    \"default\": e\n  };\n  var t = _getRequireWildcardCache(r);\n  if (t && t.has(e)) return t.get(e);\n  var n = {\n      __proto__: null\n    },\n    a = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) {\n    var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;\n    i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];\n  }\n  return n[\"default\"] = e, t && t.set(e, n), n;\n}\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : String(i);\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nvar completeAnnounceDelay = 300; // An arbitrary delay at a level that is not ignored by the new focus element\nvar TouchableDiv = (0, _Touchable[\"default\"])('div');\n\n/**\n * The shape for editable of {@link sandstone/Scroller|Scroller}.\n *\n * @typedef {Object} EditableShape\n * @memberof sandstone/Scroller\n * @property {Function} onComplete The callback function called when editing is finished.\n *  It has an event object contains `orders` array which app can use for repopulate items.\n * @property {Function|Object} [blurItemFuncRef] Obtains a reference to `blurItem` function.\n *  If you would like to remove `focused` CSS class to an item, you can get the reference to `blurItem` function via `useRef`.\n * `blurItem` function needs to be called with an item node when an item is blurred.\n * @property {Boolean} [centered] Centers the contents of the scroller.\n * @property {Object} [css] Customizes the component by mapping the supplied collection of CSS class names to the\n *  corresponding internal elements and states of this component.\n *  The following classes are supported:\n *\n * * `wrapper` - The content wrapper component class\n * * `selected` - The selected item class\n * * `focused` - The focused item class\n * @property {Function|Object} [focusItemFuncRef] Obtains a reference to `focusItem` function.\n *  If you would like to use `focused` CSS class to an item, you can get the reference to `focusItem` function via `useRef`.\n * `focusItem` function needs to be called with an item node when an item is focused.\n * @property {Function|Object} [hideItemFuncRef] Obtains a reference to `hideItem` function.\n *  If you would like to hide an item, you can get the reference to `hideItem` function via `useRef`.\n * @property {Function|Object} [removeItemFuncRef] Obtains a reference to `removeItem` function.\n *  If you would like to remove an item, you can get the reference to `removeItem` function via `useRef`.\n * @property {string} [selectItemBy] Decides how to start editing items.\n *  It can be either `'press'` or `'longPress'`. If unset, it defaults to `'longPress'`.\n * @property {Function|Object} [showItemFuncRef] Obtains a reference to `showItem` function.\n *  If you would like to show an item, you can get the reference to `showItem` function via `useRef`.\n * @public\n */\nvar EditableShape = exports.EditableShape = _propTypes2[\"default\"].shape({\n  onComplete: _propTypes2[\"default\"].func.isRequired,\n  blurItemFuncRef: _propTypes[\"default\"].ref,\n  centered: _propTypes2[\"default\"].bool,\n  css: _propTypes2[\"default\"].object,\n  focusItemFuncRef: _propTypes[\"default\"].ref,\n  hideItemFuncRef: _propTypes[\"default\"].ref,\n  removeItemFuncRef: _propTypes[\"default\"].ref,\n  selectItemBy: _propTypes2[\"default\"].string,\n  showItemFuncRef: _propTypes[\"default\"].ref\n});\nvar SpotlightAccelerator = new _Accelerator[\"default\"]([5, 4]);\nvar holdDuration = 500;\nvar holdConfig = {\n  events: [{\n    name: 'hold',\n    time: holdDuration\n  }]\n};\n\n/**\n * A Sandstone-styled EditableWrapper.\n *\n * @class EditableWrapper\n * @memberof sandstone/Scroller\n * @ui\n * @public\n */\nvar EditableWrapper = exports.EditableWrapper = function EditableWrapper(props) {\n  var _editable$hideIndex;\n  var children = props.children,\n    editable = props.editable,\n    scrollContainerHandle = props.scrollContainerHandle,\n    scrollContainerRef = props.scrollContainerRef,\n    scrollContentRef = props.scrollContentRef;\n  var centered = (editable === null || editable === void 0 ? void 0 : editable.centered) != null ? editable.centered : true;\n  var selectItemBy = (editable === null || editable === void 0 ? void 0 : editable.selectItemBy) || 'longPress';\n  var customCss = (editable === null || editable === void 0 ? void 0 : editable.css) || {};\n  var removeItemFuncRef = editable === null || editable === void 0 ? void 0 : editable.removeItemFuncRef;\n  var hideItemFuncRef = editable === null || editable === void 0 ? void 0 : editable.hideItemFuncRef;\n  var showItemFuncRef = editable === null || editable === void 0 ? void 0 : editable.showItemFuncRef;\n  var focusItemFuncRef = editable === null || editable === void 0 ? void 0 : editable.focusItemFuncRef;\n  var blurItemFuncRef = editable === null || editable === void 0 ? void 0 : editable.blurItemFuncRef;\n  var mergedCss = (0, _usePublicClassNames.usePublicClassNames)({\n    componentCss: _EditableWrapperModule[\"default\"],\n    customCss: customCss,\n    publicClassNames: true\n  });\n  var dataSize = children === null || children === void 0 ? void 0 : children.length;\n\n  // Mutable value\n  var wrapperRef = (0, _react.useRef)();\n  var mutableRef = (0, _react.useRef)({\n    // Constants\n    itemWidth: null,\n    centeredOffset: 0,\n    spotlightId: null,\n    // DOM elements\n    focusedItem: null,\n    selectedItem: null,\n    selectedItemLabel: '',\n    rearrangedItems: [],\n    // Indices\n    fromIndex: null,\n    prevToIndex: null,\n    hideIndex: null,\n    // Position for restoring focus after removing item\n    nextSpotlightRect: null,\n    // Move direction from the starting position to the current position\n    moveDirection: null,\n    // Last mouse position\n    lastMouseClientX: null,\n    // Last InputType which moves Items\n    lastInputType: null,\n    // Timer for holding key input\n    keyHoldTimerId: null,\n    // Flag for prevent event propagation\n    needToPreventEvent: null,\n    lastInputDirection: null,\n    isDraggingItem: false,\n    isDragging: false,\n    // initialSelected\n    initialSelected: editable === null || editable === void 0 ? void 0 : editable.initialSelected\n  });\n  var announceRef = (0, _react.useRef)({});\n  mutableRef.current.hideIndex = (_editable$hideIndex = editable === null || editable === void 0 ? void 0 : editable.hideIndex) !== null && _editable$hideIndex !== void 0 ? _editable$hideIndex : dataSize;\n\n  // Functions\n\n  // Reset values\n  var reset = (0, _react.useCallback)(function () {\n    var _mutableRef$current = mutableRef.current,\n      focusedItem = _mutableRef$current.focusedItem,\n      selectedItem = _mutableRef$current.selectedItem,\n      spotlightId = _mutableRef$current.spotlightId;\n    focusedItem === null || focusedItem === void 0 || focusedItem.classList.remove(customCss.focused);\n    selectedItem === null || selectedItem === void 0 || selectedItem.classList.remove(_EditableWrapperModule[\"default\"].selected, customCss.selected, _EditableWrapperModule[\"default\"].rearranged);\n    mutableRef.current.focusedItem = null;\n    mutableRef.current.selectedItem = null;\n    mutableRef.current.selectedItemLabel = '';\n    mutableRef.current.moveDirection = null;\n    mutableRef.current.prevToIndex = null;\n    mutableRef.current.initialSelected = null;\n    wrapperRef.current.style.setProperty('--selected-item-offset', '0px');\n    _spotlight[\"default\"].set(spotlightId, {\n      restrict: 'self-first'\n    });\n  }, [customCss.focused, customCss.selected]);\n\n  // Finalize the order\n  var finalizeOrders = (0, _react.useCallback)(function () {\n    var _mutableRef$current2 = mutableRef.current,\n      fromIndex = _mutableRef$current2.fromIndex,\n      moveDirection = _mutableRef$current2.moveDirection,\n      prevToIndex = _mutableRef$current2.prevToIndex,\n      rearrangedItems = _mutableRef$current2.rearrangedItems,\n      selectedItem = _mutableRef$current2.selectedItem;\n    var orders = Array.from({\n      length: dataSize\n    }, function (_, i) {\n      return i + 1;\n    });\n    if (rearrangedItems.length > 0) {\n      var selectedOrder = selectedItem.style.order;\n      var changedOrder = [];\n      rearrangedItems.forEach(function (item) {\n        var order = Number(item.style.order);\n        selectedOrder = order;\n        item.style.order = order - moveDirection;\n        item.classList.remove(_EditableWrapperModule[\"default\"].rearrangedTransform, _EditableWrapperModule[\"default\"].rearranged);\n        if (moveDirection > 0) {\n          changedOrder.push(order);\n        } else {\n          changedOrder.unshift(order);\n        }\n      });\n      if (moveDirection > 0) {\n        changedOrder.push(Number(selectedItem.style.order));\n      } else {\n        changedOrder.unshift(Number(selectedItem.style.order));\n      }\n      mutableRef.current.rearrangedItems = [];\n      selectedItem.style.order = selectedOrder;\n\n      // Create reordered array\n      orders.splice.apply(orders, [Math.min(fromIndex, prevToIndex), changedOrder.length].concat(changedOrder));\n    }\n    return orders;\n  }, [dataSize]);\n  var updateArrowIcon = (0, _react.useCallback)(function (index) {\n    var _mutableRef$current$s, _mutableRef$current$s2;\n    (_mutableRef$current$s = mutableRef.current.selectedItem) === null || _mutableRef$current$s === void 0 || _mutableRef$current$s.classList.toggle(customCss.noBefore, index === 0);\n    (_mutableRef$current$s2 = mutableRef.current.selectedItem) === null || _mutableRef$current$s2 === void 0 || _mutableRef$current$s2.classList.toggle(customCss.noAfter, index === mutableRef.current.hideIndex - 1);\n  }, [customCss.noBefore, customCss.noAfter]);\n  var startEditing = (0, _react.useCallback)(function (item) {\n    var _item$dataset;\n    if (item !== null && item !== void 0 && (_item$dataset = item.dataset) !== null && _item$dataset !== void 0 && _item$dataset.index && (!item.hasAttribute('disabled') || item.className.includes('hidden'))) {\n      var _mutableRef$current$f;\n      item.classList.add(_EditableWrapperModule[\"default\"].selected, customCss.selected);\n      mutableRef.current.selectedItem = item;\n      (_mutableRef$current$f = mutableRef.current.focusedItem) === null || _mutableRef$current$f === void 0 || _mutableRef$current$f.classList.remove(customCss.focused);\n      mutableRef.current.focusedItem = null;\n      mutableRef.current.selectedItemLabel = (item.ariaLabel || item.textContent) + ' ';\n      mutableRef.current.fromIndex = Number(item.style.order) - 1;\n      mutableRef.current.prevToIndex = mutableRef.current.fromIndex;\n      updateArrowIcon(mutableRef.current.fromIndex);\n      if (!mutableRef.current.initialSelected) {\n        setTimeout(function () {\n          announceRef.current.announce(mutableRef.current.selectedItemLabel + (0, _$L[\"default\"])('Press the left/right button to move or press the up button to select other options.'));\n        }, completeAnnounceDelay);\n      }\n    }\n  }, [customCss.focused, customCss.selected, updateArrowIcon]);\n  var finalizeEditing = (0, _react.useCallback)(function (orders) {\n    if (mutableRef.current.initialSelected) {\n      mutableRef.current.selectedItem.children[1].ariaLabel = \"\".concat(mutableRef.current.selectedItem.ariaLabel, \" \").concat((0, _$L[\"default\"])('Press the OK button to move or press the up button to select other options.'));\n    }\n    (0, _handle.forwardCustom)('onComplete', function () {\n      return {\n        orders: orders,\n        hideIndex: mutableRef.current.hideIndex\n      };\n    })(null, editable);\n    reset();\n  }, [editable, reset]);\n  var findItemNode = (0, _react.useCallback)(function (node) {\n    for (var current = node; current !== scrollContentRef.current && current !== document; current = current.parentNode) {\n      if (current.dataset.index) {\n        return current;\n      }\n    }\n    return null;\n  }, [scrollContentRef]);\n  var focusItem = (0, _react.useCallback)(function (target) {\n    var itemNode = findItemNode(target);\n    if (itemNode && !mutableRef.current.selectedItem) {\n      var _mutableRef$current$f2, _mutableRef$current$f3;\n      (_mutableRef$current$f2 = mutableRef.current.focusedItem) === null || _mutableRef$current$f2 === void 0 || _mutableRef$current$f2.classList.remove(customCss.focused);\n      mutableRef.current.focusedItem = itemNode;\n      (_mutableRef$current$f3 = mutableRef.current.focusedItem) === null || _mutableRef$current$f3 === void 0 || _mutableRef$current$f3.classList.add(customCss.focused);\n      mutableRef.current.prevToIndex = Number(itemNode.style.order) - 1;\n    }\n  }, [customCss.focused, findItemNode]);\n  var blurItem = (0, _react.useCallback)(function (target) {\n    var itemNode = findItemNode(target);\n    if (itemNode && !mutableRef.current.selectedItem) {\n      var _mutableRef$current$f4;\n      (_mutableRef$current$f4 = mutableRef.current.focusedItem) === null || _mutableRef$current$f4 === void 0 || _mutableRef$current$f4.classList.remove(customCss.focused);\n      mutableRef.current.focusedItem = null;\n      mutableRef.current.prevToIndex = null;\n    }\n  }, [customCss.focused, findItemNode]);\n  var handleClickCapture = (0, _react.useCallback)(function (ev) {\n    if (ev.target.className.includes('Button')) {\n      return;\n    }\n    // Consume the event to prevent Item behavior\n    if (mutableRef.current.selectedItem || mutableRef.current.needToPreventEvent) {\n      ev.preventDefault();\n      ev.stopPropagation();\n      mutableRef.current.needToPreventEvent = false;\n    }\n  }, []);\n  var handleMouseDown = (0, _react.useCallback)(function (ev) {\n    if (ev.target.className.includes('Button')) {\n      return;\n    }\n    if (mutableRef.current.selectedItem) {\n      // Finalize orders and forward `onComplete` event\n      var orders = finalizeOrders();\n      finalizeEditing(orders);\n      if (selectItemBy === 'press') {\n        focusItem(ev.target);\n      }\n      mutableRef.current.needToPreventEvent = true;\n    } else {\n      var targetItemNode = findItemNode(ev.target);\n      if (selectItemBy === 'press') {\n        if (targetItemNode && targetItemNode.dataset.index) {\n          // Start editing by adding selected transition to selected item\n          mutableRef.current.targetItemNode = targetItemNode;\n          startEditing(targetItemNode);\n        }\n        mutableRef.current.needToPreventEvent = true;\n      } else {\n        mutableRef.current.targetItemNode = targetItemNode;\n        mutableRef.current.needToPreventEvent = false;\n      }\n    }\n  }, [finalizeEditing, finalizeOrders, findItemNode, focusItem, selectItemBy, startEditing]);\n  var handleHoldStart = (0, _react.useCallback)(function () {\n    var targetItemNode = mutableRef.current.targetItemNode;\n    if (targetItemNode && targetItemNode.dataset.index && selectItemBy === 'longPress') {\n      // Start editing by adding selected transition to selected item\n      startEditing(targetItemNode);\n    }\n  }, [selectItemBy, startEditing]);\n  var readOutCurrentPosition = (0, _react.useCallback)(function (neighborItem) {\n    var _mutableRef$current3 = mutableRef.current,\n      lastInputDirection = _mutableRef$current3.lastInputDirection,\n      lastInputType = _mutableRef$current3.lastInputType,\n      selectedItemLabel = _mutableRef$current3.selectedItemLabel;\n    if (lastInputType === 'key') {\n      if (lastInputDirection === 'left') {\n        announceRef.current.announce(new _IString[\"default\"]((0, _$L[\"default\"])('{selectedItem} moved to the left of {neighborItem}')).format({\n          selectedItem: selectedItemLabel,\n          neighborItem: neighborItem\n        }), true);\n      } else {\n        announceRef.current.announce(new _IString[\"default\"]((0, _$L[\"default\"])('{selectedItem} moved to the right of {neighborItem}')).format({\n          selectedItem: selectedItemLabel,\n          neighborItem: neighborItem\n        }), true);\n      }\n    }\n  }, []);\n\n  // Add rearranged items\n  var addRearrangedItems = (0, _react.useCallback)(function (_ref) {\n    var currentMoveDirection = _ref.currentMoveDirection,\n      toIndex = _ref.toIndex;\n    // Set the currentMoveDirection to css variable\n    var rtl = scrollContainerHandle.current.rtl;\n    wrapperRef.current.style.setProperty('--move-direction', currentMoveDirection * (rtl ? -1 : 1));\n    var _mutableRef$current4 = mutableRef.current,\n      fromIndex = _mutableRef$current4.fromIndex,\n      rearrangedItems = _mutableRef$current4.rearrangedItems,\n      selectedItem = _mutableRef$current4.selectedItem;\n    var getNextElement = function getNextElement(item) {\n      return currentMoveDirection > 0 ? item.nextElementSibling : item.previousElementSibling;\n    };\n    var sibling = getNextElement(selectedItem);\n    var lastRearrangedItem;\n    var start = currentMoveDirection > 0 ? toIndex : fromIndex;\n    var end = currentMoveDirection > 0 ? fromIndex : toIndex;\n    while (start > end && sibling) {\n      var _sibling;\n      (_sibling = sibling) === null || _sibling === void 0 || _sibling.classList.add(_EditableWrapperModule[\"default\"].rearranged, _EditableWrapperModule[\"default\"].rearrangedTransform);\n      if (!rearrangedItems.includes(sibling)) {\n        rearrangedItems.push(sibling);\n      }\n      lastRearrangedItem = sibling;\n      sibling = getNextElement(sibling);\n      start--;\n    }\n    if (lastRearrangedItem) {\n      readOutCurrentPosition(lastRearrangedItem.ariaLabel || lastRearrangedItem.textContent);\n    }\n    mutableRef.current.moveDirection = currentMoveDirection;\n  }, [readOutCurrentPosition, scrollContainerHandle]);\n  var removeRearrangedItems = (0, _react.useCallback)(function (numToRemove) {\n    var rearrangedItems = mutableRef.current.rearrangedItems;\n    var toItem = null;\n    if (rearrangedItems.length > 0) {\n      for (var i = 0; i < numToRemove; i++) {\n        var _toItem;\n        toItem = rearrangedItems.pop();\n        (_toItem = toItem) === null || _toItem === void 0 || _toItem.classList.remove(_EditableWrapperModule[\"default\"].rearrangedTransform);\n      }\n    }\n    if (toItem) {\n      readOutCurrentPosition(toItem.ariaLabel || toItem.textContent);\n    }\n  }, [readOutCurrentPosition]);\n\n  // Move items\n  var moveItems = (0, _react.useCallback)(function (toIndex) {\n    var selectedItem = mutableRef.current.selectedItem;\n    var rtl = scrollContainerHandle.current.rtl;\n    if (selectedItem) {\n      // Bail out when index is out of scope\n      if (toIndex < mutableRef.current.hideIndex && toIndex >= 0) {\n        var _mutableRef$current5 = mutableRef.current,\n          fromIndex = _mutableRef$current5.fromIndex,\n          itemWidth = _mutableRef$current5.itemWidth,\n          moveDirection = _mutableRef$current5.moveDirection,\n          prevToIndex = _mutableRef$current5.prevToIndex,\n          rearrangedItems = _mutableRef$current5.rearrangedItems;\n\n        // Set the selected item's offset to css variable\n        var offset = (toIndex - fromIndex) * itemWidth;\n        wrapperRef.current.style.setProperty('--selected-item-offset', offset * (rtl ? -1 : 1) + 'px');\n\n        // If the current toIndex is new,\n        if (toIndex !== prevToIndex) {\n          // Determine the direction of move from the latest from index\n          var currentMoveDirection = Math.sign(toIndex - prevToIndex);\n          // If the direction is changed and there are rearranged items, we remove them first.\n          if (moveDirection && currentMoveDirection !== moveDirection && rearrangedItems.length > 0) {\n            var numToRemove = currentMoveDirection > 0 ? toIndex - prevToIndex : prevToIndex - toIndex;\n            var needToAddItems = numToRemove > rearrangedItems.length;\n            removeRearrangedItems(numToRemove);\n\n            // When there's jump, meaning, numToRemove is bigger than 0, we need to add an item\n            if (needToAddItems) {\n              addRearrangedItems({\n                currentMoveDirection: currentMoveDirection,\n                toIndex: toIndex\n              });\n            }\n          } else {\n            addRearrangedItems({\n              currentMoveDirection: currentMoveDirection,\n              toIndex: toIndex\n            });\n          }\n          mutableRef.current.prevToIndex = toIndex;\n        }\n        updateArrowIcon(toIndex);\n      }\n    }\n  }, [addRearrangedItems, removeRearrangedItems, scrollContainerHandle, updateArrowIcon]);\n  var moveItemsByKeyDown = (0, _react.useCallback)(function (ev) {\n    var keyCode = ev.keyCode;\n    var container = scrollContentRef.current;\n    var _mutableRef$current6 = mutableRef.current,\n      itemWidth = _mutableRef$current6.itemWidth,\n      prevToIndex = _mutableRef$current6.prevToIndex;\n    var rtl = scrollContainerHandle.current.rtl;\n    var toIndex = !rtl ^ !(0, _keymap.is)('left', keyCode) ? prevToIndex - 1 : prevToIndex + 1;\n    var scrollLeft = container.scrollLeft * (rtl ? -1 : 1);\n    var itemLeft = toIndex * itemWidth - scrollLeft;\n    var left;\n    if (itemLeft > container.offsetLeft + container.clientWidth - itemWidth) {\n      left = itemLeft - (container.clientWidth - itemWidth) + scrollLeft;\n    } else if (itemLeft < 0) {\n      left = scrollLeft + itemLeft;\n    }\n    if (left != null) {\n      /* avoid null or undefined */\n      scrollContainerHandle.current.start({\n        targetX: left,\n        targetY: 0\n      });\n    }\n    mutableRef.current.lastInputType = 'key';\n    mutableRef.current.lastInputDirection = (0, _keymap.is)('left', keyCode) ? 'left' : 'right';\n    moveItems(toIndex);\n    if (toIndex <= 0) {\n      announceRef.current.announce((0, _keymap.is)('left', keyCode) && !rtl && (0, _$L[\"default\"])('LEFTMOST') || (0, _keymap.is)('right', keyCode) && rtl && (0, _$L[\"default\"])('RIGHTMOST'));\n    } else if (toIndex >= dataSize - 1) {\n      announceRef.current.announce((0, _keymap.is)('right', keyCode) && !rtl && (0, _$L[\"default\"])('RIGHTMOST') || (0, _keymap.is)('left', keyCode) && rtl && (0, _$L[\"default\"])('LEFTMOST'));\n    }\n  }, [dataSize, moveItems, scrollContainerHandle, scrollContentRef]);\n\n  // Remove an item\n  var removeItem = (0, _react.useCallback)(function () {\n    var _mutableRef$current7 = mutableRef.current,\n      focusedItem = _mutableRef$current7.focusedItem,\n      prevToIndex = _mutableRef$current7.prevToIndex,\n      selectedItem = _mutableRef$current7.selectedItem;\n    var targetItem = selectedItem || focusedItem;\n    if (targetItem) {\n      // rearrangedItems need for the case when removing item while moving selected item\n      var rearrangedItems = mutableRef.current.rearrangedItems;\n      var targetItemRect = targetItem && targetItem.getBoundingClientRect();\n      mutableRef.current.nextSpotlightRect = {\n        x: targetItemRect.right,\n        y: targetItemRect.top\n      };\n      mutableRef.current.hideIndex -= 1;\n      var orders = finalizeOrders();\n      orders.splice(prevToIndex, 1);\n      rearrangedItems.forEach(function (item) {\n        item.style.order -= 1;\n      });\n      finalizeEditing(orders);\n    }\n  }, [finalizeEditing, finalizeOrders]);\n  var hideItem = (0, _react.useCallback)(function () {\n    var _mutableRef$current8 = mutableRef.current,\n      focusedItem = _mutableRef$current8.focusedItem,\n      selectedItem = _mutableRef$current8.selectedItem;\n    var targetItem = selectedItem || focusedItem;\n    if (targetItem) {\n      // rearrangedItems need for the case when hiding item while moving selected item\n      var rearrangedItems = mutableRef.current.rearrangedItems;\n      var targetItemOrder = Number(targetItem.style.order);\n      var targetItemRect = targetItem && targetItem.getBoundingClientRect();\n      mutableRef.current.nextSpotlightRect = {\n        x: targetItemRect.right,\n        y: targetItemRect.top\n      };\n      mutableRef.current.hideIndex -= 1;\n      var orders = finalizeOrders();\n      orders.splice(orders.indexOf(targetItemOrder), 1);\n      orders.push(targetItemOrder);\n      rearrangedItems.forEach(function (item) {\n        item.style.order -= 1;\n      });\n      targetItem.style.order = orders.length;\n      finalizeEditing(orders);\n    }\n  }, [finalizeEditing, finalizeOrders]);\n  var showItem = (0, _react.useCallback)(function () {\n    var _mutableRef$current9 = mutableRef.current,\n      focusedItem = _mutableRef$current9.focusedItem,\n      selectedItem = _mutableRef$current9.selectedItem;\n    var targetItem = selectedItem || focusedItem;\n    if (targetItem) {\n      var targetItemOrder = Number(targetItem.style.order);\n      var targetItemRect = targetItem && targetItem.getBoundingClientRect();\n      mutableRef.current.nextSpotlightRect = {\n        x: targetItemRect.right,\n        y: targetItemRect.top\n      };\n      var orders = Array.from({\n        length: dataSize\n      }, function (_, i) {\n        return i + 1;\n      });\n      orders.splice(targetItemOrder - 1, 1);\n      orders.splice(mutableRef.current.hideIndex, 0, targetItemOrder);\n      mutableRef.current.hideIndex += 1;\n      finalizeEditing(orders);\n    }\n  }, [dataSize, finalizeEditing]);\n  var getNextIndexFromPosition = (0, _react.useCallback)(function (x, tolerance) {\n    var _mutableRef$current10 = mutableRef.current,\n      centeredOffset = _mutableRef$current10.centeredOffset,\n      itemWidth = _mutableRef$current10.itemWidth,\n      prevToIndex = _mutableRef$current10.prevToIndex;\n    var rtl = scrollContainerHandle.current.rtl;\n    var bodyWidth = document.body.getBoundingClientRect().width;\n\n    // Determine toIndex with mouse client x position\n    // Coordinate calculation in RTL locales is not supported in chrome below 85\n    var scrollContentOffset = scrollContentRef.current.scrollLeft * (rtl ? -1 : 1) - centeredOffset;\n    var clientXFromContent = (rtl ? bodyWidth - x : x) + scrollContentOffset;\n    var direction = itemWidth * (prevToIndex + 0.5) < clientXFromContent ? 1 : -1; // 1: To next index , -1: To prev index\n    var moveTolerance = itemWidth * tolerance * direction;\n    return Math.floor((clientXFromContent - moveTolerance) / itemWidth);\n  }, [scrollContainerHandle, scrollContentRef]);\n  var handleMouseMove = (0, _react.useCallback)(function (ev) {\n    var clientX = ev.clientX;\n    mutableRef.current.lastMouseClientX = clientX;\n    if (mutableRef.current.selectedItem && Number(mutableRef.current.selectedItem.style.order) - 1 < mutableRef.current.hideIndex) {\n      var toIndex = getNextIndexFromPosition(clientX, 0.33);\n      mutableRef.current.lastInputType = 'mouse';\n      moveItems(toIndex);\n    }\n  }, [getNextIndexFromPosition, moveItems]);\n  var handleMouseLeave = (0, _react.useCallback)(function () {\n    var _mutableRef$current11 = mutableRef.current,\n      focusedItem = _mutableRef$current11.focusedItem,\n      itemWidth = _mutableRef$current11.itemWidth,\n      lastInputType = _mutableRef$current11.lastInputType,\n      lastMouseClientX = _mutableRef$current11.lastMouseClientX,\n      selectedItem = _mutableRef$current11.selectedItem;\n    var rtl = scrollContainerHandle.current.rtl;\n    var scrollContentNode = scrollContentRef.current;\n    var scrollContentCenter = scrollContentNode.getBoundingClientRect().width / 2;\n    if (selectedItem || focusedItem) {\n      var orders = finalizeOrders();\n      finalizeEditing(orders);\n      if (lastInputType === 'scroll') {\n        var offset = itemWidth * (!rtl ^ !(lastMouseClientX > scrollContentCenter) ? 1 : -1);\n        scrollContainerHandle.current.start({\n          targetX: scrollContentNode.scrollLeft + offset,\n          targetY: 0\n        });\n      }\n    }\n  }, [finalizeEditing, finalizeOrders, scrollContainerHandle, scrollContentRef]);\n  var completeEditingByKeyDown = (0, _react.useCallback)(function () {\n    var _mutableRef$current12 = mutableRef.current,\n      selectedItem = _mutableRef$current12.selectedItem,\n      selectedItemLabel = _mutableRef$current12.selectedItemLabel;\n    var focusTarget = selectedItem.children[1];\n    var orders = finalizeOrders();\n    selectedItem.children[1].ariaLabel = '';\n    finalizeEditing(orders);\n    if (selectItemBy === 'press') {\n      if ((0, _pointer.getPointerMode)()) {\n        _spotlight[\"default\"].setPointerMode(false);\n        _spotlight[\"default\"].focus(focusTarget);\n      }\n      focusItem(focusTarget);\n    }\n    setTimeout(function () {\n      announceRef.current.announce(selectedItemLabel + (0, _$L[\"default\"])('Movement completed'), true);\n      setTimeout(function () {\n        selectedItem.children[1].ariaLabel = \"\".concat(selectedItem.ariaLabel, \" \").concat((0, _$L[\"default\"])('Press the OK button to move or press the up button to select other options.'));\n      }, completeAnnounceDelay);\n    }, completeAnnounceDelay);\n  }, [finalizeEditing, finalizeOrders, focusItem, selectItemBy]);\n  var handleKeyDownCapture = (0, _react.useCallback)(function (ev) {\n    var keyCode = ev.keyCode,\n      repeat = ev.repeat,\n      target = ev.target;\n    var _mutableRef$current13 = mutableRef.current,\n      focusedItem = _mutableRef$current13.focusedItem,\n      selectedItem = _mutableRef$current13.selectedItem;\n    var targetItemNode = findItemNode(target);\n    if ((0, _keymap.is)('enter', keyCode) && target.getAttribute('role') !== 'button') {\n      if (!repeat) {\n        if (selectedItem) {\n          completeEditingByKeyDown();\n          mutableRef.current.needToPreventEvent = true;\n        } else if (selectItemBy === 'press') {\n          startEditing(targetItemNode);\n          mutableRef.current.needToPreventEvent = true;\n        }\n      } else if (repeat && targetItemNode && !mutableRef.current.timer && selectItemBy === 'longPress') {\n        mutableRef.current.timer = setTimeout(function () {\n          startEditing(targetItemNode);\n        }, holdDuration - 300);\n      }\n    } else if ((0, _keymap.is)('down', keyCode) && target.getAttribute('role') !== 'button' && !repeat && selectedItem) {\n      completeEditingByKeyDown();\n      mutableRef.current.needToPreventEvent = true;\n    } else if ((0, _keymap.is)('left', keyCode) || (0, _keymap.is)('right', keyCode)) {\n      if (selectedItem) {\n        if (target.getAttribute('role') !== 'button') {\n          if (Number(selectedItem.style.order) - 1 < mutableRef.current.hideIndex) {\n            if (repeat) {\n              SpotlightAccelerator.processKey(ev, moveItemsByKeyDown);\n            } else {\n              SpotlightAccelerator.reset();\n              moveItemsByKeyDown(ev);\n            }\n          }\n          ev.preventDefault();\n          ev.stopPropagation();\n        }\n      } else {\n        var nextTarget = (0, _target.getTargetByDirectionFromElement)((0, _spotlight.getDirection)(keyCode), target);\n\n        // Check if focus leaves scroll container.\n        if (nextTarget && !(0, _container.getContainersForNode)(nextTarget).includes(mutableRef.current.spotlightId) && !repeat) {\n          reset();\n        }\n      }\n    } else if ((0, _keymap.is)('up', keyCode) || (0, _keymap.is)('down', keyCode)) {\n      if (selectedItem || focusedItem) {\n        var _nextTarget = (0, _target.getTargetByDirectionFromElement)((0, _spotlight.getDirection)(keyCode), target);\n\n        // Check if focus leaves scroll container.\n        if (_nextTarget && !(0, _container.getContainersForNode)(_nextTarget).includes(mutableRef.current.spotlightId)) {\n          (0, _pointer.setPointerMode)(false);\n          _spotlight[\"default\"].move((0, _spotlight.getDirection)(keyCode));\n          var orders = finalizeOrders();\n          finalizeEditing(orders);\n          ev.preventDefault();\n          ev.stopPropagation();\n        }\n      }\n    }\n  }, [finalizeEditing, finalizeOrders, findItemNode, moveItemsByKeyDown, reset, selectItemBy, startEditing, completeEditingByKeyDown]);\n  var handleKeyUpCapture = (0, _react.useCallback)(function (ev) {\n    var keyCode = ev.keyCode,\n      target = ev.target;\n    var selectedItem = mutableRef.current.selectedItem;\n    if ((0, _keymap.is)('cancel', keyCode)) {\n      if (selectedItem) {\n        completeEditingByKeyDown();\n        ev.stopPropagation(); // To prevent onCancel by CancelDecorator\n      }\n    } else if (target.getAttribute('role') === 'button') {\n      return;\n    }\n    clearTimeout(mutableRef.current.timer);\n    mutableRef.current.timer = null;\n    if (mutableRef.current.needToPreventEvent || mutableRef.current.selectedItem) {\n      ev.preventDefault();\n      mutableRef.current.needToPreventEvent = false;\n    }\n  }, [completeEditingByKeyDown]);\n  var handleGlobalKeyDownCapture = (0, _react.useCallback)(function (ev) {\n    var _mutableRef$current14 = mutableRef.current,\n      focusedItem = _mutableRef$current14.focusedItem,\n      selectedItem = _mutableRef$current14.selectedItem;\n\n    // If the pointer mode is `true` and the focused component is not contained in scrollContainerRef,\n    // only `handleGlobalKeyDownCapture` is called instead of `handleKeyDownCapture`\n    // Below is mainly for handling key pressed while pointer mode is `true`.\n    if ((0, _pointer.getPointerMode)() && !scrollContainerRef.current.contains(_spotlight[\"default\"].getCurrent()) && (selectedItem || focusedItem)) {\n      var keyCode = ev.keyCode;\n      var position = (0, _pointer.getLastPointerPosition)();\n      var direction = (0, _spotlight.getDirection)(keyCode);\n      if (direction) {\n        var nextTarget = (0, _target.getTargetByDirectionFromPosition)(direction, position, mutableRef.current.spotlightId);\n        if (!scrollContainerRef.current.contains(nextTarget)) {\n          // If the nextTarget is not contained in scrollContainerRef, complete editing\n          var orders = finalizeOrders();\n          finalizeEditing(orders);\n        } else if (((0, _keymap.is)('left', keyCode) || (0, _keymap.is)('right', keyCode)) && selectedItem) {\n          // When an item is selected and press the `left` or `right` key, move the selectedItem in that direction\n          moveItemsByKeyDown(ev);\n          ev.preventDefault();\n          ev.stopPropagation();\n        } else if ((0, _keymap.is)('down', keyCode) && selectedItem) {\n          // When an item is selected and press the `down` key, complete editing and focus the selectedItem\n          completeEditingByKeyDown();\n        } else if ((0, _keymap.is)('up', keyCode) && nextTarget.getAttribute('role') !== 'button') {\n          // When the nextTarget is the item and press the `up` key, focus the nextTarget to move focus successfully to the button above the item\n          (0, _pointer.setPointerMode)(false);\n          _spotlight[\"default\"].focus(nextTarget);\n        }\n      } else if ((0, _keymap.is)('enter', keyCode)) {\n        if (selectedItem) {\n          // When an item is selected and press the `enter` key, complete editing and focus the selectedItem\n          completeEditingByKeyDown();\n        } else {\n          // When an item is focused and press the `enter` key, start editing\n          startEditing(focusedItem);\n        }\n      }\n    }\n  }, [completeEditingByKeyDown, finalizeEditing, finalizeOrders, moveItemsByKeyDown, scrollContainerRef, startEditing]);\n  var handleTouchMove = (0, _react.useCallback)(function (ev) {\n    if (mutableRef.current.selectedItem) {\n      // Prevent scrolling by dragging when item is selected\n      ev.preventDefault();\n    }\n    if (mutableRef.current.isDraggingItem && !ev.target.className.includes('Button')) {\n      var clientX = ev.targetTouches[0].clientX;\n      mutableRef.current.lastMouseClientX = clientX;\n      var toIndex = getNextIndexFromPosition(clientX, 0.33);\n      if (toIndex !== mutableRef.current.prevToIndex) {\n        scrollContainerHandle.current.start({\n          targetX: clientX,\n          targetY: 0\n        });\n        mutableRef.current.lastInputType = 'touch';\n        moveItems(toIndex);\n      }\n    }\n  }, [getNextIndexFromPosition, moveItems, scrollContainerHandle]);\n  var handleTouchEnd = (0, _react.useCallback)(function (ev) {\n    var selectedItem = mutableRef.current.selectedItem;\n    var clientX = ev.changedTouches[0].clientX;\n    var targetItemIndex = getNextIndexFromPosition(clientX, 0);\n    if (ev.target.className.includes('Button') && Number(selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.style.order) - 1 === targetItemIndex) {\n      return;\n    }\n    if (selectedItem) {\n      // Cancel mouse event to deselect a selected item when it is tapped\n      ev.preventDefault();\n\n      // Finalize orders and forward `onComplete` event\n      var orders = finalizeOrders();\n      finalizeEditing(orders);\n    } else if (!mutableRef.current.isDragging) {\n      // Cancel mouse event to select a item when it is tapped\n      ev.preventDefault();\n      var targetItemNode = findItemNode(ev.target);\n      if (selectItemBy === 'press') {\n        if (targetItemNode && targetItemNode.dataset.index) {\n          mutableRef.current.targetItemNode = targetItemNode;\n          startEditing(targetItemNode);\n        }\n      }\n    }\n    mutableRef.current.isDraggingItem = false;\n    mutableRef.current.isDragging = false;\n  }, [getNextIndexFromPosition, finalizeEditing, finalizeOrders, findItemNode, selectItemBy, startEditing]);\n  var handleDragStart = (0, _react.useCallback)(function (ev) {\n    var selectedItem = mutableRef.current.selectedItem;\n    // Index of dragged item\n    var dragTagetItemIndex = getNextIndexFromPosition(ev.x, 0);\n    mutableRef.current.isDragging = true;\n    if (selectedItem && Number(selectedItem.style.order) - 1 === dragTagetItemIndex) {\n      mutableRef.current.isDraggingItem = true;\n    }\n  }, [getNextIndexFromPosition]);\n  (0, _react.useLayoutEffect)(function () {\n    var available = typeof document === 'object';\n    if (available) {\n      document.addEventListener('keydown', handleGlobalKeyDownCapture, {\n        capture: true\n      });\n    }\n    return function () {\n      if (available) {\n        document.removeEventListener('keydown', handleGlobalKeyDownCapture, {\n          capture: true\n        });\n      }\n    };\n  }, [handleGlobalKeyDownCapture]);\n  (0, _react.useEffect)(function () {\n    if (mutableRef.current.nextSpotlightRect !== null) {\n      _spotlight[\"default\"].focusNextFromPoint('down', mutableRef.current.nextSpotlightRect);\n      mutableRef.current.nextSpotlightRect = null;\n    }\n  });\n  (0, _react.useEffect)(function () {\n    var _wrapperRef$current;\n    // Calculate the item width once\n    var rtl = scrollContainerHandle.current.rtl;\n    var container = scrollContentRef.current;\n    var item = (_wrapperRef$current = wrapperRef.current) === null || _wrapperRef$current === void 0 ? void 0 : _wrapperRef$current.children[0];\n    if (item && typeof window !== 'undefined') {\n      var _wrapperRef$current2;\n      var bodyWidth = document.body.getBoundingClientRect().width;\n      var neighbor = item.nextElementSibling || item.previousElementSibling;\n      mutableRef.current.itemWidth = Math.abs(item.offsetLeft - (neighbor === null || neighbor === void 0 ? void 0 : neighbor.offsetLeft));\n      mutableRef.current.centeredOffset = rtl ? bodyWidth - (item.getBoundingClientRect().right + container.scrollLeft) : item.getBoundingClientRect().left + container.scrollLeft;\n      (_wrapperRef$current2 = wrapperRef.current) === null || _wrapperRef$current2 === void 0 || _wrapperRef$current2.style.setProperty('--item-width', mutableRef.current.itemWidth + 'px');\n    }\n  }, [centered, dataSize, scrollContainerHandle, scrollContentRef]);\n  (0, _react.useEffect)(function () {\n    mutableRef.current.spotlightId = scrollContainerRef.current && scrollContainerRef.current.dataset.spotlightId;\n  }, [scrollContainerRef]);\n  (0, _react.useEffect)(function () {\n    var scrollContainer = scrollContainerRef.current;\n    if (scrollContainer) {\n      scrollContainer.addEventListener('mouseleave', handleMouseLeave);\n      scrollContainer.addEventListener('touchmove', handleTouchMove);\n    }\n    return function () {\n      if (scrollContainer) {\n        scrollContainer.removeEventListener('mouseleave', handleMouseLeave);\n        scrollContainer.removeEventListener('touchmove', handleTouchMove);\n      }\n    };\n  }, [handleMouseLeave, handleTouchMove, scrollContainerRef]);\n  (0, _react.useLayoutEffect)(function () {\n    if (removeItemFuncRef) {\n      removeItemFuncRef.current = removeItem;\n    }\n  }, [removeItem, removeItemFuncRef]);\n  (0, _react.useLayoutEffect)(function () {\n    if (hideItemFuncRef) {\n      hideItemFuncRef.current = hideItem;\n    }\n  }, [hideItem, hideItemFuncRef]);\n  (0, _react.useLayoutEffect)(function () {\n    if (showItemFuncRef) {\n      showItemFuncRef.current = showItem;\n    }\n  }, [showItem, showItemFuncRef]);\n  (0, _react.useLayoutEffect)(function () {\n    if (focusItemFuncRef) {\n      focusItemFuncRef.current = focusItem;\n    }\n  }, [focusItem, focusItemFuncRef]);\n  (0, _react.useLayoutEffect)(function () {\n    if (blurItemFuncRef) {\n      blurItemFuncRef.current = blurItem;\n    }\n  }, [blurItem, blurItemFuncRef]);\n  (0, _react.useEffect)(function () {\n    // addEventListener to moveItems while scrolled\n    var scrollContentNode = scrollContentRef.current;\n    var handleMoveItemsByScroll = function handleMoveItemsByScroll() {\n      var bodyWidth = document.body.getBoundingClientRect().width;\n      var _mutableRef$current15 = mutableRef.current,\n        lastMouseClientX = _mutableRef$current15.lastMouseClientX,\n        selectedItem = _mutableRef$current15.selectedItem;\n      var _scrollContainerHandl = scrollContainerHandle.current,\n        isHoveringToScroll = _scrollContainerHandl.isHoveringToScroll,\n        rtl = _scrollContainerHandl.rtl;\n      if (selectedItem && mutableRef.current.lastInputType !== 'key' && Number(selectedItem.style.order) - 1 < mutableRef.current.hideIndex) {\n        mutableRef.current.lastInputType = 'scroll';\n        if (isHoveringToScroll) {\n          var toIndex = getNextIndexFromPosition(lastMouseClientX, 0);\n          moveItems(!rtl ^ !(lastMouseClientX > bodyWidth / 2) ? toIndex + 1 : toIndex - 1);\n        } else {\n          moveItems(getNextIndexFromPosition(lastMouseClientX, 0.33));\n        }\n      }\n    };\n    setTimeout(function () {\n      scrollContentNode.addEventListener('scroll', handleMoveItemsByScroll);\n    }, 400); // Wait for finishing scroll animation when initial selected item is given.\n\n    return function () {\n      scrollContentNode.removeEventListener('scroll', handleMoveItemsByScroll);\n    };\n  }, [getNextIndexFromPosition, moveItems, scrollContainerHandle, scrollContentRef]);\n  (0, _react.useEffect)(function () {\n    if (mutableRef.current.initialSelected) {\n      var _scrollContainerHandl2;\n      (_scrollContainerHandl2 = scrollContainerHandle.current) === null || _scrollContainerHandl2 === void 0 || _scrollContainerHandl2.scrollTo({\n        animate: false,\n        position: {\n          x: mutableRef.current.initialSelected.scrollLeft\n        }\n      });\n    }\n  }, [scrollContainerHandle]);\n  (0, _react.useLayoutEffect)(function () {\n    var _initialSelected, _initialSelected2;\n    var iconItemList = Array.from(wrapperRef.current.children);\n    var initialSelected = mutableRef.current.initialSelected;\n    if (initialSelected && !(((_initialSelected = initialSelected) === null || _initialSelected === void 0 ? void 0 : _initialSelected.itemIndex) > 0)) {\n      // filter nullish values\n      initialSelected = mutableRef.current.initialSelected = null;\n    }\n    if ((_initialSelected2 = initialSelected) !== null && _initialSelected2 !== void 0 && _initialSelected2.itemIndex) {\n      var _initialSelected3;\n      var initialSelectedItem = wrapperRef.current.children[((_initialSelected3 = initialSelected) === null || _initialSelected3 === void 0 ? void 0 : _initialSelected3.itemIndex) - 1];\n      if (initialSelectedItem !== null && initialSelectedItem !== void 0 && initialSelectedItem.dataset.index) {\n        mutableRef.current.focusedItem = initialSelectedItem;\n        mutableRef.current.lastMouseClientX = (0, _pointer.getLastPointerPosition)().x;\n        startEditing(initialSelectedItem);\n        (0, _pointer.setPointerMode)(false);\n        _spotlight[\"default\"].focus(initialSelectedItem.children[1]);\n      }\n    }\n    iconItemList.forEach(function (iconItemWrapper, index) {\n      if (iconItemWrapper !== null && iconItemWrapper !== void 0 && iconItemWrapper.children[1]) {\n        if (initialSelected && initialSelected.itemIndex - 1 === index) {\n          iconItemWrapper.children[1].ariaLabel += \" \".concat((0, _$L[\"default\"])('Press the left/right button to move or press the up button to select other options.'));\n        } else {\n          iconItemWrapper.children[1].ariaLabel += \" \".concat((0, _$L[\"default\"])('Press the OK button to move or press the up button to select other options.'));\n        }\n      }\n    });\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return /*#__PURE__*/(0, _jsxRuntime.jsxs)(TouchableDiv, {\n    holdConfig: holdConfig,\n    className: (0, _classnames[\"default\"])(mergedCss.wrapper, _defineProperty({}, mergedCss.centered, centered)),\n    onClickCapture: handleClickCapture,\n    onHoldStart: handleHoldStart,\n    onKeyDownCapture: handleKeyDownCapture,\n    onKeyUpCapture: handleKeyUpCapture,\n    onMouseDown: handleMouseDown,\n    onMouseMove: handleMouseMove,\n    onDragStart: handleDragStart,\n    onTouchEnd: handleTouchEnd,\n    ref: wrapperRef,\n    children: [children, /*#__PURE__*/(0, _jsxRuntime.jsx)(_AnnounceDecorator.Announce, {\n      ref: announceRef\n    }, \"editable-wrapper-announce\")]\n  });\n};\nEditableWrapper.displayName = 'EditableWrapper';\nEditableWrapper.propTypes = /** @lends sandstone/Scroller.EditableWrapper.prototype */{\n  /**\n   * Enables editing items in the scroller.\n   * You can specify props for editable scroller as an object.\n   * See the datails in {@link sandstone/Scroller.EditableShape|EditableShape}\n   *\n   * @type {sandstone/Scroller.EditableShape}\n   * @public\n   */\n  editable: EditableShape,\n  /**\n   * Obtains a reference to the scroll container handle.\n   *\n   * @type {Function|Object}\n   * @public\n   */\n  scrollContainerHandle: _propTypes[\"default\"].ref,\n  /**\n   * Obtains a reference to the scroll container node.\n   *\n   * @type {Function|Object}\n   * @public\n   */\n  scrollContainerRef: _propTypes[\"default\"].ref,\n  /**\n   * Obtains a reference to the scroll content node.\n   *\n   * @type {Function|Object}\n   * @public\n   */\n  scrollContentRef: _propTypes[\"default\"].ref\n};\nvar _default = exports[\"default\"] = EditableWrapper;","map":{"version":3,"names":["Object","defineProperty","exports","value","EditableWrapper","EditableShape","_handle","require","_propTypes","_interopRequireDefault","_keymap","_usePublicClassNames","_spotlight","_interopRequireWildcard","_container","_target","_Accelerator","_pointer","_AnnounceDecorator","_Touchable","_classnames","_IString","_propTypes2","_react","_$L","_EditableWrapperModule","_jsxRuntime","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","has","get","n","__proto__","a","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","obj","_defineProperty","key","_toPropertyKey","enumerable","configurable","writable","_toPrimitive","String","Symbol","toPrimitive","TypeError","Number","completeAnnounceDelay","TouchableDiv","shape","onComplete","func","isRequired","blurItemFuncRef","ref","centered","bool","css","object","focusItemFuncRef","hideItemFuncRef","removeItemFuncRef","selectItemBy","string","showItemFuncRef","SpotlightAccelerator","holdDuration","holdConfig","events","name","time","props","_editable$hideIndex","children","editable","scrollContainerHandle","scrollContainerRef","scrollContentRef","customCss","mergedCss","usePublicClassNames","componentCss","publicClassNames","dataSize","length","wrapperRef","useRef","mutableRef","itemWidth","centeredOffset","spotlightId","focusedItem","selectedItem","selectedItemLabel","rearrangedItems","fromIndex","prevToIndex","hideIndex","nextSpotlightRect","moveDirection","lastMouseClientX","lastInputType","keyHoldTimerId","needToPreventEvent","lastInputDirection","isDraggingItem","isDragging","initialSelected","announceRef","current","reset","useCallback","_mutableRef$current","classList","remove","focused","selected","rearranged","style","setProperty","restrict","finalizeOrders","_mutableRef$current2","orders","Array","from","_","selectedOrder","order","changedOrder","forEach","item","rearrangedTransform","push","unshift","splice","apply","Math","min","concat","updateArrowIcon","index","_mutableRef$current$s","_mutableRef$current$s2","toggle","noBefore","noAfter","startEditing","_item$dataset","dataset","hasAttribute","className","includes","_mutableRef$current$f","add","ariaLabel","textContent","setTimeout","announce","finalizeEditing","forwardCustom","findItemNode","node","document","parentNode","focusItem","target","itemNode","_mutableRef$current$f2","_mutableRef$current$f3","blurItem","_mutableRef$current$f4","handleClickCapture","ev","preventDefault","stopPropagation","handleMouseDown","targetItemNode","handleHoldStart","readOutCurrentPosition","neighborItem","_mutableRef$current3","format","addRearrangedItems","_ref","currentMoveDirection","toIndex","rtl","_mutableRef$current4","getNextElement","nextElementSibling","previousElementSibling","sibling","lastRearrangedItem","start","end","_sibling","removeRearrangedItems","numToRemove","toItem","_toItem","pop","moveItems","_mutableRef$current5","offset","sign","needToAddItems","moveItemsByKeyDown","keyCode","container","_mutableRef$current6","is","scrollLeft","itemLeft","left","offsetLeft","clientWidth","targetX","targetY","removeItem","_mutableRef$current7","targetItem","targetItemRect","getBoundingClientRect","x","right","y","top","hideItem","_mutableRef$current8","targetItemOrder","indexOf","showItem","_mutableRef$current9","getNextIndexFromPosition","tolerance","_mutableRef$current10","bodyWidth","body","width","scrollContentOffset","clientXFromContent","direction","moveTolerance","floor","handleMouseMove","clientX","handleMouseLeave","_mutableRef$current11","scrollContentNode","scrollContentCenter","completeEditingByKeyDown","_mutableRef$current12","focusTarget","getPointerMode","setPointerMode","focus","handleKeyDownCapture","repeat","_mutableRef$current13","getAttribute","timer","processKey","nextTarget","getTargetByDirectionFromElement","getDirection","getContainersForNode","_nextTarget","move","handleKeyUpCapture","clearTimeout","handleGlobalKeyDownCapture","_mutableRef$current14","contains","getCurrent","position","getLastPointerPosition","getTargetByDirectionFromPosition","handleTouchMove","targetTouches","handleTouchEnd","changedTouches","targetItemIndex","handleDragStart","dragTagetItemIndex","useLayoutEffect","available","addEventListener","capture","removeEventListener","useEffect","focusNextFromPoint","_wrapperRef$current","window","_wrapperRef$current2","neighbor","abs","scrollContainer","handleMoveItemsByScroll","_mutableRef$current15","_scrollContainerHandl","isHoveringToScroll","_scrollContainerHandl2","scrollTo","animate","_initialSelected","_initialSelected2","iconItemList","itemIndex","_initialSelected3","initialSelectedItem","iconItemWrapper","jsxs","wrapper","onClickCapture","onHoldStart","onKeyDownCapture","onKeyUpCapture","onMouseDown","onMouseMove","onDragStart","onTouchEnd","jsx","Announce","displayName","propTypes","_default"],"sources":["/home/connected/enact-template/node_modules/@enact/sandstone/Scroller/EditableWrapper.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.EditableWrapper = exports.EditableShape = void 0;\nvar _handle = require(\"@enact/core/handle\");\nvar _propTypes = _interopRequireDefault(require(\"@enact/core/internal/prop-types\"));\nvar _keymap = require(\"@enact/core/keymap\");\nvar _usePublicClassNames = require(\"@enact/core/usePublicClassNames\");\nvar _spotlight = _interopRequireWildcard(require(\"@enact/spotlight\"));\nvar _container = require(\"@enact/spotlight/src/container\");\nvar _target = require(\"@enact/spotlight/src/target\");\nvar _Accelerator = _interopRequireDefault(require(\"@enact/spotlight/Accelerator\"));\nvar _pointer = require(\"@enact/spotlight/src/pointer\");\nvar _AnnounceDecorator = require(\"@enact/ui/AnnounceDecorator\");\nvar _Touchable = _interopRequireDefault(require(\"@enact/ui/Touchable\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _IString = _interopRequireDefault(require(\"ilib/lib/IString\"));\nvar _propTypes2 = _interopRequireDefault(require(\"prop-types\"));\nvar _react = require(\"react\");\nvar _$L = _interopRequireDefault(require(\"../internal/$L\"));\nvar _EditableWrapperModule = _interopRequireDefault(require(\"./EditableWrapper.module.css\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar completeAnnounceDelay = 300; // An arbitrary delay at a level that is not ignored by the new focus element\nvar TouchableDiv = (0, _Touchable[\"default\"])('div');\n\n/**\n * The shape for editable of {@link sandstone/Scroller|Scroller}.\n *\n * @typedef {Object} EditableShape\n * @memberof sandstone/Scroller\n * @property {Function} onComplete The callback function called when editing is finished.\n *  It has an event object contains `orders` array which app can use for repopulate items.\n * @property {Function|Object} [blurItemFuncRef] Obtains a reference to `blurItem` function.\n *  If you would like to remove `focused` CSS class to an item, you can get the reference to `blurItem` function via `useRef`.\n * `blurItem` function needs to be called with an item node when an item is blurred.\n * @property {Boolean} [centered] Centers the contents of the scroller.\n * @property {Object} [css] Customizes the component by mapping the supplied collection of CSS class names to the\n *  corresponding internal elements and states of this component.\n *  The following classes are supported:\n *\n * * `wrapper` - The content wrapper component class\n * * `selected` - The selected item class\n * * `focused` - The focused item class\n * @property {Function|Object} [focusItemFuncRef] Obtains a reference to `focusItem` function.\n *  If you would like to use `focused` CSS class to an item, you can get the reference to `focusItem` function via `useRef`.\n * `focusItem` function needs to be called with an item node when an item is focused.\n * @property {Function|Object} [hideItemFuncRef] Obtains a reference to `hideItem` function.\n *  If you would like to hide an item, you can get the reference to `hideItem` function via `useRef`.\n * @property {Function|Object} [removeItemFuncRef] Obtains a reference to `removeItem` function.\n *  If you would like to remove an item, you can get the reference to `removeItem` function via `useRef`.\n * @property {string} [selectItemBy] Decides how to start editing items.\n *  It can be either `'press'` or `'longPress'`. If unset, it defaults to `'longPress'`.\n * @property {Function|Object} [showItemFuncRef] Obtains a reference to `showItem` function.\n *  If you would like to show an item, you can get the reference to `showItem` function via `useRef`.\n * @public\n */\nvar EditableShape = exports.EditableShape = _propTypes2[\"default\"].shape({\n  onComplete: _propTypes2[\"default\"].func.isRequired,\n  blurItemFuncRef: _propTypes[\"default\"].ref,\n  centered: _propTypes2[\"default\"].bool,\n  css: _propTypes2[\"default\"].object,\n  focusItemFuncRef: _propTypes[\"default\"].ref,\n  hideItemFuncRef: _propTypes[\"default\"].ref,\n  removeItemFuncRef: _propTypes[\"default\"].ref,\n  selectItemBy: _propTypes2[\"default\"].string,\n  showItemFuncRef: _propTypes[\"default\"].ref\n});\nvar SpotlightAccelerator = new _Accelerator[\"default\"]([5, 4]);\nvar holdDuration = 500;\nvar holdConfig = {\n  events: [{\n    name: 'hold',\n    time: holdDuration\n  }]\n};\n\n/**\n * A Sandstone-styled EditableWrapper.\n *\n * @class EditableWrapper\n * @memberof sandstone/Scroller\n * @ui\n * @public\n */\nvar EditableWrapper = exports.EditableWrapper = function EditableWrapper(props) {\n  var _editable$hideIndex;\n  var children = props.children,\n    editable = props.editable,\n    scrollContainerHandle = props.scrollContainerHandle,\n    scrollContainerRef = props.scrollContainerRef,\n    scrollContentRef = props.scrollContentRef;\n  var centered = (editable === null || editable === void 0 ? void 0 : editable.centered) != null ? editable.centered : true;\n  var selectItemBy = (editable === null || editable === void 0 ? void 0 : editable.selectItemBy) || 'longPress';\n  var customCss = (editable === null || editable === void 0 ? void 0 : editable.css) || {};\n  var removeItemFuncRef = editable === null || editable === void 0 ? void 0 : editable.removeItemFuncRef;\n  var hideItemFuncRef = editable === null || editable === void 0 ? void 0 : editable.hideItemFuncRef;\n  var showItemFuncRef = editable === null || editable === void 0 ? void 0 : editable.showItemFuncRef;\n  var focusItemFuncRef = editable === null || editable === void 0 ? void 0 : editable.focusItemFuncRef;\n  var blurItemFuncRef = editable === null || editable === void 0 ? void 0 : editable.blurItemFuncRef;\n  var mergedCss = (0, _usePublicClassNames.usePublicClassNames)({\n    componentCss: _EditableWrapperModule[\"default\"],\n    customCss: customCss,\n    publicClassNames: true\n  });\n  var dataSize = children === null || children === void 0 ? void 0 : children.length;\n\n  // Mutable value\n  var wrapperRef = (0, _react.useRef)();\n  var mutableRef = (0, _react.useRef)({\n    // Constants\n    itemWidth: null,\n    centeredOffset: 0,\n    spotlightId: null,\n    // DOM elements\n    focusedItem: null,\n    selectedItem: null,\n    selectedItemLabel: '',\n    rearrangedItems: [],\n    // Indices\n    fromIndex: null,\n    prevToIndex: null,\n    hideIndex: null,\n    // Position for restoring focus after removing item\n    nextSpotlightRect: null,\n    // Move direction from the starting position to the current position\n    moveDirection: null,\n    // Last mouse position\n    lastMouseClientX: null,\n    // Last InputType which moves Items\n    lastInputType: null,\n    // Timer for holding key input\n    keyHoldTimerId: null,\n    // Flag for prevent event propagation\n    needToPreventEvent: null,\n    lastInputDirection: null,\n    isDraggingItem: false,\n    isDragging: false,\n    // initialSelected\n    initialSelected: editable === null || editable === void 0 ? void 0 : editable.initialSelected\n  });\n  var announceRef = (0, _react.useRef)({});\n  mutableRef.current.hideIndex = (_editable$hideIndex = editable === null || editable === void 0 ? void 0 : editable.hideIndex) !== null && _editable$hideIndex !== void 0 ? _editable$hideIndex : dataSize;\n\n  // Functions\n\n  // Reset values\n  var reset = (0, _react.useCallback)(function () {\n    var _mutableRef$current = mutableRef.current,\n      focusedItem = _mutableRef$current.focusedItem,\n      selectedItem = _mutableRef$current.selectedItem,\n      spotlightId = _mutableRef$current.spotlightId;\n    focusedItem === null || focusedItem === void 0 || focusedItem.classList.remove(customCss.focused);\n    selectedItem === null || selectedItem === void 0 || selectedItem.classList.remove(_EditableWrapperModule[\"default\"].selected, customCss.selected, _EditableWrapperModule[\"default\"].rearranged);\n    mutableRef.current.focusedItem = null;\n    mutableRef.current.selectedItem = null;\n    mutableRef.current.selectedItemLabel = '';\n    mutableRef.current.moveDirection = null;\n    mutableRef.current.prevToIndex = null;\n    mutableRef.current.initialSelected = null;\n    wrapperRef.current.style.setProperty('--selected-item-offset', '0px');\n    _spotlight[\"default\"].set(spotlightId, {\n      restrict: 'self-first'\n    });\n  }, [customCss.focused, customCss.selected]);\n\n  // Finalize the order\n  var finalizeOrders = (0, _react.useCallback)(function () {\n    var _mutableRef$current2 = mutableRef.current,\n      fromIndex = _mutableRef$current2.fromIndex,\n      moveDirection = _mutableRef$current2.moveDirection,\n      prevToIndex = _mutableRef$current2.prevToIndex,\n      rearrangedItems = _mutableRef$current2.rearrangedItems,\n      selectedItem = _mutableRef$current2.selectedItem;\n    var orders = Array.from({\n      length: dataSize\n    }, function (_, i) {\n      return i + 1;\n    });\n    if (rearrangedItems.length > 0) {\n      var selectedOrder = selectedItem.style.order;\n      var changedOrder = [];\n      rearrangedItems.forEach(function (item) {\n        var order = Number(item.style.order);\n        selectedOrder = order;\n        item.style.order = order - moveDirection;\n        item.classList.remove(_EditableWrapperModule[\"default\"].rearrangedTransform, _EditableWrapperModule[\"default\"].rearranged);\n        if (moveDirection > 0) {\n          changedOrder.push(order);\n        } else {\n          changedOrder.unshift(order);\n        }\n      });\n      if (moveDirection > 0) {\n        changedOrder.push(Number(selectedItem.style.order));\n      } else {\n        changedOrder.unshift(Number(selectedItem.style.order));\n      }\n      mutableRef.current.rearrangedItems = [];\n      selectedItem.style.order = selectedOrder;\n\n      // Create reordered array\n      orders.splice.apply(orders, [Math.min(fromIndex, prevToIndex), changedOrder.length].concat(changedOrder));\n    }\n    return orders;\n  }, [dataSize]);\n  var updateArrowIcon = (0, _react.useCallback)(function (index) {\n    var _mutableRef$current$s, _mutableRef$current$s2;\n    (_mutableRef$current$s = mutableRef.current.selectedItem) === null || _mutableRef$current$s === void 0 || _mutableRef$current$s.classList.toggle(customCss.noBefore, index === 0);\n    (_mutableRef$current$s2 = mutableRef.current.selectedItem) === null || _mutableRef$current$s2 === void 0 || _mutableRef$current$s2.classList.toggle(customCss.noAfter, index === mutableRef.current.hideIndex - 1);\n  }, [customCss.noBefore, customCss.noAfter]);\n  var startEditing = (0, _react.useCallback)(function (item) {\n    var _item$dataset;\n    if (item !== null && item !== void 0 && (_item$dataset = item.dataset) !== null && _item$dataset !== void 0 && _item$dataset.index && (!item.hasAttribute('disabled') || item.className.includes('hidden'))) {\n      var _mutableRef$current$f;\n      item.classList.add(_EditableWrapperModule[\"default\"].selected, customCss.selected);\n      mutableRef.current.selectedItem = item;\n      (_mutableRef$current$f = mutableRef.current.focusedItem) === null || _mutableRef$current$f === void 0 || _mutableRef$current$f.classList.remove(customCss.focused);\n      mutableRef.current.focusedItem = null;\n      mutableRef.current.selectedItemLabel = (item.ariaLabel || item.textContent) + ' ';\n      mutableRef.current.fromIndex = Number(item.style.order) - 1;\n      mutableRef.current.prevToIndex = mutableRef.current.fromIndex;\n      updateArrowIcon(mutableRef.current.fromIndex);\n      if (!mutableRef.current.initialSelected) {\n        setTimeout(function () {\n          announceRef.current.announce(mutableRef.current.selectedItemLabel + (0, _$L[\"default\"])('Press the left/right button to move or press the up button to select other options.'));\n        }, completeAnnounceDelay);\n      }\n    }\n  }, [customCss.focused, customCss.selected, updateArrowIcon]);\n  var finalizeEditing = (0, _react.useCallback)(function (orders) {\n    if (mutableRef.current.initialSelected) {\n      mutableRef.current.selectedItem.children[1].ariaLabel = \"\".concat(mutableRef.current.selectedItem.ariaLabel, \" \").concat((0, _$L[\"default\"])('Press the OK button to move or press the up button to select other options.'));\n    }\n    (0, _handle.forwardCustom)('onComplete', function () {\n      return {\n        orders: orders,\n        hideIndex: mutableRef.current.hideIndex\n      };\n    })(null, editable);\n    reset();\n  }, [editable, reset]);\n  var findItemNode = (0, _react.useCallback)(function (node) {\n    for (var current = node; current !== scrollContentRef.current && current !== document; current = current.parentNode) {\n      if (current.dataset.index) {\n        return current;\n      }\n    }\n    return null;\n  }, [scrollContentRef]);\n  var focusItem = (0, _react.useCallback)(function (target) {\n    var itemNode = findItemNode(target);\n    if (itemNode && !mutableRef.current.selectedItem) {\n      var _mutableRef$current$f2, _mutableRef$current$f3;\n      (_mutableRef$current$f2 = mutableRef.current.focusedItem) === null || _mutableRef$current$f2 === void 0 || _mutableRef$current$f2.classList.remove(customCss.focused);\n      mutableRef.current.focusedItem = itemNode;\n      (_mutableRef$current$f3 = mutableRef.current.focusedItem) === null || _mutableRef$current$f3 === void 0 || _mutableRef$current$f3.classList.add(customCss.focused);\n      mutableRef.current.prevToIndex = Number(itemNode.style.order) - 1;\n    }\n  }, [customCss.focused, findItemNode]);\n  var blurItem = (0, _react.useCallback)(function (target) {\n    var itemNode = findItemNode(target);\n    if (itemNode && !mutableRef.current.selectedItem) {\n      var _mutableRef$current$f4;\n      (_mutableRef$current$f4 = mutableRef.current.focusedItem) === null || _mutableRef$current$f4 === void 0 || _mutableRef$current$f4.classList.remove(customCss.focused);\n      mutableRef.current.focusedItem = null;\n      mutableRef.current.prevToIndex = null;\n    }\n  }, [customCss.focused, findItemNode]);\n  var handleClickCapture = (0, _react.useCallback)(function (ev) {\n    if (ev.target.className.includes('Button')) {\n      return;\n    }\n    // Consume the event to prevent Item behavior\n    if (mutableRef.current.selectedItem || mutableRef.current.needToPreventEvent) {\n      ev.preventDefault();\n      ev.stopPropagation();\n      mutableRef.current.needToPreventEvent = false;\n    }\n  }, []);\n  var handleMouseDown = (0, _react.useCallback)(function (ev) {\n    if (ev.target.className.includes('Button')) {\n      return;\n    }\n    if (mutableRef.current.selectedItem) {\n      // Finalize orders and forward `onComplete` event\n      var orders = finalizeOrders();\n      finalizeEditing(orders);\n      if (selectItemBy === 'press') {\n        focusItem(ev.target);\n      }\n      mutableRef.current.needToPreventEvent = true;\n    } else {\n      var targetItemNode = findItemNode(ev.target);\n      if (selectItemBy === 'press') {\n        if (targetItemNode && targetItemNode.dataset.index) {\n          // Start editing by adding selected transition to selected item\n          mutableRef.current.targetItemNode = targetItemNode;\n          startEditing(targetItemNode);\n        }\n        mutableRef.current.needToPreventEvent = true;\n      } else {\n        mutableRef.current.targetItemNode = targetItemNode;\n        mutableRef.current.needToPreventEvent = false;\n      }\n    }\n  }, [finalizeEditing, finalizeOrders, findItemNode, focusItem, selectItemBy, startEditing]);\n  var handleHoldStart = (0, _react.useCallback)(function () {\n    var targetItemNode = mutableRef.current.targetItemNode;\n    if (targetItemNode && targetItemNode.dataset.index && selectItemBy === 'longPress') {\n      // Start editing by adding selected transition to selected item\n      startEditing(targetItemNode);\n    }\n  }, [selectItemBy, startEditing]);\n  var readOutCurrentPosition = (0, _react.useCallback)(function (neighborItem) {\n    var _mutableRef$current3 = mutableRef.current,\n      lastInputDirection = _mutableRef$current3.lastInputDirection,\n      lastInputType = _mutableRef$current3.lastInputType,\n      selectedItemLabel = _mutableRef$current3.selectedItemLabel;\n    if (lastInputType === 'key') {\n      if (lastInputDirection === 'left') {\n        announceRef.current.announce(new _IString[\"default\"]((0, _$L[\"default\"])('{selectedItem} moved to the left of {neighborItem}')).format({\n          selectedItem: selectedItemLabel,\n          neighborItem: neighborItem\n        }), true);\n      } else {\n        announceRef.current.announce(new _IString[\"default\"]((0, _$L[\"default\"])('{selectedItem} moved to the right of {neighborItem}')).format({\n          selectedItem: selectedItemLabel,\n          neighborItem: neighborItem\n        }), true);\n      }\n    }\n  }, []);\n\n  // Add rearranged items\n  var addRearrangedItems = (0, _react.useCallback)(function (_ref) {\n    var currentMoveDirection = _ref.currentMoveDirection,\n      toIndex = _ref.toIndex;\n    // Set the currentMoveDirection to css variable\n    var rtl = scrollContainerHandle.current.rtl;\n    wrapperRef.current.style.setProperty('--move-direction', currentMoveDirection * (rtl ? -1 : 1));\n    var _mutableRef$current4 = mutableRef.current,\n      fromIndex = _mutableRef$current4.fromIndex,\n      rearrangedItems = _mutableRef$current4.rearrangedItems,\n      selectedItem = _mutableRef$current4.selectedItem;\n    var getNextElement = function getNextElement(item) {\n      return currentMoveDirection > 0 ? item.nextElementSibling : item.previousElementSibling;\n    };\n    var sibling = getNextElement(selectedItem);\n    var lastRearrangedItem;\n    var start = currentMoveDirection > 0 ? toIndex : fromIndex;\n    var end = currentMoveDirection > 0 ? fromIndex : toIndex;\n    while (start > end && sibling) {\n      var _sibling;\n      (_sibling = sibling) === null || _sibling === void 0 || _sibling.classList.add(_EditableWrapperModule[\"default\"].rearranged, _EditableWrapperModule[\"default\"].rearrangedTransform);\n      if (!rearrangedItems.includes(sibling)) {\n        rearrangedItems.push(sibling);\n      }\n      lastRearrangedItem = sibling;\n      sibling = getNextElement(sibling);\n      start--;\n    }\n    if (lastRearrangedItem) {\n      readOutCurrentPosition(lastRearrangedItem.ariaLabel || lastRearrangedItem.textContent);\n    }\n    mutableRef.current.moveDirection = currentMoveDirection;\n  }, [readOutCurrentPosition, scrollContainerHandle]);\n  var removeRearrangedItems = (0, _react.useCallback)(function (numToRemove) {\n    var rearrangedItems = mutableRef.current.rearrangedItems;\n    var toItem = null;\n    if (rearrangedItems.length > 0) {\n      for (var i = 0; i < numToRemove; i++) {\n        var _toItem;\n        toItem = rearrangedItems.pop();\n        (_toItem = toItem) === null || _toItem === void 0 || _toItem.classList.remove(_EditableWrapperModule[\"default\"].rearrangedTransform);\n      }\n    }\n    if (toItem) {\n      readOutCurrentPosition(toItem.ariaLabel || toItem.textContent);\n    }\n  }, [readOutCurrentPosition]);\n\n  // Move items\n  var moveItems = (0, _react.useCallback)(function (toIndex) {\n    var selectedItem = mutableRef.current.selectedItem;\n    var rtl = scrollContainerHandle.current.rtl;\n    if (selectedItem) {\n      // Bail out when index is out of scope\n      if (toIndex < mutableRef.current.hideIndex && toIndex >= 0) {\n        var _mutableRef$current5 = mutableRef.current,\n          fromIndex = _mutableRef$current5.fromIndex,\n          itemWidth = _mutableRef$current5.itemWidth,\n          moveDirection = _mutableRef$current5.moveDirection,\n          prevToIndex = _mutableRef$current5.prevToIndex,\n          rearrangedItems = _mutableRef$current5.rearrangedItems;\n\n        // Set the selected item's offset to css variable\n        var offset = (toIndex - fromIndex) * itemWidth;\n        wrapperRef.current.style.setProperty('--selected-item-offset', offset * (rtl ? -1 : 1) + 'px');\n\n        // If the current toIndex is new,\n        if (toIndex !== prevToIndex) {\n          // Determine the direction of move from the latest from index\n          var currentMoveDirection = Math.sign(toIndex - prevToIndex);\n          // If the direction is changed and there are rearranged items, we remove them first.\n          if (moveDirection && currentMoveDirection !== moveDirection && rearrangedItems.length > 0) {\n            var numToRemove = currentMoveDirection > 0 ? toIndex - prevToIndex : prevToIndex - toIndex;\n            var needToAddItems = numToRemove > rearrangedItems.length;\n            removeRearrangedItems(numToRemove);\n\n            // When there's jump, meaning, numToRemove is bigger than 0, we need to add an item\n            if (needToAddItems) {\n              addRearrangedItems({\n                currentMoveDirection: currentMoveDirection,\n                toIndex: toIndex\n              });\n            }\n          } else {\n            addRearrangedItems({\n              currentMoveDirection: currentMoveDirection,\n              toIndex: toIndex\n            });\n          }\n          mutableRef.current.prevToIndex = toIndex;\n        }\n        updateArrowIcon(toIndex);\n      }\n    }\n  }, [addRearrangedItems, removeRearrangedItems, scrollContainerHandle, updateArrowIcon]);\n  var moveItemsByKeyDown = (0, _react.useCallback)(function (ev) {\n    var keyCode = ev.keyCode;\n    var container = scrollContentRef.current;\n    var _mutableRef$current6 = mutableRef.current,\n      itemWidth = _mutableRef$current6.itemWidth,\n      prevToIndex = _mutableRef$current6.prevToIndex;\n    var rtl = scrollContainerHandle.current.rtl;\n    var toIndex = !rtl ^ !(0, _keymap.is)('left', keyCode) ? prevToIndex - 1 : prevToIndex + 1;\n    var scrollLeft = container.scrollLeft * (rtl ? -1 : 1);\n    var itemLeft = toIndex * itemWidth - scrollLeft;\n    var left;\n    if (itemLeft > container.offsetLeft + container.clientWidth - itemWidth) {\n      left = itemLeft - (container.clientWidth - itemWidth) + scrollLeft;\n    } else if (itemLeft < 0) {\n      left = scrollLeft + itemLeft;\n    }\n    if (left != null) {\n      /* avoid null or undefined */\n      scrollContainerHandle.current.start({\n        targetX: left,\n        targetY: 0\n      });\n    }\n    mutableRef.current.lastInputType = 'key';\n    mutableRef.current.lastInputDirection = (0, _keymap.is)('left', keyCode) ? 'left' : 'right';\n    moveItems(toIndex);\n    if (toIndex <= 0) {\n      announceRef.current.announce((0, _keymap.is)('left', keyCode) && !rtl && (0, _$L[\"default\"])('LEFTMOST') || (0, _keymap.is)('right', keyCode) && rtl && (0, _$L[\"default\"])('RIGHTMOST'));\n    } else if (toIndex >= dataSize - 1) {\n      announceRef.current.announce((0, _keymap.is)('right', keyCode) && !rtl && (0, _$L[\"default\"])('RIGHTMOST') || (0, _keymap.is)('left', keyCode) && rtl && (0, _$L[\"default\"])('LEFTMOST'));\n    }\n  }, [dataSize, moveItems, scrollContainerHandle, scrollContentRef]);\n\n  // Remove an item\n  var removeItem = (0, _react.useCallback)(function () {\n    var _mutableRef$current7 = mutableRef.current,\n      focusedItem = _mutableRef$current7.focusedItem,\n      prevToIndex = _mutableRef$current7.prevToIndex,\n      selectedItem = _mutableRef$current7.selectedItem;\n    var targetItem = selectedItem || focusedItem;\n    if (targetItem) {\n      // rearrangedItems need for the case when removing item while moving selected item\n      var rearrangedItems = mutableRef.current.rearrangedItems;\n      var targetItemRect = targetItem && targetItem.getBoundingClientRect();\n      mutableRef.current.nextSpotlightRect = {\n        x: targetItemRect.right,\n        y: targetItemRect.top\n      };\n      mutableRef.current.hideIndex -= 1;\n      var orders = finalizeOrders();\n      orders.splice(prevToIndex, 1);\n      rearrangedItems.forEach(function (item) {\n        item.style.order -= 1;\n      });\n      finalizeEditing(orders);\n    }\n  }, [finalizeEditing, finalizeOrders]);\n  var hideItem = (0, _react.useCallback)(function () {\n    var _mutableRef$current8 = mutableRef.current,\n      focusedItem = _mutableRef$current8.focusedItem,\n      selectedItem = _mutableRef$current8.selectedItem;\n    var targetItem = selectedItem || focusedItem;\n    if (targetItem) {\n      // rearrangedItems need for the case when hiding item while moving selected item\n      var rearrangedItems = mutableRef.current.rearrangedItems;\n      var targetItemOrder = Number(targetItem.style.order);\n      var targetItemRect = targetItem && targetItem.getBoundingClientRect();\n      mutableRef.current.nextSpotlightRect = {\n        x: targetItemRect.right,\n        y: targetItemRect.top\n      };\n      mutableRef.current.hideIndex -= 1;\n      var orders = finalizeOrders();\n      orders.splice(orders.indexOf(targetItemOrder), 1);\n      orders.push(targetItemOrder);\n      rearrangedItems.forEach(function (item) {\n        item.style.order -= 1;\n      });\n      targetItem.style.order = orders.length;\n      finalizeEditing(orders);\n    }\n  }, [finalizeEditing, finalizeOrders]);\n  var showItem = (0, _react.useCallback)(function () {\n    var _mutableRef$current9 = mutableRef.current,\n      focusedItem = _mutableRef$current9.focusedItem,\n      selectedItem = _mutableRef$current9.selectedItem;\n    var targetItem = selectedItem || focusedItem;\n    if (targetItem) {\n      var targetItemOrder = Number(targetItem.style.order);\n      var targetItemRect = targetItem && targetItem.getBoundingClientRect();\n      mutableRef.current.nextSpotlightRect = {\n        x: targetItemRect.right,\n        y: targetItemRect.top\n      };\n      var orders = Array.from({\n        length: dataSize\n      }, function (_, i) {\n        return i + 1;\n      });\n      orders.splice(targetItemOrder - 1, 1);\n      orders.splice(mutableRef.current.hideIndex, 0, targetItemOrder);\n      mutableRef.current.hideIndex += 1;\n      finalizeEditing(orders);\n    }\n  }, [dataSize, finalizeEditing]);\n  var getNextIndexFromPosition = (0, _react.useCallback)(function (x, tolerance) {\n    var _mutableRef$current10 = mutableRef.current,\n      centeredOffset = _mutableRef$current10.centeredOffset,\n      itemWidth = _mutableRef$current10.itemWidth,\n      prevToIndex = _mutableRef$current10.prevToIndex;\n    var rtl = scrollContainerHandle.current.rtl;\n    var bodyWidth = document.body.getBoundingClientRect().width;\n\n    // Determine toIndex with mouse client x position\n    // Coordinate calculation in RTL locales is not supported in chrome below 85\n    var scrollContentOffset = scrollContentRef.current.scrollLeft * (rtl ? -1 : 1) - centeredOffset;\n    var clientXFromContent = (rtl ? bodyWidth - x : x) + scrollContentOffset;\n    var direction = itemWidth * (prevToIndex + 0.5) < clientXFromContent ? 1 : -1; // 1: To next index , -1: To prev index\n    var moveTolerance = itemWidth * tolerance * direction;\n    return Math.floor((clientXFromContent - moveTolerance) / itemWidth);\n  }, [scrollContainerHandle, scrollContentRef]);\n  var handleMouseMove = (0, _react.useCallback)(function (ev) {\n    var clientX = ev.clientX;\n    mutableRef.current.lastMouseClientX = clientX;\n    if (mutableRef.current.selectedItem && Number(mutableRef.current.selectedItem.style.order) - 1 < mutableRef.current.hideIndex) {\n      var toIndex = getNextIndexFromPosition(clientX, 0.33);\n      mutableRef.current.lastInputType = 'mouse';\n      moveItems(toIndex);\n    }\n  }, [getNextIndexFromPosition, moveItems]);\n  var handleMouseLeave = (0, _react.useCallback)(function () {\n    var _mutableRef$current11 = mutableRef.current,\n      focusedItem = _mutableRef$current11.focusedItem,\n      itemWidth = _mutableRef$current11.itemWidth,\n      lastInputType = _mutableRef$current11.lastInputType,\n      lastMouseClientX = _mutableRef$current11.lastMouseClientX,\n      selectedItem = _mutableRef$current11.selectedItem;\n    var rtl = scrollContainerHandle.current.rtl;\n    var scrollContentNode = scrollContentRef.current;\n    var scrollContentCenter = scrollContentNode.getBoundingClientRect().width / 2;\n    if (selectedItem || focusedItem) {\n      var orders = finalizeOrders();\n      finalizeEditing(orders);\n      if (lastInputType === 'scroll') {\n        var offset = itemWidth * (!rtl ^ !(lastMouseClientX > scrollContentCenter) ? 1 : -1);\n        scrollContainerHandle.current.start({\n          targetX: scrollContentNode.scrollLeft + offset,\n          targetY: 0\n        });\n      }\n    }\n  }, [finalizeEditing, finalizeOrders, scrollContainerHandle, scrollContentRef]);\n  var completeEditingByKeyDown = (0, _react.useCallback)(function () {\n    var _mutableRef$current12 = mutableRef.current,\n      selectedItem = _mutableRef$current12.selectedItem,\n      selectedItemLabel = _mutableRef$current12.selectedItemLabel;\n    var focusTarget = selectedItem.children[1];\n    var orders = finalizeOrders();\n    selectedItem.children[1].ariaLabel = '';\n    finalizeEditing(orders);\n    if (selectItemBy === 'press') {\n      if ((0, _pointer.getPointerMode)()) {\n        _spotlight[\"default\"].setPointerMode(false);\n        _spotlight[\"default\"].focus(focusTarget);\n      }\n      focusItem(focusTarget);\n    }\n    setTimeout(function () {\n      announceRef.current.announce(selectedItemLabel + (0, _$L[\"default\"])('Movement completed'), true);\n      setTimeout(function () {\n        selectedItem.children[1].ariaLabel = \"\".concat(selectedItem.ariaLabel, \" \").concat((0, _$L[\"default\"])('Press the OK button to move or press the up button to select other options.'));\n      }, completeAnnounceDelay);\n    }, completeAnnounceDelay);\n  }, [finalizeEditing, finalizeOrders, focusItem, selectItemBy]);\n  var handleKeyDownCapture = (0, _react.useCallback)(function (ev) {\n    var keyCode = ev.keyCode,\n      repeat = ev.repeat,\n      target = ev.target;\n    var _mutableRef$current13 = mutableRef.current,\n      focusedItem = _mutableRef$current13.focusedItem,\n      selectedItem = _mutableRef$current13.selectedItem;\n    var targetItemNode = findItemNode(target);\n    if ((0, _keymap.is)('enter', keyCode) && target.getAttribute('role') !== 'button') {\n      if (!repeat) {\n        if (selectedItem) {\n          completeEditingByKeyDown();\n          mutableRef.current.needToPreventEvent = true;\n        } else if (selectItemBy === 'press') {\n          startEditing(targetItemNode);\n          mutableRef.current.needToPreventEvent = true;\n        }\n      } else if (repeat && targetItemNode && !mutableRef.current.timer && selectItemBy === 'longPress') {\n        mutableRef.current.timer = setTimeout(function () {\n          startEditing(targetItemNode);\n        }, holdDuration - 300);\n      }\n    } else if ((0, _keymap.is)('down', keyCode) && target.getAttribute('role') !== 'button' && !repeat && selectedItem) {\n      completeEditingByKeyDown();\n      mutableRef.current.needToPreventEvent = true;\n    } else if ((0, _keymap.is)('left', keyCode) || (0, _keymap.is)('right', keyCode)) {\n      if (selectedItem) {\n        if (target.getAttribute('role') !== 'button') {\n          if (Number(selectedItem.style.order) - 1 < mutableRef.current.hideIndex) {\n            if (repeat) {\n              SpotlightAccelerator.processKey(ev, moveItemsByKeyDown);\n            } else {\n              SpotlightAccelerator.reset();\n              moveItemsByKeyDown(ev);\n            }\n          }\n          ev.preventDefault();\n          ev.stopPropagation();\n        }\n      } else {\n        var nextTarget = (0, _target.getTargetByDirectionFromElement)((0, _spotlight.getDirection)(keyCode), target);\n\n        // Check if focus leaves scroll container.\n        if (nextTarget && !(0, _container.getContainersForNode)(nextTarget).includes(mutableRef.current.spotlightId) && !repeat) {\n          reset();\n        }\n      }\n    } else if ((0, _keymap.is)('up', keyCode) || (0, _keymap.is)('down', keyCode)) {\n      if (selectedItem || focusedItem) {\n        var _nextTarget = (0, _target.getTargetByDirectionFromElement)((0, _spotlight.getDirection)(keyCode), target);\n\n        // Check if focus leaves scroll container.\n        if (_nextTarget && !(0, _container.getContainersForNode)(_nextTarget).includes(mutableRef.current.spotlightId)) {\n          (0, _pointer.setPointerMode)(false);\n          _spotlight[\"default\"].move((0, _spotlight.getDirection)(keyCode));\n          var orders = finalizeOrders();\n          finalizeEditing(orders);\n          ev.preventDefault();\n          ev.stopPropagation();\n        }\n      }\n    }\n  }, [finalizeEditing, finalizeOrders, findItemNode, moveItemsByKeyDown, reset, selectItemBy, startEditing, completeEditingByKeyDown]);\n  var handleKeyUpCapture = (0, _react.useCallback)(function (ev) {\n    var keyCode = ev.keyCode,\n      target = ev.target;\n    var selectedItem = mutableRef.current.selectedItem;\n    if ((0, _keymap.is)('cancel', keyCode)) {\n      if (selectedItem) {\n        completeEditingByKeyDown();\n        ev.stopPropagation(); // To prevent onCancel by CancelDecorator\n      }\n    } else if (target.getAttribute('role') === 'button') {\n      return;\n    }\n    clearTimeout(mutableRef.current.timer);\n    mutableRef.current.timer = null;\n    if (mutableRef.current.needToPreventEvent || mutableRef.current.selectedItem) {\n      ev.preventDefault();\n      mutableRef.current.needToPreventEvent = false;\n    }\n  }, [completeEditingByKeyDown]);\n  var handleGlobalKeyDownCapture = (0, _react.useCallback)(function (ev) {\n    var _mutableRef$current14 = mutableRef.current,\n      focusedItem = _mutableRef$current14.focusedItem,\n      selectedItem = _mutableRef$current14.selectedItem;\n\n    // If the pointer mode is `true` and the focused component is not contained in scrollContainerRef,\n    // only `handleGlobalKeyDownCapture` is called instead of `handleKeyDownCapture`\n    // Below is mainly for handling key pressed while pointer mode is `true`.\n    if ((0, _pointer.getPointerMode)() && !scrollContainerRef.current.contains(_spotlight[\"default\"].getCurrent()) && (selectedItem || focusedItem)) {\n      var keyCode = ev.keyCode;\n      var position = (0, _pointer.getLastPointerPosition)();\n      var direction = (0, _spotlight.getDirection)(keyCode);\n      if (direction) {\n        var nextTarget = (0, _target.getTargetByDirectionFromPosition)(direction, position, mutableRef.current.spotlightId);\n        if (!scrollContainerRef.current.contains(nextTarget)) {\n          // If the nextTarget is not contained in scrollContainerRef, complete editing\n          var orders = finalizeOrders();\n          finalizeEditing(orders);\n        } else if (((0, _keymap.is)('left', keyCode) || (0, _keymap.is)('right', keyCode)) && selectedItem) {\n          // When an item is selected and press the `left` or `right` key, move the selectedItem in that direction\n          moveItemsByKeyDown(ev);\n          ev.preventDefault();\n          ev.stopPropagation();\n        } else if ((0, _keymap.is)('down', keyCode) && selectedItem) {\n          // When an item is selected and press the `down` key, complete editing and focus the selectedItem\n          completeEditingByKeyDown();\n        } else if ((0, _keymap.is)('up', keyCode) && nextTarget.getAttribute('role') !== 'button') {\n          // When the nextTarget is the item and press the `up` key, focus the nextTarget to move focus successfully to the button above the item\n          (0, _pointer.setPointerMode)(false);\n          _spotlight[\"default\"].focus(nextTarget);\n        }\n      } else if ((0, _keymap.is)('enter', keyCode)) {\n        if (selectedItem) {\n          // When an item is selected and press the `enter` key, complete editing and focus the selectedItem\n          completeEditingByKeyDown();\n        } else {\n          // When an item is focused and press the `enter` key, start editing\n          startEditing(focusedItem);\n        }\n      }\n    }\n  }, [completeEditingByKeyDown, finalizeEditing, finalizeOrders, moveItemsByKeyDown, scrollContainerRef, startEditing]);\n  var handleTouchMove = (0, _react.useCallback)(function (ev) {\n    if (mutableRef.current.selectedItem) {\n      // Prevent scrolling by dragging when item is selected\n      ev.preventDefault();\n    }\n    if (mutableRef.current.isDraggingItem && !ev.target.className.includes('Button')) {\n      var clientX = ev.targetTouches[0].clientX;\n      mutableRef.current.lastMouseClientX = clientX;\n      var toIndex = getNextIndexFromPosition(clientX, 0.33);\n      if (toIndex !== mutableRef.current.prevToIndex) {\n        scrollContainerHandle.current.start({\n          targetX: clientX,\n          targetY: 0\n        });\n        mutableRef.current.lastInputType = 'touch';\n        moveItems(toIndex);\n      }\n    }\n  }, [getNextIndexFromPosition, moveItems, scrollContainerHandle]);\n  var handleTouchEnd = (0, _react.useCallback)(function (ev) {\n    var selectedItem = mutableRef.current.selectedItem;\n    var clientX = ev.changedTouches[0].clientX;\n    var targetItemIndex = getNextIndexFromPosition(clientX, 0);\n    if (ev.target.className.includes('Button') && Number(selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.style.order) - 1 === targetItemIndex) {\n      return;\n    }\n    if (selectedItem) {\n      // Cancel mouse event to deselect a selected item when it is tapped\n      ev.preventDefault();\n\n      // Finalize orders and forward `onComplete` event\n      var orders = finalizeOrders();\n      finalizeEditing(orders);\n    } else if (!mutableRef.current.isDragging) {\n      // Cancel mouse event to select a item when it is tapped\n      ev.preventDefault();\n      var targetItemNode = findItemNode(ev.target);\n      if (selectItemBy === 'press') {\n        if (targetItemNode && targetItemNode.dataset.index) {\n          mutableRef.current.targetItemNode = targetItemNode;\n          startEditing(targetItemNode);\n        }\n      }\n    }\n    mutableRef.current.isDraggingItem = false;\n    mutableRef.current.isDragging = false;\n  }, [getNextIndexFromPosition, finalizeEditing, finalizeOrders, findItemNode, selectItemBy, startEditing]);\n  var handleDragStart = (0, _react.useCallback)(function (ev) {\n    var selectedItem = mutableRef.current.selectedItem;\n    // Index of dragged item\n    var dragTagetItemIndex = getNextIndexFromPosition(ev.x, 0);\n    mutableRef.current.isDragging = true;\n    if (selectedItem && Number(selectedItem.style.order) - 1 === dragTagetItemIndex) {\n      mutableRef.current.isDraggingItem = true;\n    }\n  }, [getNextIndexFromPosition]);\n  (0, _react.useLayoutEffect)(function () {\n    var available = typeof document === 'object';\n    if (available) {\n      document.addEventListener('keydown', handleGlobalKeyDownCapture, {\n        capture: true\n      });\n    }\n    return function () {\n      if (available) {\n        document.removeEventListener('keydown', handleGlobalKeyDownCapture, {\n          capture: true\n        });\n      }\n    };\n  }, [handleGlobalKeyDownCapture]);\n  (0, _react.useEffect)(function () {\n    if (mutableRef.current.nextSpotlightRect !== null) {\n      _spotlight[\"default\"].focusNextFromPoint('down', mutableRef.current.nextSpotlightRect);\n      mutableRef.current.nextSpotlightRect = null;\n    }\n  });\n  (0, _react.useEffect)(function () {\n    var _wrapperRef$current;\n    // Calculate the item width once\n    var rtl = scrollContainerHandle.current.rtl;\n    var container = scrollContentRef.current;\n    var item = (_wrapperRef$current = wrapperRef.current) === null || _wrapperRef$current === void 0 ? void 0 : _wrapperRef$current.children[0];\n    if (item && typeof window !== 'undefined') {\n      var _wrapperRef$current2;\n      var bodyWidth = document.body.getBoundingClientRect().width;\n      var neighbor = item.nextElementSibling || item.previousElementSibling;\n      mutableRef.current.itemWidth = Math.abs(item.offsetLeft - (neighbor === null || neighbor === void 0 ? void 0 : neighbor.offsetLeft));\n      mutableRef.current.centeredOffset = rtl ? bodyWidth - (item.getBoundingClientRect().right + container.scrollLeft) : item.getBoundingClientRect().left + container.scrollLeft;\n      (_wrapperRef$current2 = wrapperRef.current) === null || _wrapperRef$current2 === void 0 || _wrapperRef$current2.style.setProperty('--item-width', mutableRef.current.itemWidth + 'px');\n    }\n  }, [centered, dataSize, scrollContainerHandle, scrollContentRef]);\n  (0, _react.useEffect)(function () {\n    mutableRef.current.spotlightId = scrollContainerRef.current && scrollContainerRef.current.dataset.spotlightId;\n  }, [scrollContainerRef]);\n  (0, _react.useEffect)(function () {\n    var scrollContainer = scrollContainerRef.current;\n    if (scrollContainer) {\n      scrollContainer.addEventListener('mouseleave', handleMouseLeave);\n      scrollContainer.addEventListener('touchmove', handleTouchMove);\n    }\n    return function () {\n      if (scrollContainer) {\n        scrollContainer.removeEventListener('mouseleave', handleMouseLeave);\n        scrollContainer.removeEventListener('touchmove', handleTouchMove);\n      }\n    };\n  }, [handleMouseLeave, handleTouchMove, scrollContainerRef]);\n  (0, _react.useLayoutEffect)(function () {\n    if (removeItemFuncRef) {\n      removeItemFuncRef.current = removeItem;\n    }\n  }, [removeItem, removeItemFuncRef]);\n  (0, _react.useLayoutEffect)(function () {\n    if (hideItemFuncRef) {\n      hideItemFuncRef.current = hideItem;\n    }\n  }, [hideItem, hideItemFuncRef]);\n  (0, _react.useLayoutEffect)(function () {\n    if (showItemFuncRef) {\n      showItemFuncRef.current = showItem;\n    }\n  }, [showItem, showItemFuncRef]);\n  (0, _react.useLayoutEffect)(function () {\n    if (focusItemFuncRef) {\n      focusItemFuncRef.current = focusItem;\n    }\n  }, [focusItem, focusItemFuncRef]);\n  (0, _react.useLayoutEffect)(function () {\n    if (blurItemFuncRef) {\n      blurItemFuncRef.current = blurItem;\n    }\n  }, [blurItem, blurItemFuncRef]);\n  (0, _react.useEffect)(function () {\n    // addEventListener to moveItems while scrolled\n    var scrollContentNode = scrollContentRef.current;\n    var handleMoveItemsByScroll = function handleMoveItemsByScroll() {\n      var bodyWidth = document.body.getBoundingClientRect().width;\n      var _mutableRef$current15 = mutableRef.current,\n        lastMouseClientX = _mutableRef$current15.lastMouseClientX,\n        selectedItem = _mutableRef$current15.selectedItem;\n      var _scrollContainerHandl = scrollContainerHandle.current,\n        isHoveringToScroll = _scrollContainerHandl.isHoveringToScroll,\n        rtl = _scrollContainerHandl.rtl;\n      if (selectedItem && mutableRef.current.lastInputType !== 'key' && Number(selectedItem.style.order) - 1 < mutableRef.current.hideIndex) {\n        mutableRef.current.lastInputType = 'scroll';\n        if (isHoveringToScroll) {\n          var toIndex = getNextIndexFromPosition(lastMouseClientX, 0);\n          moveItems(!rtl ^ !(lastMouseClientX > bodyWidth / 2) ? toIndex + 1 : toIndex - 1);\n        } else {\n          moveItems(getNextIndexFromPosition(lastMouseClientX, 0.33));\n        }\n      }\n    };\n    setTimeout(function () {\n      scrollContentNode.addEventListener('scroll', handleMoveItemsByScroll);\n    }, 400); // Wait for finishing scroll animation when initial selected item is given.\n\n    return function () {\n      scrollContentNode.removeEventListener('scroll', handleMoveItemsByScroll);\n    };\n  }, [getNextIndexFromPosition, moveItems, scrollContainerHandle, scrollContentRef]);\n  (0, _react.useEffect)(function () {\n    if (mutableRef.current.initialSelected) {\n      var _scrollContainerHandl2;\n      (_scrollContainerHandl2 = scrollContainerHandle.current) === null || _scrollContainerHandl2 === void 0 || _scrollContainerHandl2.scrollTo({\n        animate: false,\n        position: {\n          x: mutableRef.current.initialSelected.scrollLeft\n        }\n      });\n    }\n  }, [scrollContainerHandle]);\n  (0, _react.useLayoutEffect)(function () {\n    var _initialSelected, _initialSelected2;\n    var iconItemList = Array.from(wrapperRef.current.children);\n    var initialSelected = mutableRef.current.initialSelected;\n    if (initialSelected && !(((_initialSelected = initialSelected) === null || _initialSelected === void 0 ? void 0 : _initialSelected.itemIndex) > 0)) {\n      // filter nullish values\n      initialSelected = mutableRef.current.initialSelected = null;\n    }\n    if ((_initialSelected2 = initialSelected) !== null && _initialSelected2 !== void 0 && _initialSelected2.itemIndex) {\n      var _initialSelected3;\n      var initialSelectedItem = wrapperRef.current.children[((_initialSelected3 = initialSelected) === null || _initialSelected3 === void 0 ? void 0 : _initialSelected3.itemIndex) - 1];\n      if (initialSelectedItem !== null && initialSelectedItem !== void 0 && initialSelectedItem.dataset.index) {\n        mutableRef.current.focusedItem = initialSelectedItem;\n        mutableRef.current.lastMouseClientX = (0, _pointer.getLastPointerPosition)().x;\n        startEditing(initialSelectedItem);\n        (0, _pointer.setPointerMode)(false);\n        _spotlight[\"default\"].focus(initialSelectedItem.children[1]);\n      }\n    }\n    iconItemList.forEach(function (iconItemWrapper, index) {\n      if (iconItemWrapper !== null && iconItemWrapper !== void 0 && iconItemWrapper.children[1]) {\n        if (initialSelected && initialSelected.itemIndex - 1 === index) {\n          iconItemWrapper.children[1].ariaLabel += \" \".concat((0, _$L[\"default\"])('Press the left/right button to move or press the up button to select other options.'));\n        } else {\n          iconItemWrapper.children[1].ariaLabel += \" \".concat((0, _$L[\"default\"])('Press the OK button to move or press the up button to select other options.'));\n        }\n      }\n    });\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return /*#__PURE__*/(0, _jsxRuntime.jsxs)(TouchableDiv, {\n    holdConfig: holdConfig,\n    className: (0, _classnames[\"default\"])(mergedCss.wrapper, _defineProperty({}, mergedCss.centered, centered)),\n    onClickCapture: handleClickCapture,\n    onHoldStart: handleHoldStart,\n    onKeyDownCapture: handleKeyDownCapture,\n    onKeyUpCapture: handleKeyUpCapture,\n    onMouseDown: handleMouseDown,\n    onMouseMove: handleMouseMove,\n    onDragStart: handleDragStart,\n    onTouchEnd: handleTouchEnd,\n    ref: wrapperRef,\n    children: [children, /*#__PURE__*/(0, _jsxRuntime.jsx)(_AnnounceDecorator.Announce, {\n      ref: announceRef\n    }, \"editable-wrapper-announce\")]\n  });\n};\nEditableWrapper.displayName = 'EditableWrapper';\nEditableWrapper.propTypes = /** @lends sandstone/Scroller.EditableWrapper.prototype */{\n  /**\n   * Enables editing items in the scroller.\n   * You can specify props for editable scroller as an object.\n   * See the datails in {@link sandstone/Scroller.EditableShape|EditableShape}\n   *\n   * @type {sandstone/Scroller.EditableShape}\n   * @public\n   */\n  editable: EditableShape,\n  /**\n   * Obtains a reference to the scroll container handle.\n   *\n   * @type {Function|Object}\n   * @public\n   */\n  scrollContainerHandle: _propTypes[\"default\"].ref,\n  /**\n   * Obtains a reference to the scroll container node.\n   *\n   * @type {Function|Object}\n   * @public\n   */\n  scrollContainerRef: _propTypes[\"default\"].ref,\n  /**\n   * Obtains a reference to the scroll content node.\n   *\n   * @type {Function|Object}\n   * @public\n   */\n  scrollContentRef: _propTypes[\"default\"].ref\n};\nvar _default = exports[\"default\"] = EditableWrapper;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}