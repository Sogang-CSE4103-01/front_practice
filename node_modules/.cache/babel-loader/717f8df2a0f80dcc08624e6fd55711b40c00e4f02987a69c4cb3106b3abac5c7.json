{"ast":null,"code":"var _jsxFileName = \"/Users/meogyu/connected_front/src/views/VideoPlayer.js\";\n// src/views/VideoPlayer.js\nimport kind from '@enact/core/kind';\nimport Button from '@enact/sandstone/Button';\nimport { MediaControls } from '@enact/sandstone/MediaPlayer';\nimport VideoPlayer from '@enact/sandstone/VideoPlayer';\nimport { useCallback, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SelectableVideoPlayer = _ref => {\n  let {\n    video,\n    onClose\n  } = _ref;\n  const videoRef = useRef(null);\n  const [selection, setSelection] = useState([]);\n  const handleToggleSelection = useCallback(() => {\n    const {\n      currentTime\n    } = videoRef.current.getMediaState();\n    if (selection.length !== 1) {\n      setSelection([currentTime]);\n    } else {\n      setSelection([selection[0], currentTime].sort((a, b) => a - b));\n    }\n  }, [selection]);\n  const handleTimeUpdate = useCallback(() => {\n    if (selection.length === 2) {\n      const [selectionStart, selectionEnd] = selection;\n      const {\n        currentTime\n      } = videoRef.current.getMediaState();\n      if (currentTime > selectionEnd || currentTime < selectionStart) {\n        videoRef.current.seek(selectionStart);\n      }\n    }\n  }, [selection]);\n  const handleSeekOutsideSelection = useCallback(ev => {\n    ev.preventDefault();\n    if (selection.length === 2) {\n      const [selectionStart, selectionEnd] = selection;\n      const {\n        time: currentTime\n      } = ev;\n      if (currentTime < selectionStart) {\n        videoRef.current.seek(selectionStart);\n      } else if (currentTime > selectionEnd) {\n        videoRef.current.seek(selectionEnd);\n      }\n    }\n  }, [selection]);\n  const setVideo = video => {\n    videoRef.current = video;\n  };\n  const selecting = selection.length === 1;\n  return /*#__PURE__*/_jsxDEV(VideoPlayer, {\n    loop: true,\n    onSeekOutsideSelection: handleSeekOutsideSelection,\n    onTimeUpdate: handleTimeUpdate,\n    selection: selection,\n    ref: setVideo,\n    children: [/*#__PURE__*/_jsxDEV(MediaControls, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleToggleSelection,\n        selected: selecting,\n        children: selecting ? 'Play Loop' : 'Set End Time'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: onClose,\n        children: \"\\uB2EB\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"source\", {\n      src: video.src\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\nexport default SelectableVideoPlayer;","map":{"version":3,"names":["kind","Button","MediaControls","VideoPlayer","useCallback","useRef","useState","jsxDEV","_jsxDEV","SelectableVideoPlayer","_ref","video","onClose","videoRef","selection","setSelection","handleToggleSelection","currentTime","current","getMediaState","length","sort","a","b","handleTimeUpdate","selectionStart","selectionEnd","seek","handleSeekOutsideSelection","ev","preventDefault","time","setVideo","selecting","loop","onSeekOutsideSelection","onTimeUpdate","ref","children","onClick","selected","fileName","_jsxFileName","lineNumber","columnNumber","src"],"sources":["/Users/meogyu/connected_front/src/views/VideoPlayer.js"],"sourcesContent":["// src/views/VideoPlayer.js\nimport kind from '@enact/core/kind';\nimport Button from '@enact/sandstone/Button';\nimport { MediaControls } from '@enact/sandstone/MediaPlayer';\nimport VideoPlayer from '@enact/sandstone/VideoPlayer';\nimport { useCallback, useRef, useState } from 'react';\n\nconst SelectableVideoPlayer = ({ video, onClose }) => {\n    const videoRef = useRef(null);\n    const [selection, setSelection] = useState([]);\n\n    const handleToggleSelection = useCallback(() => {\n        const { currentTime } = videoRef.current.getMediaState();\n\n        if (selection.length !== 1) {\n            setSelection([currentTime]);\n        } else {\n            setSelection([selection[0], currentTime].sort((a, b) => a - b));\n        }\n    }, [selection]);\n\n    const handleTimeUpdate = useCallback(() => {\n        if (selection.length === 2) {\n            const [selectionStart, selectionEnd] = selection;\n            const { currentTime } = videoRef.current.getMediaState();\n\n            if (currentTime > selectionEnd || currentTime < selectionStart) {\n                videoRef.current.seek(selectionStart);\n            }\n        }\n    }, [selection]);\n\n    const handleSeekOutsideSelection = useCallback((ev) => {\n        ev.preventDefault();\n\n        if (selection.length === 2) {\n            const [selectionStart, selectionEnd] = selection;\n            const { time: currentTime } = ev;\n\n            if (currentTime < selectionStart) {\n                videoRef.current.seek(selectionStart);\n            } else if (currentTime > selectionEnd) {\n                videoRef.current.seek(selectionEnd);\n            }\n        }\n    }, [selection]);\n\n    const setVideo = (video) => {\n        videoRef.current = video;\n    };\n\n    const selecting = selection.length === 1;\n\n    return (\n        <VideoPlayer\n            loop\n            onSeekOutsideSelection={handleSeekOutsideSelection}\n            onTimeUpdate={handleTimeUpdate}\n            selection={selection}\n            ref={setVideo}\n        >\n            <MediaControls>\n                <Button onClick={handleToggleSelection} selected={selecting}>\n                    {selecting ? 'Play Loop' : 'Set End Time'}\n                </Button>\n                <Button onClick={onClose}>닫기</Button>\n            </MediaControls>\n            <source src={video.src} />\n        </VideoPlayer>\n    );\n};\n\nexport default SelectableVideoPlayer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}