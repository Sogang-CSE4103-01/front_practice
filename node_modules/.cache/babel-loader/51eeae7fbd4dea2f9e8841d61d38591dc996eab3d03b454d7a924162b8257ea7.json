{"ast":null,"code":"var _jsxFileName = \"/Users/meogyu/connected_front/src/views/Main.js\";\nimport kind from '@enact/core/kind';\nimport Button from '@enact/sandstone/Button';\nimport { MediaControls } from '@enact/sandstone/MediaPlayer';\nimport VideoPlayer from '@enact/sandstone/VideoPlayer';\nimport { useCallback, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SelectableVideoPlayer = props => {\n  const videoRef = useRef(null);\n  const [selection, setSelection] = useState([]);\n  const handleToggleSelection = useCallback(() => {\n    const {\n      currentTime\n    } = videoRef.current.getMediaState();\n    if (selection.length !== 1) {\n      setSelection([currentTime]);\n    } else {\n      setSelection([selection[0], currentTime].sort((a, b) => a - b));\n    }\n  }, [selection]);\n  const handleTimeUpdate = useCallback(() => {\n    if (selection.length === 2) {\n      const [selectionStart, selectionEnd] = selection;\n      const {\n        currentTime\n      } = videoRef.current.getMediaState();\n      if (currentTime > selectionEnd || currentTime < selectionStart) {\n        // Seek to starting position if current time is out of selection during playback\n        videoRef.current.seek(selectionStart);\n      }\n    }\n  }, [selection]);\n  const handleSeekOutsideSelection = useCallback(ev => {\n    // prevent the action and seek to the beginning or end\n    ev.preventDefault();\n    if (selection.length === 2) {\n      const [selectionStart, selectionEnd] = selection;\n      const {\n        time: currentTime\n      } = ev;\n\n      // Seek to nearest selection position among starting and ending if current time is out of selection\n      if (currentTime < selectionStart) {\n        videoRef.current.seek(selectionStart);\n      } else if (currentTime > selectionEnd) {\n        // If a video is playing, position will be moved to starting point by handleTimeUpdate().\n        // If a video is paused, position will remain at ending position.\n        videoRef.current.seek(selectionEnd);\n      }\n    }\n  }, [selection]);\n  const setVideo = video => {\n    videoRef.current = video;\n  };\n  const selecting = selection.length === 1;\n  return /*#__PURE__*/_jsxDEV(VideoPlayer, {\n    ...props,\n    loop: true,\n    onSeekOutsideSelection: handleSeekOutsideSelection,\n    onTimeUpdate: handleTimeUpdate,\n    selection: selection,\n    ref: setVideo,\n    children: [/*#__PURE__*/_jsxDEV(MediaControls, {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleToggleSelection,\n        selected: selecting,\n        children: selecting ? 'Play Loop' : 'Set End Time'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"source\", {\n      src: \"http://media.w3.org/2010/05/video/movie_300.mp4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 3\n  }, this);\n};\nconst MainPanel = kind({\n  name: 'MainPanel',\n  render: () => /*#__PURE__*/_jsxDEV(SelectableVideoPlayer, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 3\n  }, this)\n});\nexport default MainPanel;","map":{"version":3,"names":["kind","Button","MediaControls","VideoPlayer","useCallback","useRef","useState","jsxDEV","_jsxDEV","SelectableVideoPlayer","props","videoRef","selection","setSelection","handleToggleSelection","currentTime","current","getMediaState","length","sort","a","b","handleTimeUpdate","selectionStart","selectionEnd","seek","handleSeekOutsideSelection","ev","preventDefault","time","setVideo","video","selecting","loop","onSeekOutsideSelection","onTimeUpdate","ref","children","onClick","selected","fileName","_jsxFileName","lineNumber","columnNumber","src","MainPanel","name","render"],"sources":["/Users/meogyu/connected_front/src/views/Main.js"],"sourcesContent":["import kind from '@enact/core/kind';\nimport Button from '@enact/sandstone/Button';\nimport {MediaControls} from '@enact/sandstone/MediaPlayer';\nimport VideoPlayer from '@enact/sandstone/VideoPlayer';\nimport {useCallback, useRef, useState} from 'react';\n\nconst SelectableVideoPlayer = (props) => {\n\tconst videoRef = useRef(null);\n\n\tconst [selection, setSelection] = useState([]);\n\n\tconst handleToggleSelection = useCallback(() => {\n\t\tconst {currentTime} = videoRef.current.getMediaState();\n\n\t\tif (selection.length !== 1) {\n\t\t\tsetSelection([currentTime]);\n\t\t} else {\n\t\t\tsetSelection([selection[0], currentTime].sort((a, b) => a - b));\n\t\t}\n\t}, [selection]);\n\n\tconst handleTimeUpdate = useCallback(() => {\n\t\tif (selection.length === 2) {\n\t\t\tconst [selectionStart, selectionEnd] = selection;\n\t\t\tconst {currentTime} = videoRef.current.getMediaState();\n\n\t\t\tif (currentTime > selectionEnd || currentTime < selectionStart) {\n\t\t\t\t// Seek to starting position if current time is out of selection during playback\n\t\t\t\tvideoRef.current.seek(selectionStart);\n\t\t\t}\n\t\t}\n\t}, [selection]);\n\n\tconst handleSeekOutsideSelection = useCallback((ev) => {\n\t\t// prevent the action and seek to the beginning or end\n\t\tev.preventDefault();\n\n\t\tif (selection.length === 2) {\n\t\t\tconst [selectionStart, selectionEnd] = selection;\n\t\t\tconst {time: currentTime} = ev;\n\n\t\t\t// Seek to nearest selection position among starting and ending if current time is out of selection\n\t\t\tif (currentTime < selectionStart) {\n\t\t\t\tvideoRef.current.seek(selectionStart);\n\t\t\t} else if (currentTime > selectionEnd) {\n\t\t\t\t// If a video is playing, position will be moved to starting point by handleTimeUpdate().\n\t\t\t\t// If a video is paused, position will remain at ending position.\n\t\t\t\tvideoRef.current.seek(selectionEnd);\n\t\t\t}\n\t\t}\n\t}, [selection]);\n\n\tconst setVideo = (video) => {\n\t\tvideoRef.current = video;\n\t};\n\n\tconst selecting = selection.length === 1;\n\n\treturn (\n\t\t<VideoPlayer\n\t\t\t{...props}\n\t\t\tloop\n\t\t\tonSeekOutsideSelection={handleSeekOutsideSelection}\n\t\t\tonTimeUpdate={handleTimeUpdate}\n\t\t\tselection={selection}\n\t\t\tref={setVideo}\n\t\t>\n\t\t\t<MediaControls>\n\t\t\t\t<Button onClick={handleToggleSelection} selected={selecting}>{selecting ? 'Play Loop' : 'Set End Time'}</Button>\n\t\t\t</MediaControls>\n\t\t\t<source src=\"http://media.w3.org/2010/05/video/movie_300.mp4\" />\n\t\t</VideoPlayer>\n\t);\n\n};\n\nconst MainPanel = kind({\n\tname: 'MainPanel',\n\n\trender: () => (\n\t\t<SelectableVideoPlayer />\n\t)\n});\n\nexport default MainPanel;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}