{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.readAlert = exports[\"default\"] = void 0;\nvar _LS2Request = _interopRequireDefault(require(\"../LS2Request\"));\nvar _platform = require(\"../platform\");\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n/* eslint-disable no-console */\n\nvar audioGuidanceEnabled = null;\nvar checkAudioGuidance = function checkAudioGuidance() {\n  return new Promise(function (resolve, reject) {\n    if (audioGuidanceEnabled === null) {\n      new _LS2Request[\"default\"]().send({\n        service: 'luna://com.webos.settingsservice',\n        method: 'getSystemSettings',\n        subscribe: true,\n        parameters: {\n          'keys': ['audioGuidance'],\n          'category': 'option'\n        },\n        onSuccess: function onSuccess(res) {\n          if (res && res.settings.audioGuidance === 'on') {\n            audioGuidanceEnabled = true;\n            resolve();\n            return;\n          }\n          audioGuidanceEnabled = false;\n          reject();\n        },\n        onFailure: function onFailure(err) {\n          reject('Failed to get system AudioGuidance settings: ' + JSON.stringify(err));\n        }\n      });\n    } else if (audioGuidanceEnabled) {\n      resolve();\n    } else {\n      reject();\n    }\n  });\n};\nvar readAlertMessage = function readAlertMessage(string, clear) {\n  return function () {\n    return new Promise(function (resolve, reject) {\n      new _LS2Request[\"default\"]().send({\n        service: 'luna://com.webos.service.tts',\n        method: 'speak',\n        parameters: {\n          'text': string,\n          'clear': clear\n        },\n        onSuccess: resolve,\n        onFailure: function onFailure(err) {\n          reject('Failed to readAlertMessage: ' + JSON.stringify(err));\n        }\n      });\n    });\n  };\n};\n\n/**\n * Read alert text when accessibility audio guidance is enabled.\n *\n * @function\n * @param {String} string String to voice readout\n * @param {Boolean} [clear=true] Clear option for TTS. If true, it will cut off previous reading.\n * @returns {undefined}\n * @memberof webos/speech\n * @public\n */\nvar readAlert = exports.readAlert = function readAlert(string) {\n  var clear = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  if (_platform.platform.tv) {\n    checkAudioGuidance().then(readAlertMessage(string, clear))[\"catch\"](function (message) {\n      if (message) {\n        console.error(\"Failed to readAlert: \".concat(message));\n      }\n    });\n  } else {\n    console.warn('Platform doesn\\'t support TTS api.');\n  }\n};\nvar _default = exports[\"default\"] = readAlert;","map":{"version":3,"names":["Object","defineProperty","exports","value","readAlert","_LS2Request","_interopRequireDefault","require","_platform","obj","__esModule","audioGuidanceEnabled","checkAudioGuidance","Promise","resolve","reject","send","service","method","subscribe","parameters","onSuccess","res","settings","audioGuidance","onFailure","err","JSON","stringify","readAlertMessage","string","clear","arguments","length","undefined","platform","tv","then","message","console","error","concat","warn","_default"],"sources":["/Users/meogyu/connected_front/node_modules/@enact/webos/speech/readAlert.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.readAlert = exports[\"default\"] = void 0;\nvar _LS2Request = _interopRequireDefault(require(\"../LS2Request\"));\nvar _platform = require(\"../platform\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n/* eslint-disable no-console */\n\nvar audioGuidanceEnabled = null;\nvar checkAudioGuidance = function checkAudioGuidance() {\n  return new Promise(function (resolve, reject) {\n    if (audioGuidanceEnabled === null) {\n      new _LS2Request[\"default\"]().send({\n        service: 'luna://com.webos.settingsservice',\n        method: 'getSystemSettings',\n        subscribe: true,\n        parameters: {\n          'keys': ['audioGuidance'],\n          'category': 'option'\n        },\n        onSuccess: function onSuccess(res) {\n          if (res && res.settings.audioGuidance === 'on') {\n            audioGuidanceEnabled = true;\n            resolve();\n            return;\n          }\n          audioGuidanceEnabled = false;\n          reject();\n        },\n        onFailure: function onFailure(err) {\n          reject('Failed to get system AudioGuidance settings: ' + JSON.stringify(err));\n        }\n      });\n    } else if (audioGuidanceEnabled) {\n      resolve();\n    } else {\n      reject();\n    }\n  });\n};\nvar readAlertMessage = function readAlertMessage(string, clear) {\n  return function () {\n    return new Promise(function (resolve, reject) {\n      new _LS2Request[\"default\"]().send({\n        service: 'luna://com.webos.service.tts',\n        method: 'speak',\n        parameters: {\n          'text': string,\n          'clear': clear\n        },\n        onSuccess: resolve,\n        onFailure: function onFailure(err) {\n          reject('Failed to readAlertMessage: ' + JSON.stringify(err));\n        }\n      });\n    });\n  };\n};\n\n/**\n * Read alert text when accessibility audio guidance is enabled.\n *\n * @function\n * @param {String} string String to voice readout\n * @param {Boolean} [clear=true] Clear option for TTS. If true, it will cut off previous reading.\n * @returns {undefined}\n * @memberof webos/speech\n * @public\n */\nvar readAlert = exports.readAlert = function readAlert(string) {\n  var clear = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  if (_platform.platform.tv) {\n    checkAudioGuidance().then(readAlertMessage(string, clear))[\"catch\"](function (message) {\n      if (message) {\n        console.error(\"Failed to readAlert: \".concat(message));\n      }\n    });\n  } else {\n    console.warn('Platform doesn\\'t support TTS api.');\n  }\n};\nvar _default = exports[\"default\"] = readAlert;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}