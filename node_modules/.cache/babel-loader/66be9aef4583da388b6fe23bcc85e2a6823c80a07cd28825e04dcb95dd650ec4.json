{"ast":null,"code":"// src/App/AppState.js\nimport { useCallback, useEffect } from 'react';\nimport * as domEvents from '../constants/domEvents';\nimport debugLog from '../libs/log';\nimport { closeApp, isTVBrowser, reload } from '../libs/utils';\nimport { useProcStat } from '../hooks/useData';\nconst useVisibleChangeHandler = () => useCallback(() => {\n  const {\n    hidden\n  } = document;\n  debugLog('VISIBILITY_CHANGE', {\n    hidden\n  });\n}, []);\nconst useLocaleChangeHandler = () => useCallback(() => {\n  debugLog('LOCALE_CHANGE', {});\n  reload();\n}, []);\nconst useHighContrastChangeHandler = setSkinVariants => useCallback(() => {\n  debugLog('HIGH_CONTRAST_CHANGE', {});\n  setSkinVariants({\n    highContrast: window.webOSSystem.highContrast === 'on'\n  });\n}, [setSkinVariants]);\nexport const useBackHandler = () => useCallback(() => {\n  debugLog('BACK[I]', {});\n}, []);\nexport const useCloseHandler = () => useCallback(() => {\n  debugLog('CLOSE_X[I]', {});\n  closeApp();\n}, []);\n\n// Add all document events here\nexport const useDocumentEvent = setSkinVariants => {\n  const handleVisibilitychange = useVisibleChangeHandler();\n  const handleHighContrastChange = useHighContrastChangeHandler(setSkinVariants);\n  const handleLocaleChange = useLocaleChangeHandler();\n  useEffect(() => {\n    const events = {\n      [domEvents.VISIBILITY_CHANGE]: handleVisibilitychange,\n      [domEvents.WEBOS_HIHG_CONTRAST_CHANGE]: handleHighContrastChange,\n      [domEvents.WEBOS_LOCALE_CHANGE]: handleLocaleChange\n    };\n    if (isTVBrowser()) {\n      for (const event in events) {\n        document.addEventListener(event, events[event]);\n      }\n    }\n    return () => {\n      if (isTVBrowser()) {\n        for (const event in events) {\n          document.removeEventListener(event, events[event]);\n        }\n      }\n    };\n  }, [handleVisibilitychange, handleHighContrastChange, handleLocaleChange]);\n};\n\n// Add functions to subscribe luna APIs for general usage here\nexport const useSubscriptions = () => {\n  useProcStat();\n};","map":{"version":3,"names":["useCallback","useEffect","domEvents","debugLog","closeApp","isTVBrowser","reload","useProcStat","useVisibleChangeHandler","hidden","document","useLocaleChangeHandler","useHighContrastChangeHandler","setSkinVariants","highContrast","window","webOSSystem","useBackHandler","useCloseHandler","useDocumentEvent","handleVisibilitychange","handleHighContrastChange","handleLocaleChange","events","VISIBILITY_CHANGE","WEBOS_HIHG_CONTRAST_CHANGE","WEBOS_LOCALE_CHANGE","event","addEventListener","removeEventListener","useSubscriptions"],"sources":["/Users/meogyu/connected_front/src/App/AppState.js"],"sourcesContent":["// src/App/AppState.js\nimport { useCallback, useEffect } from 'react';\nimport * as domEvents from '../constants/domEvents';\nimport debugLog from '../libs/log';\nimport { closeApp, isTVBrowser, reload } from '../libs/utils';\nimport { useProcStat } from '../hooks/useData';\n\nconst useVisibleChangeHandler = () =>\n    useCallback(() => {\n        const { hidden } = document;\n        debugLog('VISIBILITY_CHANGE', { hidden });\n    }, []);\n\nconst useLocaleChangeHandler = () =>\n    useCallback(() => {\n        debugLog('LOCALE_CHANGE', {});\n        reload();\n    }, []);\n\nconst useHighContrastChangeHandler = setSkinVariants =>\n    useCallback(() => {\n        debugLog('HIGH_CONTRAST_CHANGE', {});\n        setSkinVariants({\n            highContrast: window.webOSSystem.highContrast === 'on'\n        });\n    }, [setSkinVariants]);\n\nexport const useBackHandler = () =>\n    useCallback(() => {\n        debugLog('BACK[I]', {});\n    }, []);\n\nexport const useCloseHandler = () =>\n    useCallback(() => {\n        debugLog('CLOSE_X[I]', {});\n        closeApp();\n    }, []);\n\n// Add all document events here\nexport const useDocumentEvent = setSkinVariants => {\n    const handleVisibilitychange = useVisibleChangeHandler();\n    const handleHighContrastChange = useHighContrastChangeHandler(setSkinVariants);\n    const handleLocaleChange = useLocaleChangeHandler();\n\n    useEffect(() => {\n        const events = {\n            [domEvents.VISIBILITY_CHANGE]: handleVisibilitychange,\n            [domEvents.WEBOS_HIHG_CONTRAST_CHANGE]: handleHighContrastChange,\n            [domEvents.WEBOS_LOCALE_CHANGE]: handleLocaleChange\n        };\n\n        if (isTVBrowser()) {\n            for (const event in events) {\n                document.addEventListener(event, events[event]);\n            }\n        }\n\n        return () => {\n            if (isTVBrowser()) {\n                for (const event in events) {\n                    document.removeEventListener(event, events[event]);\n                }\n            }\n        };\n    }, [handleVisibilitychange, handleHighContrastChange, handleLocaleChange]);\n};\n\n// Add functions to subscribe luna APIs for general usage here\nexport const useSubscriptions = () => {\n    useProcStat();\n};\n"],"mappings":"AAAA;AACA,SAASA,WAAW,EAAEC,SAAS,QAAQ,OAAO;AAC9C,OAAO,KAAKC,SAAS,MAAM,wBAAwB;AACnD,OAAOC,QAAQ,MAAM,aAAa;AAClC,SAASC,QAAQ,EAAEC,WAAW,EAAEC,MAAM,QAAQ,eAAe;AAC7D,SAASC,WAAW,QAAQ,kBAAkB;AAE9C,MAAMC,uBAAuB,GAAGA,CAAA,KAC5BR,WAAW,CAAC,MAAM;EACd,MAAM;IAAES;EAAO,CAAC,GAAGC,QAAQ;EAC3BP,QAAQ,CAAC,mBAAmB,EAAE;IAAEM;EAAO,CAAC,CAAC;AAC7C,CAAC,EAAE,EAAE,CAAC;AAEV,MAAME,sBAAsB,GAAGA,CAAA,KAC3BX,WAAW,CAAC,MAAM;EACdG,QAAQ,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;EAC7BG,MAAM,CAAC,CAAC;AACZ,CAAC,EAAE,EAAE,CAAC;AAEV,MAAMM,4BAA4B,GAAGC,eAAe,IAChDb,WAAW,CAAC,MAAM;EACdG,QAAQ,CAAC,sBAAsB,EAAE,CAAC,CAAC,CAAC;EACpCU,eAAe,CAAC;IACZC,YAAY,EAAEC,MAAM,CAACC,WAAW,CAACF,YAAY,KAAK;EACtD,CAAC,CAAC;AACN,CAAC,EAAE,CAACD,eAAe,CAAC,CAAC;AAEzB,OAAO,MAAMI,cAAc,GAAGA,CAAA,KAC1BjB,WAAW,CAAC,MAAM;EACdG,QAAQ,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;AAC3B,CAAC,EAAE,EAAE,CAAC;AAEV,OAAO,MAAMe,eAAe,GAAGA,CAAA,KAC3BlB,WAAW,CAAC,MAAM;EACdG,QAAQ,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;EAC1BC,QAAQ,CAAC,CAAC;AACd,CAAC,EAAE,EAAE,CAAC;;AAEV;AACA,OAAO,MAAMe,gBAAgB,GAAGN,eAAe,IAAI;EAC/C,MAAMO,sBAAsB,GAAGZ,uBAAuB,CAAC,CAAC;EACxD,MAAMa,wBAAwB,GAAGT,4BAA4B,CAACC,eAAe,CAAC;EAC9E,MAAMS,kBAAkB,GAAGX,sBAAsB,CAAC,CAAC;EAEnDV,SAAS,CAAC,MAAM;IACZ,MAAMsB,MAAM,GAAG;MACX,CAACrB,SAAS,CAACsB,iBAAiB,GAAGJ,sBAAsB;MACrD,CAAClB,SAAS,CAACuB,0BAA0B,GAAGJ,wBAAwB;MAChE,CAACnB,SAAS,CAACwB,mBAAmB,GAAGJ;IACrC,CAAC;IAED,IAAIjB,WAAW,CAAC,CAAC,EAAE;MACf,KAAK,MAAMsB,KAAK,IAAIJ,MAAM,EAAE;QACxBb,QAAQ,CAACkB,gBAAgB,CAACD,KAAK,EAAEJ,MAAM,CAACI,KAAK,CAAC,CAAC;MACnD;IACJ;IAEA,OAAO,MAAM;MACT,IAAItB,WAAW,CAAC,CAAC,EAAE;QACf,KAAK,MAAMsB,KAAK,IAAIJ,MAAM,EAAE;UACxBb,QAAQ,CAACmB,mBAAmB,CAACF,KAAK,EAAEJ,MAAM,CAACI,KAAK,CAAC,CAAC;QACtD;MACJ;IACJ,CAAC;EACL,CAAC,EAAE,CAACP,sBAAsB,EAAEC,wBAAwB,EAAEC,kBAAkB,CAAC,CAAC;AAC9E,CAAC;;AAED;AACA,OAAO,MAAMQ,gBAAgB,GAAGA,CAAA,KAAM;EAClCvB,WAAW,CAAC,CAAC;AACjB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}