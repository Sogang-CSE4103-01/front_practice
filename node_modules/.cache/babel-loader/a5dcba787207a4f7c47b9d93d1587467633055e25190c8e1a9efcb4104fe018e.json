{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.TransitionGroup = void 0;\nvar _propTypes = _interopRequireDefault(require(\"@enact/core/internal/prop-types\"));\nvar _handle = require(\"@enact/core/handle\");\nvar _propTypes2 = _interopRequireDefault(require(\"prop-types\"));\nvar _eqBy = _interopRequireDefault(require(\"ramda/src/eqBy\"));\nvar _findIndex = _interopRequireDefault(require(\"ramda/src/findIndex\"));\nvar _identity = _interopRequireDefault(require(\"ramda/src/identity\"));\nvar _prop = _interopRequireDefault(require(\"ramda/src/prop\"));\nvar _propEq = _interopRequireDefault(require(\"ramda/src/propEq\"));\nvar _remove = _interopRequireDefault(require(\"ramda/src/remove\"));\nvar _unionWith = _interopRequireDefault(require(\"ramda/src/unionWith\"));\nvar _useWith = _interopRequireDefault(require(\"ramda/src/useWith\"));\nvar _react = require(\"react\");\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : String(i);\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return _assertThisInitialized(self);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n} /*\n  * Exports the {@link ui/ViewManager.TransitionGroup} component.\n  */ // Using string refs from the source code of ReactTransitionGroup\n/**\n * Returns the index of a child in an array found by `key` matching\n *\n * @param {Object} child React element to find\n * @param {Object[]} children Array of React elements\n * @returns {Number} Index of child\n * @method\n * @private\n */ // eslint-disable-next-line react-hooks/rules-of-hooks\nvar indexOfChild = (0, _useWith[\"default\"])(_findIndex[\"default\"], [(0, _propEq[\"default\"])('key'), _identity[\"default\"]]);\n\n/**\n * Returns an array of non-null children\n *\n * @param  {Object[]} children Array of React children\n *\n * @returns {Object[]}          Array of children\n * @private\n */\nvar mapChildren = function mapChildren(children) {\n  var result = children && _react.Children.toArray(children);\n  return result ? result.filter(function (c) {\n    return !!c;\n  }) : [];\n};\n\n/**\n * Merges two arrays of children without any duplicates (by `key`)\n *\n * @param {Object[]} a Set of children\n * @param {Object[]} b Set of children\n * @returns {Object[]} Merged set of children\n * @method\n * @private\n */\nvar mergeChildren = (0, _unionWith[\"default\"])((0, _eqBy[\"default\"])((0, _prop[\"default\"])('key')));\n\n// Cached event forwarders\nvar forwardOnAppear = (0, _handle.forward)('onAppear');\nvar forwardOnEnter = (0, _handle.forward)('onEnter');\nvar forwardOnLeave = (0, _handle.forward)('onLeave');\nvar forwardOnStay = (0, _handle.forward)('onStay');\n\n/**\n * Manages the transition of added and removed child components. Children that are added are\n * transitioned in and those removed are transition out via optional callbacks on the child.\n *\n * Ported from [ReactTransitionGroup]\n * (https://facebook.github.io/react/docs/animation.html#low-level-api-reacttransitiongroup).\n * Currently somewhat specialized for the purposes of ViewManager.\n *\n * @class TransitionGroup\n * @memberof ui/ViewManager\n * @private\n */\nvar TransitionGroup = exports.TransitionGroup = /*#__PURE__*/function (_Component) {\n  _inherits(TransitionGroup, _Component);\n  var _super = _createSuper(TransitionGroup);\n  function TransitionGroup(props) {\n    var _this;\n    _classCallCheck(this, TransitionGroup);\n    _this = _super.call(this, props);\n    _this.performAppear = function (key) {\n      _this.currentlyTransitioningKeys[key] = true;\n      var component = _this.groupRefs[key];\n      if (component.componentWillAppear) {\n        component.componentWillAppear(_this._handleDoneAppearing.bind(_assertThisInitialized(_this), key));\n      } else {\n        _this._handleDoneAppearing(key);\n      }\n    };\n    _this._handleDoneAppearing = function (key) {\n      var component = _this.groupRefs[key];\n      if (component.componentDidAppear) {\n        component.componentDidAppear();\n      }\n      forwardOnAppear({\n        type: 'onAppear',\n        view: component\n      }, _this.props);\n      _this.completeTransition({\n        key: key,\n        noForwarding: true\n      });\n      var currentChildMapping = mapChildren(_this.props.children);\n      if (!currentChildMapping || !currentChildMapping.find(function (child) {\n        return child.key === key;\n      })) {\n        // This was removed before it had fully appeared. Remove it.\n        _this.performLeave(key);\n      }\n    };\n    _this.performEnter = function (key) {\n      _this.currentlyTransitioningKeys[key] = true;\n      var component = _this.groupRefs[key];\n      if (component.componentWillEnter) {\n        component.componentWillEnter(_this._handleDoneEntering.bind(_assertThisInitialized(_this), key));\n      } else {\n        _this._handleDoneEntering(key);\n      }\n    };\n    _this._handleDoneEntering = function (key) {\n      var component = _this.groupRefs[key];\n      if (component.componentDidEnter) {\n        component.componentDidEnter();\n      }\n      forwardOnEnter({\n        type: 'onEnter',\n        view: component\n      }, _this.props);\n      _this.completeTransition({\n        key: key\n      });\n    };\n    _this.performStay = function (key) {\n      var component = _this.groupRefs[key];\n      if (component.componentWillStay) {\n        component.componentWillStay(_this._handleDoneStaying.bind(_assertThisInitialized(_this), key));\n      } else {\n        _this._handleDoneStaying(key);\n      }\n    };\n    _this._handleDoneStaying = function (key) {\n      var component = _this.groupRefs[key];\n      if (component.componentDidStay) {\n        component.componentDidStay();\n      }\n      forwardOnStay({\n        type: 'onStay',\n        view: component\n      }, _this.props);\n    };\n    _this.performLeave = function (key) {\n      _this.currentlyTransitioningKeys[key] = true;\n      var component = _this.groupRefs[key];\n      if (component.componentWillLeave) {\n        component.componentWillLeave(_this._handleDoneLeaving.bind(_assertThisInitialized(_this), key));\n      } else {\n        // Note that this is somewhat dangerous b/c it calls setState()\n        // again, effectively mutating the component before all the work\n        // is done.\n        _this._handleDoneLeaving(key);\n      }\n    };\n    _this._handleDoneLeaving = function (key) {\n      var component = _this.groupRefs[key];\n      if (component.componentDidLeave) {\n        component.componentDidLeave();\n      }\n      forwardOnLeave({\n        type: 'onLeave',\n        view: component\n      }, _this.props);\n      _this.completeTransition({\n        key: key\n      });\n      _this.setState(function (state) {\n        var index = indexOfChild(key, state.children);\n        return {\n          children: (0, _remove[\"default\"])(index, 1, state.children)\n        };\n      });\n    };\n    _this.storeRefs = function (key) {\n      return function (node) {\n        _this.groupRefs[key] = node;\n      };\n    };\n    /* This code is the same as @enact/core/WithRef. */\n    _this.getNodeRef = function () {\n      var _refNode$parentElemen;\n      var refNode = _this.nodeRef.current;\n      var attributeSelector = \"[data-transitiongroup-id=\\\"\".concat(refNode.getAttribute('data-transitiongroup-target'), \"\\\"]\");\n      /* The intended code is to search for the referrer element via a single querySelector call. But unit tests cannot handle :has() properly.\n      const selector = `:scope ${attributeSelector}, :scope :has(${attributeSelector})`;\n      return refNode?.parentElement?.querySelector(selector) || null;\n      */\n      var targetNode = (refNode === null || refNode === void 0 || (_refNode$parentElemen = refNode.parentElement) === null || _refNode$parentElemen === void 0 ? void 0 : _refNode$parentElemen.querySelector(attributeSelector)) || null;\n      for (var current = targetNode; current; current = current.parentElement) {\n        var _current;\n        if (((_current = current) === null || _current === void 0 ? void 0 : _current.parentElement) === (refNode === null || refNode === void 0 ? void 0 : refNode.parentElement)) {\n          return current;\n        }\n      }\n    };\n    _this.state = {\n      firstRender: true,\n      children: []\n    };\n    _this.hasMounted = false;\n    _this.currentlyTransitioningKeys = {};\n    _this.keysToEnter = [];\n    _this.keysToLeave = [];\n    _this.keysToStay = [];\n    _this.groupRefs = {};\n    _this.nodeRef = /*#__PURE__*/(0, _react.createRef)();\n    _this.refNodeId = '#transition#group#';\n    return _this;\n  }\n  _createClass(TransitionGroup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      this.hasMounted = true;\n\n      // this isn't used by ViewManager or View at the moment but leaving it around for future\n      // flexibility\n      this.state.children.forEach(function (child) {\n        return _this2.performAppear(child.key);\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      this.reconcileUnmountedChildren(prevState.children, this.state.children);\n      this.reconcileChildren(prevState.activeChildren, this.state.activeChildren);\n    }\n  }, {\n    key: \"reconcileUnmountedChildren\",\n    value: function reconcileUnmountedChildren(prevChildMapping, nextChildMapping) {\n      var _this3 = this;\n      var nextChildKeys = nextChildMapping.map(function (c) {\n        return c.key;\n      });\n      var prevChildKeys = prevChildMapping.map(function (c) {\n        return c.key;\n      });\n\n      // `state.children` represents the mounted children. if a view change happens during a\n      // transition causing the View to be unmounted before it fires its callback, the\n      // currentlyTransitioningKeys map will be out of sync. To manage that, we check for keys\n      // that have fallen out of the `children` array and manually clean them up from the map.\n      prevChildKeys.filter(function (key) {\n        return !nextChildKeys.includes(key);\n      }).forEach(function (key) {\n        return _this3.completeTransition({\n          key: key\n        });\n      });\n    }\n  }, {\n    key: \"reconcileChildren\",\n    value: function reconcileChildren(prevActiveChildMapping, nextActiveChildMapping) {\n      var _this4 = this;\n      var size = this.props.size;\n      var nextChildKeys = nextActiveChildMapping.map(function (c) {\n        return c.key;\n      });\n      var prevChildKeys = prevActiveChildMapping.map(function (c) {\n        return c.key;\n      });\n      var droppedKeys = prevChildKeys.filter(function (key) {\n        return !nextChildKeys.includes(key);\n      });\n\n      // if children haven't changed, there's nothing to reconcile\n      if (prevActiveChildMapping.length === nextActiveChildMapping.length && droppedKeys.length === 0) {\n        return;\n      }\n\n      // remove any \"dropped\" children from the list of transitioning children\n      droppedKeys.forEach(function (key) {\n        return _this4.completeTransition({\n          key: key\n        });\n      });\n\n      // mark any new child as entering\n      nextChildKeys.forEach(function (key, index) {\n        var hasPrev = prevChildKeys.includes(key);\n        if (!hasPrev || _this4.currentlyTransitioningKeys[key]) {\n          // flag a view to enter if it's new (!hasPrev), or if it's not new (hasPrev) but is\n          // re-entering (is currently transitioning)\n          _this4.keysToEnter.push(key);\n        } else if (index < size - 1) {\n          // keep views that are less than size minus the \"transition out\" buffer\n          _this4.keysToStay.push(key);\n        } else {\n          // everything else is leaving\n          _this4.keysToLeave.push(key);\n        }\n      });\n\n      // mark any previous child not remaining as leaving\n      prevChildKeys.forEach(function (key) {\n        var hasNext = nextChildKeys.includes(key);\n        var isRendered = Boolean(_this4.groupRefs[key]);\n        // flag a view to leave if it isn't in the new set (!hasNext) and it exists (isRendered)\n        if (!hasNext && isRendered) {\n          _this4.keysToLeave.push(key);\n        }\n      });\n      if (this.keysToEnter.length || this.keysToLeave.length) {\n        (0, _handle.forwardCustom)('onWillTransition')(null, this.props);\n      }\n\n      // once the component has been updated, start the enter transition for new children,\n      var keysToEnter = this.keysToEnter;\n      this.keysToEnter = [];\n      keysToEnter.forEach(this.performEnter);\n\n      // ... the stay transition for any children remaining,\n      var keysToStay = this.keysToStay;\n      this.keysToStay = [];\n      keysToStay.forEach(this.performStay);\n\n      // ... and the leave transition for departing children\n      var keysToLeave = this.keysToLeave;\n      this.keysToLeave = [];\n      keysToLeave.forEach(this.performLeave);\n    }\n  }, {\n    key: \"completeTransition\",\n    value: function completeTransition(_ref) {\n      var key = _ref.key,\n        _ref$noForwarding = _ref.noForwarding,\n        noForwarding = _ref$noForwarding === void 0 ? false : _ref$noForwarding;\n      if (key in this.currentlyTransitioningKeys) {\n        delete this.currentlyTransitioningKeys[key];\n        if (!noForwarding && Object.keys(this.currentlyTransitioningKeys).length === 0) {\n          (0, _handle.forwardCustom)('onTransition')(null, this.props);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n      // support wrapping arbitrary children with a component that supports the necessary\n      // lifecycle methods to animate transitions\n      var childrenToRender = this.state.children.map(function (child, index) {\n        var isLeaving = child.props['data-index'] !== _this5.props.currentIndex && typeof child.props['data-index'] !== 'undefined';\n        return /*#__PURE__*/(0, _react.cloneElement)(_this5.props.childFactory(child), {\n          key: child.key,\n          ref: _this5.storeRefs(child.key),\n          leaving: isLeaving,\n          appearing: !_this5.hasMounted,\n          getParentRef: _this5.getNodeRef,\n          renderedIndex: index\n        });\n      });\n\n      // Do not forward TransitionGroup props to primitive DOM nodes\n      var props = Object.assign({}, this.props);\n      props.ref = this.props.componentRef;\n      props['data-transitiongroup-id'] = this.refNodeId;\n      delete props.childFactory;\n      delete props.component;\n      delete props.componentRef;\n      delete props.currentIndex;\n      delete props.onAppear;\n      delete props.onEnter;\n      delete props.onLeave;\n      delete props.onStay;\n      delete props.onTransition;\n      delete props.onWillTransition;\n      delete props.size;\n      return /*#__PURE__*/(0, _jsxRuntime.jsxs)(_jsxRuntime.Fragment, {\n        children: [/*#__PURE__*/(0, _react.createElement)(this.props.component, props, childrenToRender), /*#__PURE__*/(0, _jsxRuntime.jsx)(\"div\", {\n          \"data-transitiongroup-target\": this.refNodeId,\n          ref: this.nodeRef,\n          style: {\n            display: 'none'\n          }\n        })]\n      });\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var children = mapChildren(props.children).slice(0, props.size);\n      if (state.firstRender) {\n        return {\n          activeChildren: children,\n          children: children,\n          firstRender: false\n        };\n      }\n      return {\n        activeChildren: children,\n        children: mergeChildren(children, state.children).slice(0, props.size)\n      };\n    }\n  }]);\n  return TransitionGroup;\n}(_react.Component);\nTransitionGroup.propTypes = /** @lends ui/ViewManager.TransitionGroup.prototype */{\n  children: _propTypes2[\"default\"].node.isRequired,\n  /**\n   * Adapts children to be compatible with TransitionGroup\n   *\n   * @type {Function}\n   */\n  childFactory: _propTypes2[\"default\"].func,\n  /**\n   * Type of component wrapping the children.\n   *\n   * May be a DOM node or a custom React component.\n   *\n   * @type {String|Component}\n   * @default 'div'\n   */\n  component: _propTypes[\"default\"].renderable,\n  /**\n   * Called with a reference to {@link ui/ViewManager.TransitionGroup.component|component}\n   *\n   * @type {Object|Function}\n   * @private\n   */\n  componentRef: _propTypes[\"default\"].ref,\n  /**\n   * Current Index the ViewManager is on\n   *\n   * @type {Number}\n   */\n  currentIndex: _propTypes2[\"default\"].number,\n  /**\n   * Called when each view is rendered during initial construction.\n   *\n   * @type {Function}\n   */\n  onAppear: _propTypes2[\"default\"].func,\n  /**\n   * Called when each view completes its transition into the viewport.\n   *\n   * @type {Function}\n   */\n  onEnter: _propTypes2[\"default\"].func,\n  /**\n   * Called when each view completes its transition out of the viewport.\n   *\n   * @type {Function}\n   */\n  onLeave: _propTypes2[\"default\"].func,\n  /**\n   * Called when each view completes its transition within the viewport.\n   *\n   * @type {Function}\n   */\n  onStay: _propTypes2[\"default\"].func,\n  /**\n   * Called once when all views have completed their transition.\n   *\n   * @type {Function}\n   */\n  onTransition: _propTypes2[\"default\"].func,\n  /**\n   * Called once before views begin their transition.\n   *\n   * @type {Function}\n   */\n  onWillTransition: _propTypes2[\"default\"].func,\n  /**\n   * Maximum number of rendered children.\n   *\n   * Used to limit how many visible transitions are active at any time.\n   * A value of 1 would prevent any exit transitions whereas a value of 2,\n   * the default, would ensure that only 1 view is transitioning on and 1 view is\n   * transitioning off at a time.\n   *\n   * @type {Number}\n   * @default 2\n   */\n  size: _propTypes2[\"default\"].number\n};\nTransitionGroup.defaultProps = {\n  childFactory: _identity[\"default\"],\n  component: 'div',\n  size: 2\n};\nvar _default = exports[\"default\"] = TransitionGroup;","map":{"version":3,"names":["Object","defineProperty","exports","value","TransitionGroup","_propTypes","_interopRequireDefault","require","_handle","_propTypes2","_eqBy","_findIndex","_identity","_prop","_propEq","_remove","_unionWith","_useWith","_react","_jsxRuntime","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","_toPropertyKey","key","_createClass","protoProps","staticProps","prototype","t","_toPrimitive","String","r","e","Symbol","toPrimitive","call","Number","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","indexOfChild","mapChildren","children","Children","toArray","filter","c","mergeChildren","forwardOnAppear","forward","forwardOnEnter","forwardOnLeave","forwardOnStay","_Component","_super","_this","performAppear","currentlyTransitioningKeys","component","groupRefs","componentWillAppear","_handleDoneAppearing","componentDidAppear","type","view","completeTransition","noForwarding","currentChildMapping","find","child","performLeave","performEnter","componentWillEnter","_handleDoneEntering","componentDidEnter","performStay","componentWillStay","_handleDoneStaying","componentDidStay","componentWillLeave","_handleDoneLeaving","componentDidLeave","setState","state","index","storeRefs","node","getNodeRef","_refNode$parentElemen","refNode","nodeRef","current","attributeSelector","concat","getAttribute","targetNode","parentElement","querySelector","_current","firstRender","hasMounted","keysToEnter","keysToLeave","keysToStay","createRef","refNodeId","componentDidMount","_this2","forEach","componentDidUpdate","prevProps","prevState","reconcileUnmountedChildren","reconcileChildren","activeChildren","prevChildMapping","nextChildMapping","_this3","nextChildKeys","map","prevChildKeys","includes","prevActiveChildMapping","nextActiveChildMapping","_this4","size","droppedKeys","hasPrev","push","hasNext","isRendered","forwardCustom","_ref","_ref$noForwarding","keys","render","_this5","childrenToRender","isLeaving","currentIndex","cloneElement","childFactory","ref","leaving","appearing","getParentRef","renderedIndex","assign","componentRef","onAppear","onEnter","onLeave","onStay","onTransition","onWillTransition","jsxs","Fragment","createElement","jsx","style","display","getDerivedStateFromProps","slice","Component","propTypes","isRequired","func","renderable","number","defaultProps","_default"],"sources":["/Users/meogyu/connected_front/node_modules/@enact/ui/ViewManager/TransitionGroup.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.TransitionGroup = void 0;\nvar _propTypes = _interopRequireDefault(require(\"@enact/core/internal/prop-types\"));\nvar _handle = require(\"@enact/core/handle\");\nvar _propTypes2 = _interopRequireDefault(require(\"prop-types\"));\nvar _eqBy = _interopRequireDefault(require(\"ramda/src/eqBy\"));\nvar _findIndex = _interopRequireDefault(require(\"ramda/src/findIndex\"));\nvar _identity = _interopRequireDefault(require(\"ramda/src/identity\"));\nvar _prop = _interopRequireDefault(require(\"ramda/src/prop\"));\nvar _propEq = _interopRequireDefault(require(\"ramda/src/propEq\"));\nvar _remove = _interopRequireDefault(require(\"ramda/src/remove\"));\nvar _unionWith = _interopRequireDefault(require(\"ramda/src/unionWith\"));\nvar _useWith = _interopRequireDefault(require(\"ramda/src/useWith\"));\nvar _react = require(\"react\");\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); } /*\n * Exports the {@link ui/ViewManager.TransitionGroup} component.\n */ // Using string refs from the source code of ReactTransitionGroup\n/**\n * Returns the index of a child in an array found by `key` matching\n *\n * @param {Object} child React element to find\n * @param {Object[]} children Array of React elements\n * @returns {Number} Index of child\n * @method\n * @private\n */ // eslint-disable-next-line react-hooks/rules-of-hooks\nvar indexOfChild = (0, _useWith[\"default\"])(_findIndex[\"default\"], [(0, _propEq[\"default\"])('key'), _identity[\"default\"]]);\n\n/**\n * Returns an array of non-null children\n *\n * @param  {Object[]} children Array of React children\n *\n * @returns {Object[]}          Array of children\n * @private\n */\nvar mapChildren = function mapChildren(children) {\n  var result = children && _react.Children.toArray(children);\n  return result ? result.filter(function (c) {\n    return !!c;\n  }) : [];\n};\n\n/**\n * Merges two arrays of children without any duplicates (by `key`)\n *\n * @param {Object[]} a Set of children\n * @param {Object[]} b Set of children\n * @returns {Object[]} Merged set of children\n * @method\n * @private\n */\nvar mergeChildren = (0, _unionWith[\"default\"])((0, _eqBy[\"default\"])((0, _prop[\"default\"])('key')));\n\n// Cached event forwarders\nvar forwardOnAppear = (0, _handle.forward)('onAppear');\nvar forwardOnEnter = (0, _handle.forward)('onEnter');\nvar forwardOnLeave = (0, _handle.forward)('onLeave');\nvar forwardOnStay = (0, _handle.forward)('onStay');\n\n/**\n * Manages the transition of added and removed child components. Children that are added are\n * transitioned in and those removed are transition out via optional callbacks on the child.\n *\n * Ported from [ReactTransitionGroup]\n * (https://facebook.github.io/react/docs/animation.html#low-level-api-reacttransitiongroup).\n * Currently somewhat specialized for the purposes of ViewManager.\n *\n * @class TransitionGroup\n * @memberof ui/ViewManager\n * @private\n */\nvar TransitionGroup = exports.TransitionGroup = /*#__PURE__*/function (_Component) {\n  _inherits(TransitionGroup, _Component);\n  var _super = _createSuper(TransitionGroup);\n  function TransitionGroup(props) {\n    var _this;\n    _classCallCheck(this, TransitionGroup);\n    _this = _super.call(this, props);\n    _this.performAppear = function (key) {\n      _this.currentlyTransitioningKeys[key] = true;\n      var component = _this.groupRefs[key];\n      if (component.componentWillAppear) {\n        component.componentWillAppear(_this._handleDoneAppearing.bind(_assertThisInitialized(_this), key));\n      } else {\n        _this._handleDoneAppearing(key);\n      }\n    };\n    _this._handleDoneAppearing = function (key) {\n      var component = _this.groupRefs[key];\n      if (component.componentDidAppear) {\n        component.componentDidAppear();\n      }\n      forwardOnAppear({\n        type: 'onAppear',\n        view: component\n      }, _this.props);\n      _this.completeTransition({\n        key: key,\n        noForwarding: true\n      });\n      var currentChildMapping = mapChildren(_this.props.children);\n      if (!currentChildMapping || !currentChildMapping.find(function (child) {\n        return child.key === key;\n      })) {\n        // This was removed before it had fully appeared. Remove it.\n        _this.performLeave(key);\n      }\n    };\n    _this.performEnter = function (key) {\n      _this.currentlyTransitioningKeys[key] = true;\n      var component = _this.groupRefs[key];\n      if (component.componentWillEnter) {\n        component.componentWillEnter(_this._handleDoneEntering.bind(_assertThisInitialized(_this), key));\n      } else {\n        _this._handleDoneEntering(key);\n      }\n    };\n    _this._handleDoneEntering = function (key) {\n      var component = _this.groupRefs[key];\n      if (component.componentDidEnter) {\n        component.componentDidEnter();\n      }\n      forwardOnEnter({\n        type: 'onEnter',\n        view: component\n      }, _this.props);\n      _this.completeTransition({\n        key: key\n      });\n    };\n    _this.performStay = function (key) {\n      var component = _this.groupRefs[key];\n      if (component.componentWillStay) {\n        component.componentWillStay(_this._handleDoneStaying.bind(_assertThisInitialized(_this), key));\n      } else {\n        _this._handleDoneStaying(key);\n      }\n    };\n    _this._handleDoneStaying = function (key) {\n      var component = _this.groupRefs[key];\n      if (component.componentDidStay) {\n        component.componentDidStay();\n      }\n      forwardOnStay({\n        type: 'onStay',\n        view: component\n      }, _this.props);\n    };\n    _this.performLeave = function (key) {\n      _this.currentlyTransitioningKeys[key] = true;\n      var component = _this.groupRefs[key];\n      if (component.componentWillLeave) {\n        component.componentWillLeave(_this._handleDoneLeaving.bind(_assertThisInitialized(_this), key));\n      } else {\n        // Note that this is somewhat dangerous b/c it calls setState()\n        // again, effectively mutating the component before all the work\n        // is done.\n        _this._handleDoneLeaving(key);\n      }\n    };\n    _this._handleDoneLeaving = function (key) {\n      var component = _this.groupRefs[key];\n      if (component.componentDidLeave) {\n        component.componentDidLeave();\n      }\n      forwardOnLeave({\n        type: 'onLeave',\n        view: component\n      }, _this.props);\n      _this.completeTransition({\n        key: key\n      });\n      _this.setState(function (state) {\n        var index = indexOfChild(key, state.children);\n        return {\n          children: (0, _remove[\"default\"])(index, 1, state.children)\n        };\n      });\n    };\n    _this.storeRefs = function (key) {\n      return function (node) {\n        _this.groupRefs[key] = node;\n      };\n    };\n    /* This code is the same as @enact/core/WithRef. */\n    _this.getNodeRef = function () {\n      var _refNode$parentElemen;\n      var refNode = _this.nodeRef.current;\n      var attributeSelector = \"[data-transitiongroup-id=\\\"\".concat(refNode.getAttribute('data-transitiongroup-target'), \"\\\"]\");\n      /* The intended code is to search for the referrer element via a single querySelector call. But unit tests cannot handle :has() properly.\n      const selector = `:scope ${attributeSelector}, :scope :has(${attributeSelector})`;\n      return refNode?.parentElement?.querySelector(selector) || null;\n      */\n      var targetNode = (refNode === null || refNode === void 0 || (_refNode$parentElemen = refNode.parentElement) === null || _refNode$parentElemen === void 0 ? void 0 : _refNode$parentElemen.querySelector(attributeSelector)) || null;\n      for (var current = targetNode; current; current = current.parentElement) {\n        var _current;\n        if (((_current = current) === null || _current === void 0 ? void 0 : _current.parentElement) === (refNode === null || refNode === void 0 ? void 0 : refNode.parentElement)) {\n          return current;\n        }\n      }\n    };\n    _this.state = {\n      firstRender: true,\n      children: []\n    };\n    _this.hasMounted = false;\n    _this.currentlyTransitioningKeys = {};\n    _this.keysToEnter = [];\n    _this.keysToLeave = [];\n    _this.keysToStay = [];\n    _this.groupRefs = {};\n    _this.nodeRef = /*#__PURE__*/(0, _react.createRef)();\n    _this.refNodeId = '#transition#group#';\n    return _this;\n  }\n  _createClass(TransitionGroup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      this.hasMounted = true;\n\n      // this isn't used by ViewManager or View at the moment but leaving it around for future\n      // flexibility\n      this.state.children.forEach(function (child) {\n        return _this2.performAppear(child.key);\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      this.reconcileUnmountedChildren(prevState.children, this.state.children);\n      this.reconcileChildren(prevState.activeChildren, this.state.activeChildren);\n    }\n  }, {\n    key: \"reconcileUnmountedChildren\",\n    value: function reconcileUnmountedChildren(prevChildMapping, nextChildMapping) {\n      var _this3 = this;\n      var nextChildKeys = nextChildMapping.map(function (c) {\n        return c.key;\n      });\n      var prevChildKeys = prevChildMapping.map(function (c) {\n        return c.key;\n      });\n\n      // `state.children` represents the mounted children. if a view change happens during a\n      // transition causing the View to be unmounted before it fires its callback, the\n      // currentlyTransitioningKeys map will be out of sync. To manage that, we check for keys\n      // that have fallen out of the `children` array and manually clean them up from the map.\n      prevChildKeys.filter(function (key) {\n        return !nextChildKeys.includes(key);\n      }).forEach(function (key) {\n        return _this3.completeTransition({\n          key: key\n        });\n      });\n    }\n  }, {\n    key: \"reconcileChildren\",\n    value: function reconcileChildren(prevActiveChildMapping, nextActiveChildMapping) {\n      var _this4 = this;\n      var size = this.props.size;\n      var nextChildKeys = nextActiveChildMapping.map(function (c) {\n        return c.key;\n      });\n      var prevChildKeys = prevActiveChildMapping.map(function (c) {\n        return c.key;\n      });\n      var droppedKeys = prevChildKeys.filter(function (key) {\n        return !nextChildKeys.includes(key);\n      });\n\n      // if children haven't changed, there's nothing to reconcile\n      if (prevActiveChildMapping.length === nextActiveChildMapping.length && droppedKeys.length === 0) {\n        return;\n      }\n\n      // remove any \"dropped\" children from the list of transitioning children\n      droppedKeys.forEach(function (key) {\n        return _this4.completeTransition({\n          key: key\n        });\n      });\n\n      // mark any new child as entering\n      nextChildKeys.forEach(function (key, index) {\n        var hasPrev = prevChildKeys.includes(key);\n        if (!hasPrev || _this4.currentlyTransitioningKeys[key]) {\n          // flag a view to enter if it's new (!hasPrev), or if it's not new (hasPrev) but is\n          // re-entering (is currently transitioning)\n          _this4.keysToEnter.push(key);\n        } else if (index < size - 1) {\n          // keep views that are less than size minus the \"transition out\" buffer\n          _this4.keysToStay.push(key);\n        } else {\n          // everything else is leaving\n          _this4.keysToLeave.push(key);\n        }\n      });\n\n      // mark any previous child not remaining as leaving\n      prevChildKeys.forEach(function (key) {\n        var hasNext = nextChildKeys.includes(key);\n        var isRendered = Boolean(_this4.groupRefs[key]);\n        // flag a view to leave if it isn't in the new set (!hasNext) and it exists (isRendered)\n        if (!hasNext && isRendered) {\n          _this4.keysToLeave.push(key);\n        }\n      });\n      if (this.keysToEnter.length || this.keysToLeave.length) {\n        (0, _handle.forwardCustom)('onWillTransition')(null, this.props);\n      }\n\n      // once the component has been updated, start the enter transition for new children,\n      var keysToEnter = this.keysToEnter;\n      this.keysToEnter = [];\n      keysToEnter.forEach(this.performEnter);\n\n      // ... the stay transition for any children remaining,\n      var keysToStay = this.keysToStay;\n      this.keysToStay = [];\n      keysToStay.forEach(this.performStay);\n\n      // ... and the leave transition for departing children\n      var keysToLeave = this.keysToLeave;\n      this.keysToLeave = [];\n      keysToLeave.forEach(this.performLeave);\n    }\n  }, {\n    key: \"completeTransition\",\n    value: function completeTransition(_ref) {\n      var key = _ref.key,\n        _ref$noForwarding = _ref.noForwarding,\n        noForwarding = _ref$noForwarding === void 0 ? false : _ref$noForwarding;\n      if (key in this.currentlyTransitioningKeys) {\n        delete this.currentlyTransitioningKeys[key];\n        if (!noForwarding && Object.keys(this.currentlyTransitioningKeys).length === 0) {\n          (0, _handle.forwardCustom)('onTransition')(null, this.props);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n      // support wrapping arbitrary children with a component that supports the necessary\n      // lifecycle methods to animate transitions\n      var childrenToRender = this.state.children.map(function (child, index) {\n        var isLeaving = child.props['data-index'] !== _this5.props.currentIndex && typeof child.props['data-index'] !== 'undefined';\n        return /*#__PURE__*/(0, _react.cloneElement)(_this5.props.childFactory(child), {\n          key: child.key,\n          ref: _this5.storeRefs(child.key),\n          leaving: isLeaving,\n          appearing: !_this5.hasMounted,\n          getParentRef: _this5.getNodeRef,\n          renderedIndex: index\n        });\n      });\n\n      // Do not forward TransitionGroup props to primitive DOM nodes\n      var props = Object.assign({}, this.props);\n      props.ref = this.props.componentRef;\n      props['data-transitiongroup-id'] = this.refNodeId;\n      delete props.childFactory;\n      delete props.component;\n      delete props.componentRef;\n      delete props.currentIndex;\n      delete props.onAppear;\n      delete props.onEnter;\n      delete props.onLeave;\n      delete props.onStay;\n      delete props.onTransition;\n      delete props.onWillTransition;\n      delete props.size;\n      return /*#__PURE__*/(0, _jsxRuntime.jsxs)(_jsxRuntime.Fragment, {\n        children: [/*#__PURE__*/(0, _react.createElement)(this.props.component, props, childrenToRender), /*#__PURE__*/(0, _jsxRuntime.jsx)(\"div\", {\n          \"data-transitiongroup-target\": this.refNodeId,\n          ref: this.nodeRef,\n          style: {\n            display: 'none'\n          }\n        })]\n      });\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var children = mapChildren(props.children).slice(0, props.size);\n      if (state.firstRender) {\n        return {\n          activeChildren: children,\n          children: children,\n          firstRender: false\n        };\n      }\n      return {\n        activeChildren: children,\n        children: mergeChildren(children, state.children).slice(0, props.size)\n      };\n    }\n  }]);\n  return TransitionGroup;\n}(_react.Component);\nTransitionGroup.propTypes = /** @lends ui/ViewManager.TransitionGroup.prototype */{\n  children: _propTypes2[\"default\"].node.isRequired,\n  /**\n   * Adapts children to be compatible with TransitionGroup\n   *\n   * @type {Function}\n   */\n  childFactory: _propTypes2[\"default\"].func,\n  /**\n   * Type of component wrapping the children.\n   *\n   * May be a DOM node or a custom React component.\n   *\n   * @type {String|Component}\n   * @default 'div'\n   */\n  component: _propTypes[\"default\"].renderable,\n  /**\n   * Called with a reference to {@link ui/ViewManager.TransitionGroup.component|component}\n   *\n   * @type {Object|Function}\n   * @private\n   */\n  componentRef: _propTypes[\"default\"].ref,\n  /**\n   * Current Index the ViewManager is on\n   *\n   * @type {Number}\n   */\n  currentIndex: _propTypes2[\"default\"].number,\n  /**\n   * Called when each view is rendered during initial construction.\n   *\n   * @type {Function}\n   */\n  onAppear: _propTypes2[\"default\"].func,\n  /**\n   * Called when each view completes its transition into the viewport.\n   *\n   * @type {Function}\n   */\n  onEnter: _propTypes2[\"default\"].func,\n  /**\n   * Called when each view completes its transition out of the viewport.\n   *\n   * @type {Function}\n   */\n  onLeave: _propTypes2[\"default\"].func,\n  /**\n   * Called when each view completes its transition within the viewport.\n   *\n   * @type {Function}\n   */\n  onStay: _propTypes2[\"default\"].func,\n  /**\n   * Called once when all views have completed their transition.\n   *\n   * @type {Function}\n   */\n  onTransition: _propTypes2[\"default\"].func,\n  /**\n   * Called once before views begin their transition.\n   *\n   * @type {Function}\n   */\n  onWillTransition: _propTypes2[\"default\"].func,\n  /**\n   * Maximum number of rendered children.\n   *\n   * Used to limit how many visible transitions are active at any time.\n   * A value of 1 would prevent any exit transitions whereas a value of 2,\n   * the default, would ensure that only 1 view is transitioning on and 1 view is\n   * transitioning off at a time.\n   *\n   * @type {Number}\n   * @default 2\n   */\n  size: _propTypes2[\"default\"].number\n};\nTransitionGroup.defaultProps = {\n  childFactory: _identity[\"default\"],\n  component: 'div',\n  size: 2\n};\nvar _default = exports[\"default\"] = TransitionGroup;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}